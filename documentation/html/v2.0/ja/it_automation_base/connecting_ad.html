
<!DOCTYPE html>

<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <title>目次 &#8212; Documentation  ドキュメント</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/option.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/translations.js"></script>
  
    <script type="text/javascript" src="../../../_static/exastro_documents.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="検索" href="../../../search.html" /> 
  </head>
<body id="page" class="ja">


<div id="container">

<div id="header">
  <header class="divInner">
    <!-- Exastro logo -->
    <div id="logo"><img src="../../../_static/img/exastro.svg" alt="Exastro"></div>
    <!-- Project name -->
    <div id="projectName"><a href="../../../index.html">Documentation</a></div>
    <!-- Heaedr navigation -->
    <div id="headerSearch">
      <form class="search" action="../../../search.html" method="get">
        <input type="text" name="q" aria-labelledby="searchlabel">
        <button type="submit" value="検索"><img src="../../../_static/img/search.png" alt="検索"></button>
      </form>
    </div>
  </header>
</div><!-- End #header -->


<div id="toolbar">
  <div class="divInner">
    
    <div id="documentVersion">
      <dl>
        <dt>Document version</dt>
        <dd>
          <div>
            <select name="version" onchange="location.href=value;">
                file_path: v2.0/ja/it_automation_base/connecting_ad
                  <option value="#"
                  selected
                  >current</option>
                file_path: v2.0/ja/it_automation_base/connecting_ad
                  <option value="#"
                  selected
                  >v2.0 (current)</option>
            </select>
          </div>
        </dd>
      </dl>
    </div>

    <div id="documentLanguage">
      <dl>
        <dt>Language</dt>
        <dd>
          <div>
            <select name="lang" onchange="location.href=value;">
                file_path: v2.0/ja/it_automation_base/connecting_ad
                hasdoc: True
                  <option value="#"
                  selected
                  >日本語</option>
                file_path: v2.0/en/it_automation_base/connecting_ad
                hasdoc: False
            </select>
          </div>
        </dd>
      </dl>
    </div>
    <div id="toolbarNavigation">
      <ul>
      </ul>
    </div>
  </div>
</div><!-- End #toolbar -->

<div id="sideMenu">

  <div id="menuButton"></div>
  
  <aside class="divInner">
    <ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Exastro IT Automation Documentation</a></li>
</ul>

    <!-- <ul>
      <li class="toctree-l1"><a class="reference internal" href="../../../../genindex.html">索引</a></li>
    </ul> -->
    
  </aside>
</div><!-- End #sideMenu -->

<div id="contents">
<main class="divInner">


<div id="breadcrumbs">
  <ul>
    <li><a href="../../../index.html">HOME</a></li>
    
    <li>目次</li>
  </ul>
</div>


<div id="article">
<article class="divInner">
<div class="body" role="main">

  <a class="reference internal image-reference" href="../../../_images/image116.png"><img alt="../../../_images/image116.png" src="../../../_images/image116.png" style="width: 3.35079in; height: 0.78559in;" /></a>
<p>ITA_システム構成/環境構築ガイド</p>
<p>ActiveDirectory連携編</p>
<p><em>－</em>第1.9版<em>－</em></p>
<p>Copyright © NEC Corporation 2019. All rights reserved.</p>
<p>免責事項</p>
<p>本書の内容はすべて日本電気株式会社が所有する著作権に保護されています。</p>
<p>本書の内容の一部または全部を無断で転載および複写することは禁止されています。</p>
<p>本書の内容は将来予告なしに変更することがあります。</p>
<p>日本電気株式会社は、本書の技術的もしくは編集上の間違い、欠落について、一切責任を負いません。</p>
<p>日本電気株式会社は、本書の内容に関し、その正確性、有用性、確実性その他いかなる保証もいたしません。</p>
<p>商標</p>
<ul class="simple">
<li><dl class="simple">
<dt>LinuxはLinus</dt><dd><p>Torvalds氏の米国およびその他の国における登録商標または商標です。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Red Hatは、Red Hat,</dt><dd><p>Inc.の米国およびその他の国における登録商標または商標です。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Apache、Apache Tomcat、Tomcatは、Apache Software</dt><dd><p>Foundationの登録商標または商標です。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Oracle、MySQLは、Oracle Corporation</dt><dd><p>およびその子会社、関連会社の米国およびその他の国における登録商標です。</p>
</dd>
</dl>
</li>
<li><p>MariaDBは、MariaDB Foundationの登録商標または商標です。</p></li>
<li><p>Ansibleは、Red Hat, Inc.の登録商標または商標です。</p></li>
<li><dl class="simple">
<dt>Active Directoryは、米国Microsoft</dt><dd><p>Corporationの米国およびその他の国における登録商標または商標です。</p>
</dd>
</dl>
</li>
</ul>
<p>その他、本書に記載のシステム名、会社名、製品名は、各社の登録商標もしくは商標です。</p>
<p>なお、® マーク、TMマークは本書に明記しておりません。</p>
<p>※本書では「Exastro IT Automation」を「ITA」として記載します。</p>
<section id="id1">
<h1>目次<a class="headerlink" href="#id1" title="この見出しへのパーマリンク">¶</a></h1>
<p><a class="reference external" href="#_Toc14438870">目次</a> <a class="reference external" href="#_Toc14438870">2</a></p>
<p><a class="reference external" href="#はじめに">はじめに</a> <a class="reference external" href="#はじめに">3</a></p>
<p><a class="reference external" href="#機能">1 機能</a> <a class="reference external" href="#機能">4</a></p>
<p><a class="reference external" href="#システム構成">2 システム構成</a> <a class="reference external" href="#システム構成">5</a></p>
<p><a class="reference external" href="#システム要件">3 システム要件</a> <a class="reference external" href="#システム要件">6</a></p>
<p><a class="reference external" href="#外部認証設定ファイルの準備">4 外部認証設定ファイルの準備</a>
<a class="reference external" href="#外部認証設定ファイルの準備">7</a></p>
<p><a class="reference external" href="#外部認証設定ファイルについて">4.1 外部認証設定ファイルについて</a>
<a class="reference external" href="#外部認証設定ファイルについて">7</a></p>
<p><a class="reference external" href="#外部認証設定ファイルの配備">4.2 外部認証設定ファイルの配備</a>
<a class="reference external" href="#外部認証設定ファイルの配備">7</a></p>
<p><a class="reference external" href="#外部認証設定ファイルの記述">4.3 外部認証設定ファイルの記述</a>
<a class="reference external" href="#外部認証設定ファイルの記述">8</a></p>
</section>
<section id="id2">
<h1>はじめに<a class="headerlink" href="#id2" title="この見出しへのパーマリンク">¶</a></h1>
<div class="line-block">
<div class="line">本書では、ITAでActiveDirectory連携（以下、「AD連携」）機能を</div>
<div class="line">利用頂く為に必要なシステム構成と環境構築について説明します。</div>
</div>
<p>AD連携機能を利用するにあたっては、ITA基本機能が構築済であることが前提です。ITA基本機能の構築に関しては、「システム構成／環境構築ガイド_基本編」をご覧ください。</p>
</section>
<section id="id3">
<h1>機能<a class="headerlink" href="#id3" title="この見出しへのパーマリンク">¶</a></h1>
<p>AD連携機能は、以下の機能を提供します。</p>
<p>表 1‑1 機能名</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>No</p></th>
<th class="head"><p>機能名</p></th>
<th class="head"><p>用途</p></th>
<th class="head"><p>WEB</p>
<p>コン
テンツ</p>
</th>
<th class="head"><p>Ba
ckYard</p>
<p>コン
テンツ</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>AD認証
(kerberos認
証機能)機能</p></td>
<td><p>ITAからAD
に対してAD認証（Kerberos認証）</p>
<p>を行います。</p>
</td>
<td><p>○</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>ミラー
リング機能</p></td>
<td><p>AD上のユ
ーザー情報およびグループ情報を</p>
<p>ITA上の「ユー
ザー管理」および「ロール管理」</p>
<p>ならびに「ロール・ユ
ーザ紐付管理」にミラーリングを</p>
<p>します。（一方向同期）</p>
</td>
<td></td>
<td><p>○</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id4">
<h1>システム構成<a class="headerlink" href="#id4" title="この見出しへのパーマリンク">¶</a></h1>
<p>AD連携機能は、組織でお使いのドメインを構成するドメインコントローラーと連携します。</p>
<a class="reference internal image-reference" href="../../../_images/image213.png"><img alt="../../../_images/image213.png" src="../../../_images/image213.png" style="width: 5.21736in; height: 2.54792in;" /></a>
<div class="line-block">
<div class="line">※ userPrincipalName … ActiveDirectory上のログインID</div>
<div class="line">※ displayName … 表示名</div>
</div>
<div class="line-block">
<div class="line">※ sAMAccountName …
オブジェクト名（上図では、グループオブジェクトの名称）</div>
<div class="line">※ memberof … ユーザーが所属するグループ名</div>
</div>
<p>ITAとドメインコントローラーの間にプロキシがある構成には対応していません。</p>
</section>
<section id="id5">
<h1>システム要件<a class="headerlink" href="#id5" title="この見出しへのパーマリンク">¶</a></h1>
<p>AD連携機能は、ITAシステムのシステム要件に準拠するため、「システム構成／環境構築ガイド_基本編」を</p>
<p>参照してください。ここではBackyardの要件を記載します。</p>
<blockquote>
<div><p>●BackYard</p>
</div></blockquote>
<ol class="arabic simple">
<li><p>表 AD連携機能 Backyardシステム要件</p></li>
</ol>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><ul class="simple">
<li></li>
</ul>
<p><em>パッケージ*</em></p>
</th>
<th class="head"><ul class="simple">
<li></li>
</ul>
<p><em>バージョン*</em></p>
</th>
<th class="head"><p><strong>注意事項</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>PHP</p></td>
<td><p>5.6</p></td>
<td></td>
</tr>
</tbody>
</table>
<ol class="arabic simple" start="2">
<li><p>表 AD連携機能 必要外部モジュール</p></li>
</ol>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><ul class="simple">
<li></li>
</ul>
<p><em>外部ﾓｼﾞｭｰﾙ*</em></p>
</th>
<th class="head"><ul class="simple">
<li></li>
</ul>
<p><em>バージョン*</em></p>
</th>
<th class="head"><p><strong>注意事項</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>PEAR</p></td>
<td><p>1.10.3</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="id6">
<h1>外部認証設定ファイルの準備<a class="headerlink" href="#id6" title="この見出しへのパーマリンク">¶</a></h1>
<section id="id7">
<h2>外部認証設定ファイルについて<a class="headerlink" href="#id7" title="この見出しへのパーマリンク">¶</a></h2>
<div class="line-block">
<div class="line">ITAでは、以下の２つの条件を満たしている場合に、自動的にAD連携機能が有効になります。</div>
<div class="line">①所定のディレクトリに外部認証設定ファイルが存在する</div>
<div class="line">②外部認証設定ファイルの内容において、有効な行が少なくとも１行はある</div>
<div class="line">AD連携機能を有効にするには、所定のディレクトリに外部認証設定ファイルを配備する必要があります。</div>
</div>
<div class="line-block">
<div class="line">詳細は、 <em>4.2外部認証設定ファイルの配備</em>をご参照ください。</div>
<div class="line">また、外部認証設定ファイルの記述方法についても所定の形式が決まっています。</div>
</div>
<div class="line-block">
<div class="line">所定の形式以外で記述されている場合はエラーになります。</div>
<div class="line">詳細は、 <em>4.3</em>外部認証設定ファイルの記述をご参照ください。</div>
</div>
</section>
<section id="id8">
<h2>外部認証設定ファイルの配備<a class="headerlink" href="#id8" title="この見出しへのパーマリンク">¶</a></h2>
<div class="line-block">
<div class="line">ファイル名と配備先のディレクトリは下記のとおりにしてください。</div>
<div class="line">■ファイル名</div>
<div class="line">・ExternalAuthSettings.ini</div>
</div>
<div class="line-block">
<div class="line">■配備先のディレクトリ</div>
<div class="line">・~/ita-root/confs/webconfs/</div>
</div>
</section>
<section id="id9">
<h2>外部認証設定ファイルの記述<a class="headerlink" href="#id9" title="この見出しへのパーマリンク">¶</a></h2>
<p>外部認証設定ファイルには、「セクション」「キー」設定項目として記述します。</p>
<p>以下は設定例です。</p>
<p>各セクションおよび各キーの詳細は表 4.3‑1 ExternalAuthSetting.ini 設定値
早見表をご参照ください。</p>
<p>各セクションおよび各キーについては下記の表をご参照ください。</p>
<p><strong>※ connect_protocolversion 以外は全て必須の要素となります。</strong></p>
<p>表 4.3‑1 ExternalAuthSetting.ini 設定値 早見表</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>セクション</strong></p></th>
<th class="head"><p><strong>キー</strong></p></th>
<th class="head"><p><strong>説明</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Authen
tication_method</p></td>
<td><p>AuthMode</p></td>
<td><p>認証方式を設定します。
ITAで
は通常「1」を設定してください。</p></td>
</tr>
<tr class="row-odd"><td><p>Repl
ication_Connect</p></td>
<td><p>ConnectionUser</p></td>
<td><p>ミラーリング機能に
おいて、AD上の情報を探索する為の</p>
<p>ADユーザーを指定します。</p>
<p>ミラーリング対象
の全てのAD情報を探索できる権限を</p>
<p>持つユーザーを指定して下さい。</p>
</td>
</tr>
<tr class="row-even"><td></td>
<td><p>UserPassword</p></td>
<td><p>「ConnectionUser」要素
で指定したユーザーのパスワードを</p>
<p>指定します。</p>
</td>
</tr>
<tr class="row-odd"><td></td>
<td><p>basedn</p></td>
<td><p>ドメインのベースdnを指定します。</p>
<p>記述法について「LDAP識
別名の記述ルール」に基づきます。</p>
<p>ドメイン名を
構成するDCは指定必須となります。</p>
<p>探索範囲の指定につい
ては、任意でOUのみ指定可能です。</p>
<p><strong>※ITAでは、OU以
外で探索範囲は指定できません。</strong></p>
</td>
</tr>
<tr class="row-even"><td><p>Dom
ainController_1
* <a class="footnote-reference brackets" href="#id11" id="id10" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p></td>
<td><p>host</p></td>
<td><p>連携するADを
構成するDomainControllerのホスト</p>
<p>を指定します。</p>
</td>
</tr>
<tr class="row-odd"><td></td>
<td><p>port</p></td>
<td><p>連携するADを
構成するDomainControllerのポート</p>
<p>を指定します。</p>
</td>
</tr>
<tr class="row-even"><td></td>
<td><p>basedn</p></td>
<td><p>※ Replication_Connect
の場合と同様の内容を指定</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>rec
onnection_count</p></td>
<td><p>通信不調でサ
ーバーとの接続に失敗した場合に、</p>
<p>自動的に再
接続を試行する回数を指定します。</p>
<p>指定された回数内に接続で
きなかった場合、ログイン画面上に</p>
<p>エラーメッセージを返します。</p>
</td>
</tr>
<tr class="row-even"><td></td>
<td><p><a href="#id12"><span class="problematic" id="id13">connect_</span></a>
protocolversion</p></td>
<td><p>LDAPバージョンを指定できます。</p>
<p><strong>※指定がない場合
は、「3」で処理を実行します。</strong></p>
</td>
</tr>
<tr class="row-odd"><td></td>
<td><p>co
nnect_timelimit</p></td>
<td><p>DomainControll
erへの接続待機時間を指定します。</p>
<p>指定された時間内に接続で
きなかった場合、失敗となります。</p>
</td>
</tr>
<tr class="row-even"><td></td>
<td><p>s
earch_timelimit</p></td>
<td><p>ADにおけるKerberos
認証処理の待機時間を指定します。</p>
<p>指定された時間内に認証で
きなかった場合、失敗となります。</p>
</td>
</tr>
<tr class="row-odd"><td><p>LocalAuthUserId</p></td>
<td><p>IdList</p></td>
<td><p>ITA上のユーザーの内
、AD連携の対象外とするユーザーを</p>
<p>指定できます。<strong>（※I
TAのユーザーIDで指定します。）</strong></p>
<p>カンマ区切
りで複数指定することができます。</p>
</td>
</tr>
<tr class="row-even"><td><p>LocalRoleId</p></td>
<td><p>IdList</p></td>
<td><p>ITA上のロールの
内、AD連携の対象外とするロールを</p>
<p>指定できます。<strong>（
※ITAのロールIDで指定します。）</strong></p>
<p>カンマ区切
りで複数指定することができます。</p>
</td>
</tr>
</tbody>
</table>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id11" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id10">1</a><span class="fn-bracket">]</span></span>
<p>* DomainController
は最大で3つまで指定できます。その場合は、「DomainController_2」ならびに</p>
<p>「DomainController_3」としてセクションを追記してください。キーは「DomainController_1」と同一です。</p>
<blockquote>
<div><p>複数指定した場合は、各DomainControllerに対して順番に処理を行いますが、成功した段階で次のDomainControllerに対しては処理を行いません。</p>
<p><strong>※ ドメインが異なるDomainControllerを指定することはできません。</strong></p>
</div></blockquote>
</aside>
</aside>
</section>
</section>


</div>


<div id="articleNavigation">
  <ul>
  </ul>
</div>


<div id="pageTopLink">
  <a href="#container"><i>↑</i> Page Top</a>
</div>

</article>
</div>
</main>
</div><!-- End #contents -->
<div id="footer">
  <footer class="divInner">
    <small>Copyright © 2022 NEC Corporation</small>
  </footer>
</div><!-- End #footer -->

<div id="overlay"></div>

</div><!-- End #container -->
  </body>
</html>