
<!DOCTYPE html>

<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <title>8. 目次 &#8212; Documentation  ドキュメント</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/option.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/translations.js"></script>
  
    <script type="text/javascript" src="../../../_static/exastro_documents.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="検索" href="../../../search.html" /> 
  </head>
<body id="page" class="ja">


<div id="container">

<div id="header">
  <header class="divInner">
    <!-- Exastro logo -->
    <div id="logo"><img src="../../../_static/img/exastro.svg" alt="Exastro"></div>
    <!-- Project name -->
    <div id="projectName"><a href="../../../index.html">Documentation</a></div>
    <!-- Heaedr navigation -->
    <div id="headerSearch">
      <form class="search" action="../../../search.html" method="get">
        <input type="text" name="q" aria-labelledby="searchlabel">
        <button type="submit" value="検索"><img src="../../../_static/img/search.png" alt="検索"></button>
      </form>
    </div>
  </header>
</div><!-- End #header -->


<div id="toolbar">
  <div class="divInner">
    
    <div id="documentVersion">
      <dl>
        <dt>Document version</dt>
        <dd>
          <div>
            <select name="version" onchange="location.href=value;">
                file_path: v2.0/ja/ansible-driver/general_operations
                  <option value="#"
                  selected
                  >current</option>
                file_path: v2.0/ja/ansible-driver/general_operations
                  <option value="#"
                  selected
                  >v2.0 (current)</option>
            </select>
          </div>
        </dd>
      </dl>
    </div>

    <div id="documentLanguage">
      <dl>
        <dt>Language</dt>
        <dd>
          <div>
            <select name="lang" onchange="location.href=value;">
                file_path: v2.0/ja/ansible-driver/general_operations
                hasdoc: True
                  <option value="#"
                  selected
                  >日本語</option>
                file_path: v2.0/en/ansible-driver/general_operations
                hasdoc: False
            </select>
          </div>
        </dd>
      </dl>
    </div>
    <div id="toolbarNavigation">
      <ul>
      </ul>
    </div>
  </div>
</div><!-- End #toolbar -->

<div id="sideMenu">

  <div id="menuButton"></div>
  
  <aside class="divInner">
    <ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Exastro IT Automation Documentation</a></li>
</ul>

    <!-- <ul>
      <li class="toctree-l1"><a class="reference internal" href="../../../../genindex.html">索引</a></li>
    </ul> -->
    
  </aside>
</div><!-- End #sideMenu -->

<div id="contents">
<main class="divInner">


<div id="breadcrumbs">
  <ul>
    <li><a href="../../../index.html">HOME</a></li>
    
    <li><span class="section-number">8. </span>目次</li>
  </ul>
</div>


<div id="article">
<article class="divInner">
<div class="body" role="main">

  <a class="reference internal image-reference" href="../../../_images/image11.png"><img alt="../../../_images/image11.png" src="../../../_images/image11.png" style="width: 3.35069in; height: 0.78542in;" /></a>
<p>ITA_利用手順マニュアル</p>
<p>Ansible-driver</p>
<p><em>－</em>第1.10版<em>－</em></p>
<p>Copyright © NEC Corporation 2019. All rights reserved.</p>
<p>免責事項</p>
<p>本書の内容はすべて日本電気株式会社が所有する著作権に保護されています。</p>
<p>本書の内容の一部または全部を無断で転載および複写することは禁止されています。</p>
<p>本書の内容は将来予告なしに変更することがあります。</p>
<p>日本電気株式会社は、本書の技術的もしくは編集上の間違い、欠落について、一切責任を負いません。</p>
<p>日本電気株式会社は、本書の内容に関し、その正確性、有用性、確実性その他いかなる保証もいたしません。</p>
<p>商標</p>
<ul class="simple">
<li><dl class="simple">
<dt>LinuxはLinus</dt><dd><p>Torvalds氏の米国およびその他の国における登録商標または商標です。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Red Hatは、Red Hat,</dt><dd><p>Inc.の米国およびその他の国における登録商標または商標です。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Apache、Apache Tomcat、Tomcatは、Apache Software</dt><dd><p>Foundationの登録商標または商標です。</p>
</dd>
</dl>
</li>
<li><p>Ansibleは、Red Hat, Inc.の登録商標または商標です。</p></li>
<li><p>AnsibleTowerは、Red Hat, Inc.の登録商標または商標です。</p></li>
<li><dl class="simple">
<dt>Ansible Automation Controllerは、Red Hat,</dt><dd><p>Inc.の登録商標または商標です。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Ansible Automation Pratformは、Red Hat,</dt><dd><p>Inc.の登録商標または商標です。</p>
</dd>
</dl>
</li>
</ul>
<p>その他、本書に記載のシステム名、会社名、製品名は、各社の登録商標もしくは商標です。</p>
<p>なお、® マーク、TMマークは本書に明記しておりません。</p>
<p>※本書では「Exastro IT Automation」を「ITA」として記載します。</p>
<p>※「Ansible Tower」はAnsible Automation Pratform2.0以降で「Ansible
Automation Controller」に名称が変更になりました。本書での「Ansible
Automation Controller」の記載は、「Ansible
Tower」も含めた記載となっています。</p>
<section id="id1">
<h1><span class="section-number">8. </span>目次<a class="headerlink" href="#id1" title="この見出しへのパーマリンク">¶</a></h1>
<p><a class="reference external" href="#目次">目次</a> <a class="reference external" href="#目次">2</a></p>
<p><a class="reference external" href="#_Toc101774393">はじめに</a> <a class="reference external" href="#_Toc101774393">4</a></p>
<p><a class="reference external" href="#ansible-driver概要">1 Ansible driver概要</a>
<a class="reference external" href="#ansible-driver概要">5</a></p>
<p><a class="reference external" href="#ansible-coreについて">1.1 Ansible Coreについて</a>
<a class="reference external" href="#ansible-coreについて">5</a></p>
<p><a class="reference external" href="#ansible-automation-controllerについて">1.2 Ansible Automation
Controllerについて</a>
<a class="reference external" href="#ansible-automation-controllerについて">5</a></p>
<p><a class="reference external" href="#ansible-driverについて">1.3 Ansible driverについて</a>
<a class="reference external" href="#ansible-driverについて">6</a></p>
<p><a class="reference external" href="#ansible-driverでの変数取り扱い">2 Ansible driverでの変数取り扱い</a>
<a class="reference external" href="#ansible-driverでの変数取り扱い">7</a></p>
<p><a class="reference external" href="#変数の種類">2.1 変数の種類</a> <a class="reference external" href="#変数の種類">7</a></p>
<p><a class="reference external" href="#変数の抜出および具体値登録">2.2 変数の抜出および具体値登録</a>
<a class="reference external" href="#変数の抜出および具体値登録">10</a></p>
<p><a class="reference external" href="#代入値登録による変数の扱い">2.3 代入値登録による変数の扱い</a>
<a class="reference external" href="#代入値登録による変数の扱い">12</a></p>
<p><a class="reference external" href="#ansible-driver-コンソールメニュー構成">3 Ansible driver
コンソールメニュー構成</a>
<a class="reference external" href="#ansible-driver-コンソールメニュー構成">13</a></p>
<p><a class="reference external" href="#メニュー画面一覧">3.1 メニュー/画面一覧</a> <a class="reference external" href="#メニュー画面一覧">13</a></p>
<p><a class="reference external" href="#ansible-driver利用手順">4 Ansible driver利用手順</a>
<a class="reference external" href="#ansible-driver利用手順">16</a></p>
<p><a class="reference external" href="#_Toc101774405">4.1 作業フロー</a> <a class="reference external" href="#_Toc101774405">16</a></p>
<p><a class="reference external" href="#ansible-legacy作業フロー">4.1.1 Ansible-Legacy作業フロー</a>
<a class="reference external" href="#ansible-legacy作業フロー">16</a></p>
<p><a class="reference external" href="#ansible-legacy-role作業フロー">4.1.2 Ansible-Legacy Role作業フロー</a>
<a class="reference external" href="#ansible-legacy-role作業フロー">19</a></p>
<p><a class="reference external" href="#ansible-pioneer作業フロー">4.1.3 Ansible-Pioneer作業フロー</a>
<a class="reference external" href="#ansible-pioneer作業フロー">22</a></p>
<p><a class="reference external" href="#ansible-driver機能操作方法説明">5 Ansible driver機能・操作方法説明</a>
<a class="reference external" href="#ansible-driver機能操作方法説明">25</a></p>
<p><a class="reference external" href="#基本コンソール">5.1 基本コンソール</a> <a class="reference external" href="#基本コンソール">25</a></p>
<p><a class="reference external" href="#機器一覧">5.1.1 機器一覧</a> <a class="reference external" href="#機器一覧">25</a></p>
<p><a class="reference external" href="#オペレーション一覧">5.1.2 オペレーション一覧</a>
<a class="reference external" href="#オペレーション一覧">30</a></p>
<p><a class="reference external" href="#ansible-共通コンソール">5.2 Ansible 共通コンソール</a>
<a class="reference external" href="#ansible-共通コンソール">31</a></p>
<p><a class="reference external" href="#インターフェース情報">5.2.1 インターフェース情報</a>
<a class="reference external" href="#インターフェース情報">31</a></p>
<p><a class="reference external" href="#ansible-automation-controllerホスト一覧">5.2.2 Ansible Automation
Controllerホスト一覧</a>
<a class="reference external" href="#ansible-automation-controllerホスト一覧">36</a></p>
<p><a class="reference external" href="#グローバル変数管理">5.2.3 グローバル変数管理</a>
<a class="reference external" href="#グローバル変数管理">38</a></p>
<p><a class="reference external" href="#テンプレート管理">5.2.4 テンプレート管理</a>
<a class="reference external" href="#テンプレート管理">40</a></p>
<p><a class="reference external" href="#ファイル管理">5.2.5 ファイル管理</a> <a class="reference external" href="#ファイル管理">44</a></p>
<p><a class="reference external" href="#収集インターフェース情報">5.2.6 収集インターフェース情報</a>
<a class="reference external" href="#収集インターフェース情報">46</a></p>
<p><a class="reference external" href="#収集項目値管理">5.2.7 収集項目値管理</a> <a class="reference external" href="#収集項目値管理">46</a></p>
<p><a class="reference external" href="#ansibel-legacylegacy-rolepioneer-コンソール">5.3 Ansibel-Legacy／Legacy
Role／Pioneer　コンソール</a>
<a class="reference external" href="#ansibel-legacylegacy-rolepioneer-コンソール">47</a></p>
<p><a class="reference external" href="#os種別マスタ">5.3.1 OS種別マスタ</a> <a class="reference external" href="#os種別マスタ">47</a></p>
<p><a class="reference external" href="#movement一覧">5.3.2 Movement一覧</a> <a class="reference external" href="#movement一覧">49</a></p>
<p><a class="reference external" href="#playbook素材集ansible-legacyのみ">5.3.3
Playbook素材集（Ansible-Legacyのみ）</a>
<a class="reference external" href="#playbook素材集ansible-legacyのみ">52</a></p>
<p><a class="reference external" href="#ロールパッケージ管理ansible-legacy-roleのみ">5.3.4 ロールパッケージ管理（Ansible-Legacy
Roleのみ）</a>
<a class="reference external" href="#ロールパッケージ管理ansible-legacy-roleのみ">54</a></p>
<p><a class="reference external" href="#対話種別リストansible-pioneerのみ">5.3.5
対話種別リスト（Ansible-Pioneerのみ）</a>
<a class="reference external" href="#対話種別リストansible-pioneerのみ">56</a></p>
<p><a class="reference external" href="#対話ファイル素材集ansible-pioneerのみ">5.3.6
対話ファイル素材集（Ansible-Pioneerのみ）</a>
<a class="reference external" href="#対話ファイル素材集ansible-pioneerのみ">57</a></p>
<p><a class="reference external" href="#movement-playbook紐付movement-対話種別紐付movement-ロール紐付">5.3.7
Movement-Playbook紐付（Movement-対話種別紐付、Movement-ロール紐付）</a>
<a class="reference external" href="#movement-playbook紐付movement-対話種別紐付movement-ロール紐付">59</a></p>
<p><a class="reference external" href="#変数ネスト管理ansible-legacy-roleのみ">5.3.8 変数ネスト管理（Ansible-Legacy
Roleのみ）</a>
<a class="reference external" href="#変数ネスト管理ansible-legacy-roleのみ">61</a></p>
<p><a class="reference external" href="#代入値自動登録設定">5.3.9 代入値自動登録設定</a>
<a class="reference external" href="#代入値自動登録設定">64</a></p>
<p><a class="reference external" href="#作業対象ホスト">5.3.10 作業対象ホスト</a> <a class="reference external" href="#作業対象ホスト">70</a></p>
<p><a class="reference external" href="#代入値管理">5.3.11 代入値管理</a> <a class="reference external" href="#代入値管理">72</a></p>
<p><a class="reference external" href="#作業状態確認">5.3.12 作業状態確認</a> <a class="reference external" href="#作業状態確認">77</a></p>
<p><a class="reference external" href="#作業管理">5.3.13 作業管理</a> <a class="reference external" href="#作業管理">80</a></p>
<p><a class="reference external" href="#作業実行">5.3.14 作業実行</a> <a class="reference external" href="#作業実行">81</a></p>
<p><a class="reference external" href="#構築コード記述方法">6 構築コード記述方法</a>
<a class="reference external" href="#構築コード記述方法">83</a></p>
<p><a class="reference external" href="#playbookansible-legacyの記述">6.1 Playbook（Ansible-Legacy）の記述</a>
<a class="reference external" href="#playbookansible-legacyの記述">83</a></p>
<p><a class="reference external" href="#対話ファイルansible-pioneerの記述">6.2
対話ファイル（Ansible-Pioneer）の記述</a>
<a class="reference external" href="#対話ファイルansible-pioneerの記述">84</a></p>
<p><a class="reference external" href="#ロールパッケージansible-legacy-roleの記述">6.3 ロールパッケージ（Ansible-Legacy
Role）の記述</a>
<a class="reference external" href="#ロールパッケージansible-legacy-roleの記述">102</a></p>
<p><a class="reference external" href="#itareadmeansible-legacy-roleのみの記述">6.4 ITAreadme（Ansible-Legacy
Roleのみ）の記述</a>
<a class="reference external" href="#itareadmeansible-legacy-roleのみの記述">106</a></p>
<p><a class="reference external" href="#読替表ansible-legacy-roleのみの記述">6.5 読替表（Ansible-Legacy
Roleのみ）の記述</a>
<a class="reference external" href="#読替表ansible-legacy-roleのみの記述">108</a></p>
<p><a class="reference external" href="#ita_readmeと読替表の活用例ansible-legacy-roleのみ">6.6 「ita_readme」と「読替表」の活用例（Ansible-Legacy
Roleのみ）</a>
<a class="reference external" href="#ita_readmeと読替表の活用例ansible-legacy-roleのみ">110</a></p>
<p><a class="reference external" href="#backyardコンテンツ">6.7 BackYardコンテンツ</a>
<a class="reference external" href="#backyardコンテンツ">120</a></p>
<p><a class="reference external" href="#ansible利用ガイドラインita追加ルール">6.8
Ansible利用ガイドラインITA追加ルール</a>
<a class="reference external" href="#ansible利用ガイドラインita追加ルール">122</a></p>
<p><a class="reference external" href="#運用操作">7 運用操作</a> <a class="reference external" href="#運用操作">123</a></p>
<p><a class="reference external" href="#メンテナンス">7.1 メンテナンス</a> <a class="reference external" href="#メンテナンス">123</a></p>
<p><a class="reference external" href="#メンテナンス方法について">7.2 メンテナンス方法について</a>
<a class="reference external" href="#メンテナンス方法について">124</a></p>
<p><a class="reference external" href="#_Toc101774448">8 付録</a> <a class="reference external" href="#_Toc101774448">125</a></p>
<p><a class="reference external" href="#ansible実行時に使用される投入データとitaメニューの紐づけ">8.1
Ansible実行時に使用される投入データとITAメニューの紐づけ</a>
<a class="reference external" href="#ansible実行時に使用される投入データとitaメニューの紐づけ">125</a></p>
<p><a class="reference external" href="#ansible-legacy投入データ">8.1.1 Ansible-Legacy投入データ</a>
<a class="reference external" href="#ansible-legacy投入データ">126</a></p>
<p><a class="reference external" href="#ansible-pioneer投入データ">8.1.2 Ansible-Pioneer投入データ</a>
<a class="reference external" href="#ansible-pioneer投入データ">128</a></p>
<p><a class="reference external" href="#ansible-legacyrole投入データ">8.1.3 Ansible-LegacyRole投入データ</a>
<a class="reference external" href="#ansible-legacyrole投入データ">130</a></p>
<p><a class="reference external" href="#投入データを直接実行する方法">8.1.4 投入データを直接実行する方法</a>
<a class="reference external" href="#投入データを直接実行する方法">132</a></p>
<p><a class="reference external" href="#ansible実行時に作成される結果データ">8.2
Ansible実行時に作成される結果データ</a>
<a class="reference external" href="#ansible実行時に作成される結果データ">133</a></p>
<p><a class="reference external" href="#legacylegacyrole結果データに保存されるファイル一覧">8.2.1
Legacy/LegacyRole結果データに保存されるファイル一覧</a>
<a class="reference external" href="#legacylegacyrole結果データに保存されるファイル一覧">133</a></p>
<p><a class="reference external" href="#pioneer結果データに保存されるファイル一覧">8.2.2
Pioneer結果データに保存されるファイル一覧</a>
<a class="reference external" href="#pioneer結果データに保存されるファイル一覧">134</a></p>
<p><a class="reference external" href="#オプションパラメータ一覧">8.3 オプションパラメータ一覧</a>
<a class="reference external" href="#オプションパラメータ一覧">136</a></p>
<p><a class="reference external" href="#ansible-automation-controllerでita独自変数を利用する場合の留意事項">8.4 Ansible Automation
ControllerでITA独自変数を利用する場合の留意事項</a>
<a class="reference external" href="#ansible-automation-controllerでita独自変数を利用する場合の留意事項">138</a></p>
<p><a class="reference external" href="#実行時データ削除で削除されるデータリソース">8.5
実行時データ削除で削除されるデータリソース</a>
<a class="reference external" href="#実行時データ削除で削除されるデータリソース">140</a></p>
</section>
<section id="id2">
<h1><span class="section-number">9. </span>はじめに<a class="headerlink" href="#id2" title="この見出しへのパーマリンク">¶</a></h1>
<p>本書では、ITAの機能および操作方法について説明します。</p>
</section>
<section id="ansible-driver">
<h1><span class="section-number">10. </span>Ansible driver概要<a class="headerlink" href="#ansible-driver" title="この見出しへのパーマリンク">¶</a></h1>
<p>本章ではAnsible、Ansible Automation ControllerおよびAnsible
driverについて説明します。</p>
<section id="ansible-core">
<h2><span class="section-number">10.1. </span>Ansible Coreについて<a class="headerlink" href="#ansible-core" title="この見出しへのパーマリンク">¶</a></h2>
<blockquote>
<div><p>Ansible
Coreとは、多数の構築管理対象に対して、アプリーケーション/システムのデプロイ作業を容易にするPF構築自動化ツールです。</p>
<p>Ansible
Coreは、PlaybookというYAML形式のテキストファイルに定型処理をタスクとして記述し、それをAnsible
Coreに実行させることにより、さまざまな処理を実現できます。</p>
<p>タスクはモジュールと呼ばれる処理プログラムと紐付いており、さまざまな機器に対する制御を行うことができます。</p>
<p>Ansible Coreの詳細情報については、Ansible
Coreのマニュアルを参照してください。</p>
</div></blockquote>
</section>
<section id="ansible-automation-controller">
<h2><span class="section-number">10.2. </span>Ansible Automation Controllerについて<a class="headerlink" href="#ansible-automation-controller" title="この見出しへのパーマリンク">¶</a></h2>
<p>Ansible Automation
Controllerとは、PF構築自動化ツールであるAnsibleにアクセスコントロール、ジョブスケジューリング、タスクの可視化などの機能を拡張した管理プラットフォームです。</p>
<p>“プロジェクト”、”インベントリ”、”認証情報”の組合せで”ジョブテンプレート”を作成しAnsibleを実行できます。</p>
<p>複数の“ジョブテンプレート”を組み合せて”ワークフロージョブテンプレート”を作成することによって、より多彩な作業フローを表現することができます。</p>
<p>Ansible Automation Controllerの詳細情報については、Ansible Automation
Controllerのマニュアルを参照してください。</p>
<p>ITAで対応可能なAnsible Automation
Controllerのバージョンは、「システム構成／環境構築ガイド_Ansible-driver編」を参照してください。</p>
<p>最新のバージョンに対応した記法は使えないことがありますので、ご注意ください。</p>
</section>
<section id="id3">
<h2><span class="section-number">10.3. </span>Ansible driverについて<a class="headerlink" href="#id3" title="この見出しへのパーマリンク">¶</a></h2>
<p>Ansible
driverは、ITAシステムのオプションとして機能し、ITAシステムで登録した構築対象のサーバ・ストレージ・ネットワーク各機器に対し、Ansible
Core、Ansible Automation
Controllerのどちらを経由するかを選択し、実際の運用設定を自動的に行います。</p>
<ol class="arabic">
<li><div class="line-block">
<div class="line"><strong>Legacy モード</strong>
| Ansible標準の機能を用いて各種ホストへ設定を投入します。
| 構築コードを単体YAMLファイルとして登録し、作業パターンをその組み合わせで構成します。
| OS,NWの環境設定などの作業用に使われることを想定します。</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Legacy Role モード</strong>
| Legacyモードと同じく、Ansible標準の機能を用いて各種ホストへ設定を投入します。
| 構築コードをパッケージとして登録し、作業パターンをRoleの組み合わせで構成します。
| 製品部門などが提供するRoleパッケージを用いて、製品のインストール、環境構築などを行う際に使われることを想定します。</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><strong>Pioneer モード</strong>
| Ansibleに独自モジュールを追加し、対話形式による設定投入を可能とします。
| サーバ、ストレージ、ネットワークを問わず、Telnet, SSH
  でログイン可能なあらゆる機器に対応しています。対象機器と直接やり取りが必要となるため、相応のＩＴスキルが必要となります。</div>
</div>
</li>
</ol>
<blockquote>
<div><p>また、Ansible
driverは、Playbook中の変数を画面から設定することができます。詳細は本書「<em>2Ansible
driverでの変数取り扱い</em>」をご参照ください。</p>
</div></blockquote>
</section>
</section>
<section id="id4">
<h1><span class="section-number">11. </span>Ansible driverでの変数取り扱い<a class="headerlink" href="#id4" title="この見出しへのパーマリンク">¶</a></h1>
<section id="id5">
<h2><span class="section-number">11.1. </span>変数の種類<a class="headerlink" href="#id5" title="この見出しへのパーマリンク">¶</a></h2>
<p>Ansible
driverでは、Playbook中の変数の具体値をITAの設定画面から設定することができます。</p>
<blockquote>
<div><p><strong>※設定方法の詳細は、本書</strong> 「<a class="reference external" href="l">5.3.11
代入値管理</a>」<strong>を参照してください。</strong></p>
<p>Playbook中の変数で、ITAの変数として扱える変数は以下の8種類があります。</p>
</div></blockquote>
<p>表2.1変数の種類</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>種類</p></th>
<th class="head"><p>内容</p></th>
<th class="head"><p>Le
gacy</p></th>
<th class="head"><p>Pio
neer</p></th>
<th class="head"><p>Le
gacy</p>
<p>Role</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>通常変数</p></td>
<td><p>変数名に対し
て具体値を1つ定義できる変数です。</p>
<p>Playbook内の変数は {{△VAR_xxx△}}
で記述してください</p>
<p>△:半角スペース　xxx:
半角英数字とアンダースコア（ _ ）</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>e.g.)</p>
<p>VAR_users: root</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</td>
<td><p>○</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
</tr>
<tr class="row-odd"><td><p>複数具
体値変数</p></td>
<td><p>変数名に対し
て具体値を複数定義できる変数です。</p>
<p>Playbook内の変数は {{△VAR_xxx△}}
で記述してください。</p>
<p>△:半角スペース　xxx:
半角英数字とアンダースコア（ _ ）</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>e.g.)</p>
<p>VAR_users:</p>
<ul class="simple">
<li><p>root</p></li>
<li><p>mysql</p></li>
</ul>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</td>
<td><p>○</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
</tr>
<tr class="row-even"><td><p>多段変数</p></td>
<td><p>階層化された変数です。</p>
<p>Playbook内の変数は {{△VAR_xxx△}}
で記述してください。</p>
<p>△:半角スペース　xxx:
半角英数字とアンダースコア（ _ ）</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>e.g.)</p>
<p>VAR_users:</p>
<ul class="simple">
<li><p>user-name: alice</p></li>
</ul>
<p>authorized: password</p>
<p>メンバー変数名は
、下記の7文字を除くascii文字</p>
<div class="line-block">
<div class="line">(0x20～0x7e)が使用出来ます。</div>
<div class="line">　&quot; . [ ] ' \ :</div>
</div>
<p>尚、コーテーションで囲ま
ないと変数名の先頭に使用出来</p>
<p>ない文字がいくつかあります。
詳しくは、Ansibleドキュメント
Yaml sntaxを参照くだ<a class="reference external" href="https://docs.ansible.com/ansible/latest/reference_appendices/YAMLSyntax.html">Yaml
syntax</a>を参照下さい。</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
</td>
<td><p>×</p></td>
<td><p>×</p></td>
<td><p>○</p></td>
</tr>
<tr class="row-odd"><td><p>グロー
バル変数</p></td>
<td><p>「グローバル変数
」メニューから登録された変数です。</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
</tr>
<tr class="row-even"><td><p>ﾃﾝﾌﾟﾚｰﾄ
埋込変数</p></td>
<td><p>「テンプレート管理
」メニューから登録された変数です。</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
</tr>
<tr class="row-odd"><td><p>ファイル
埋込変数</p></td>
<td><p>「ファイル管理
」メニューから登録された変数です。</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>種類</p></th>
<th class="head"><p>内容</p></th>
<th class="head"><p>Le
ga
cy</p></th>
<th class="head"><p>P
i
o
n
e
e
r</p></th>
<th class="head"></th>
<th class="head"><p>Le
gacy</p>
<p>Role</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ITA
独自変数</p></td>
<td><p>ITA 独自で定義された変数です。</p>
<p>基本コンソールの機器
一覧の下記項目を変数として扱えます。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>項目名</p></th>
<th class="head"><p>変数名</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ホスト名</p></td>
<td><p>__log
<a href="#id251"><span class="problematic" id="id252">inhostname_</span></a>_</p></td>
</tr>
<tr class="row-odd"><td><p>プロトコル</p></td>
<td><p>__log
<a href="#id253"><span class="problematic" id="id254">inprotocol_</span></a>_</p></td>
</tr>
<tr class="row-even"><td><p>ロ
グインユーザID</p></td>
<td><p>_
_loginuser__</p></td>
</tr>
<tr class="row-odd"><td><p>ログ
インパスワード</p></td>
<td><p>__log
<a href="#id255"><span class="problematic" id="id256">inpassword_</span></a>_</p></td>
</tr>
</tbody>
</table>
<p><strong>変数名の前後の「
__」は半角アンダーバー2文字です。</strong></p>
<p>機器一
覧については、「<a href="#id257"><span class="problematic" id="id258">利用手順マニュアル_</span></a>
基本コンソール」を参照してください。</p>
<p>作業実行時の
オペレーションを変数として扱えます。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>項目名</p></th>
<th class="head"><p>変数名</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>オペレーション</p></td>
<td><p>_
_operation__</p></td>
</tr>
</tbody>
</table>
<p>設定値 : 実施予定日時「YYYY/MM/DD
HH:MM」
_オペレーションID:オペレーション名称</p>
<p>作業実行時のディレク
トリパスを下記の変数として扱えます。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>項目名</p></th>
<th class="head"><p>変数名</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>作業デ
ィレクトリパス</p></td>
<td><p>__w
<a href="#id259"><span class="problematic" id="id260">orkflowdir_</span></a>_</p></td>
</tr>
</tbody>
</table>
<p>Playbook内で作業ディレクトリパ
ス配下にファイルを作成することで、「
<em>作業実行</em>」の結果データでファイ
ルをダウンロードすることができます。</p>
<p>Symphony
実行時の各Movementで共有するディレク
トリパスを下記の変数として扱えます。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>項目名</p></th>
<th class="head"><p>変数名</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Symphony</p>
<p>作業
ディレク
トリパス</p>
</td>
<td><p>__symp
<a href="#id261"><span class="problematic" id="id262">hony_workflowdir_</span></a>_</p></td>
</tr>
</tbody>
</table>
<p>Playbook内でSympho
ny作業ディレクトリパス配下にファイル
を作成することで、各Movement間でファ
イルを共有することが出来ます。また、
ansible
dri
verの作業実行から実行した場合は__wor
kflowdir__と同じパスが設定されます。</p>
<p>Conductor
実行時の各Movementで共有するディレク
トリパスを下記の変数として扱えます。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>項目名</p></th>
<th class="head"><p>変数名</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>C
onductor</p>
<p>作業
ディレク
トリパス</p>
</td>
<td><p>__condu
<a href="#id263"><span class="problematic" id="id264">ctor_workflowdir_</span></a>_</p></td>
</tr>
</tbody>
</table>
<p>Playbook内でConductor作業デ
ィレクトリパス配下にファイルを作成す
ることで、各Movement間でファイルを共
有することが出来ます。また、ansible
dri
verの作業実行から実行した場合は__wor
kflowdir__と同じパスが設定されます。</p>
<p>Conductorの「Status file
branch」ノー
ドで参照するステータスファイルのファ
イルパスを下記の変数として扱えます。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>項目名</p></th>
<th class="head"><p>変数名</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ステー
タスファ
イルパス</p></td>
<td><p>__movement
_status_filepath__</p></td>
</tr>
</tbody>
</table>
<p>Playbook内で
作業ディレクトリパス配下にステータス
ファイルを作成することでができます。</p>
<p>収集機能の各ファ
イルパスを下記の変数として扱えます。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>項目名</p></th>
<th class="head"><p>変数名</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>作業デ
ィレクト
リ（in）
の「_pa
rameters
」のパス</p></td>
<td><p>__parame
<a href="#id265"><span class="problematic" id="id266">ters_dir_for_epc_</span></a>_</p></td>
</tr>
<tr class="row-odd"><td><p>作
業ディレ
クトリ（
in）の「
_paramet
ers_file
」のパス</p></td>
<td><p>__parameters_
<a href="#id267"><span class="problematic" id="id268">file_dir_for_epc_</span></a>_</p></td>
</tr>
<tr class="row-even"><td><p>作業
結果ディ
レクトリ
（out）
の「_pa
rameters
」のパス</p></td>
<td><p>__parameter_dir__</p></td>
</tr>
<tr class="row-odd"><td><p>作業結果
ディレク
トリ（o
ut）の「
_paramet
ers_file
」のパス</p></td>
<td><p>__par
<a href="#id269"><span class="problematic" id="id270">ameters_file_dir_</span></a>_</p></td>
</tr>
</tbody>
</table>
<p>「_parameters」
：
ソースファイル（パラメータ）格納先用</p>
<div class="line-block">
<div class="line">「_parameter</div>
</div>
<p>s_file」：収集したファイルの格納先用
| ※パラメータの対象がファイルア
ップロードカラムの場合のファイル配置
| 収集機能の詳細
については、「ITA_利用手順マニュアル</p>
<blockquote>
<div><p>収集機能」を参照して下さい。</p>
</div></blockquote>
</td>
<td><p>○</p></td>
<td></td>
<td><p>○</p></td>
<td><p>○</p></td>
</tr>
<tr class="row-odd"><td><p>読替変数</p></td>
<td><p>Defaults変数定義ファイルまたは ITA
readmeに定義さ
れている「VAR_×××」形式以外の変数を
ITA
で扱う場合の変数「LCA_×××」です。</p>
<p>詳細は「 6.5読替表（Ansible-Legacy
Roleのみ）の記述」を参照して下さい。</p>
</td>
<td><p>×</p></td>
<td></td>
<td><p>×</p></td>
<td><p>○</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id6">
<h2><span class="section-number">11.2. </span>変数の抜出および具体値登録<a class="headerlink" href="#id6" title="この見出しへのパーマリンク">¶</a></h2>
<blockquote>
<div><p>各モードとも、ITAにアップロードしたPlaybook等の資材から変数を抜出し、各メニューから具体値を登録できます。各メニューから登録した変数の具体値は、作業実行時にホスト変数ファイルに出力されます。</p>
</div></blockquote>
<p>変数の抜出方法は以下のとおりです。</p>
<ol class="arabic">
<li><div class="line-block">
<div class="line"><strong>Ansible-Legacy</strong>
| 「Playbook素材集
  (本書：<em>5.3.3Playbook素材集（Ansible-Legacyのみ）</em>)」でアップロードしたPlaybookより、以下の書式の変数定義を抜出します。</div>
</div>
</li>
</ol>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>書式</p></th>
<th class="head"><p>具体値の設定</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>{{△VAR_xxx△}}</p>
<p>{{△VAR_xxx△|△ﾌｨﾙﾀｰ△}}</p>
</td>
<td><p>具体値の登録は「<a class="reference external" href="#代入値自動登録設定">5.3.9
代入
値自動登録設定</a>」
や「5.3.11代入値管理」メニューより行います。
具体値の登録の仕
方で通常変数か複数具体値変数かを決定します。</p></td>
</tr>
<tr class="row-odd"><td><p>{{△GBL_xxx△}}
{{△GBL_xxx△|△ﾌｨﾙﾀｰ△}}</p></td>
<td><p>具体値の登録は「5.2
.3グローバル変数管理」メニューより行います。</p></td>
</tr>
<tr class="row-even"><td><p>{{△TPF_xxx△}}
{{△TPF_xxx△|△ﾌｨﾙﾀｰ△}}</p></td>
<td><p>具体値の登録は「5
.2.4テンプレート管理」メニューより行います。</p></td>
</tr>
<tr class="row-odd"><td><p>{{△CPF_xxx△}}
{{△CPF_xxx△|△ﾌｨﾙﾀｰ△}}</p></td>
<td><p>具体値の登録は
「5.2.5ファイル管理」メニューより行います。</p></td>
</tr>
</tbody>
</table>
<p>※ △:半角スペース　xxx: 半角英数字とアンダースコア（ _ ）</p>
<ol class="arabic" start="2">
<li><div class="line-block">
<div class="line"><strong>Ansible-Pioneer</strong>
| 「対話ファイル素材
  (本書：<em>5.3.6対話ファイル素材集（Ansible-Pioneerのみ）</em>」でアップロードした対話ファイルより、以下の書式の変数定義を抜出します。</div>
</div>
</li>
</ol>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>書式</p></th>
<th class="head"><p>具体値の設定</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>{{△VAR_xxx△}}</p></td>
<td><p>具体値の登録は「<a class="reference external" href="#代入値自動登録設定">5.3.9
代入
値自動登録設定</a>」
や「5.3.11代入値管理」メニューより行います。
具体値の登録の仕
方で通常変数か複数具体値変数かを決定します。</p></td>
</tr>
<tr class="row-odd"><td><p>{{△GBL_xxx△}}</p></td>
<td><p>具体値の登録は「5.2
.3グローバル変数管理」メニューより行います。</p></td>
</tr>
<tr class="row-even"><td><p>{{△TPF_xxx△}}</p></td>
<td><p>具体値の登録は「5
.2.4テンプレート管理」メニューより行います。</p></td>
</tr>
<tr class="row-odd"><td><p>{{△CPF_xxx△}}</p></td>
<td><p>具体値の登録は
「5.2.5ファイル管理」メニューより行います。</p></td>
</tr>
</tbody>
</table>
<ol class="arabic" start="3">
<li><div class="line-block">
<div class="line"><strong>Ansible-Legacy Role</strong>
| 「ロールパッケージ管理
  (本書：<em>5.3.4ロールパッケージ管理（Ansible-Legacy
  Roleのみ）</em>」でアップロードしたロールパッケージ内のdefaults変数定義ファイルより変数定義の抜出を行います。
| 詳しくは「ロールパッケージの記述(本書：<em>5.3.4ロールパッケージ管理（Ansible-Legacy
  Roleのみ）</em>」を参照してください。</div>
</div>
<p>また、読替表を作成することでdefaults変数定義ファイルまたはITA
readmeに定義されている「VAR_xxx」以外の変数をITAで扱うことが出来ます。詳しくは「<a class="reference external" href="#読替表ansible-legacy-roleのみの記述">6.7
読替表の記述</a>」を参照して下さい。</p>
<p>また、アップロードしたロールパッケージ内のplaybookより、以下の書式の変数定義を抜出します。</p>
</li>
</ol>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>書式</p></th>
<th class="head"><p>ロールパ
ッケージ
内のディ
レクトリ</p></th>
<th class="head"></th>
<th class="head"><p>具体値の設定</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
<td><p>(4) *
<em>tasks*</em></p>
<p>(
5) <strong>tem
plates</strong></p>
<p>(6) <strong>ha
ndlers</strong></p>
<p><strong>meta</strong></p>
</td>
<td colspan="2"><ul>
<li><div class="line-block">
<div class="line"><br /></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><br /></div>
</div>
</li>
</ul>
<p>そ |
の |
他 |
* |
* |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><p>{{△GBL_xxx△}}
{{△GBL_xxx△|△ﾌｨﾙﾀｰ△}}</p></td>
<td><p><strong>〇</strong></p></td>
<td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><p>具体値
の登録は「5.2.3グローバル変数
管理」メニューより行います。</p></td>
</tr>
<tr class="row-even"><td><p>{{△TPF_xxx△}}
{{△TPF_xxx△|△ﾌｨﾙﾀｰ△}}</p></td>
<td></td>
<td></td>
<td><p>具体
値の登録は「5.2.4テンプレート
管理」メニューより行います。</p></td>
</tr>
<tr class="row-odd"><td><p>{{△CPF_xxx△}}
{{△CPF_xxx△|△ﾌｨﾙﾀｰ△}}</p></td>
<td></td>
<td></td>
<td><p>具体値の登録は「5.2.5ファイル
管理」メニューより行います。</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>〇：変数定義抜出対象のplaybook　 ×：変数定義抜出対象外のplaybook</p></li>
</ul>
</section>
<section id="id7">
<h2><span class="section-number">11.3. </span>代入値登録による変数の扱い<a class="headerlink" href="#id7" title="この見出しへのパーマリンク">¶</a></h2>
<p>Playbookで定義した変数の値は代入値登録機能により上書きすることができます。</p>
<p>Playbook中の変数と、代入値管理機能で登録した変数の値の関係を、以下の図に示します。</p>
<p>代入値管理機能で登録した変数の値は、各ホスト用に変数定義ファイル(host_vars)に出力され、</p>
<div class="line-block">
<div class="line">Ansibleで元のPlaybookと変数定義用ファイルを入力として各ホストに実行されます。</div>
<div class="line">この結果、変数の値の優先順位は以下のようになります。</div>
</div>
<ol class="arabic">
<li><p>代入値管理機能で登録した値</p></li>
<li><div class="line-block">
<div class="line">Playbook中の変数に指定した値</div>
<div class="line">詳細は 「5.3.11<a class="reference external" href="#代入値管理">代入値管理</a>」
を参照してください。</div>
</div>
</li>
</ol>
</section>
</section>
<section id="id8">
<h1><span class="section-number">12. </span>Ansible driver コンソールメニュー構成<a class="headerlink" href="#id8" title="この見出しへのパーマリンク">¶</a></h1>
<p>本章では、ITAコンソールのメニュー構成について説明します</p>
<section id="id9">
<h2><span class="section-number">12.1. </span>メニュー/画面一覧<a class="headerlink" href="#id9" title="この見出しへのパーマリンク">¶</a></h2>
<ol class="arabic simple">
<li><p>ITA<strong>基本コンソールのメニュー</strong></p></li>
</ol>
<blockquote>
<div><p>Ansible
driverで利用するITA基本コンソールのメニュー一覧を以下に記述します。</p>
</div></blockquote>
<p>表 3.1‑1基本コンソール メニュー/画面一覧</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>N
o</p></th>
<th class="head"><p>メニュー
グループ</p></th>
<th class="head"><p>メ
ニュー・画面</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>ITA
基本コ
ンソール</p></td>
<td><p>機器一覧</p></td>
<td><p>作業対象システム一覧をメ
ンテナンス(閲覧/登録/更新/廃止)します</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td></td>
<td><p>紐付
対象メニュー</p></td>
<td><p>代入値
自動登録設定と連携するCMDBを管理します</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td></td>
<td><p>投入オ
ペレーション</p>
<p>一覧</p>
</td>
<td><p>オペレーション一覧をメン
テナンス(閲覧/登録/更新/廃止)できます</p></td>
</tr>
</tbody>
</table>
<ol class="arabic simple" start="2">
<li><p><strong>Ansible共通コンソールのメニュー</strong></p></li>
</ol>
<blockquote>
<div><p>Ansible共通コンソールのメニュー一覧を以下に記述します。</p>
</div></blockquote>
<p>表 3.1‑2共通コンソール メニュー/画面一覧</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>N
o</p></th>
<th class="head"><p>メニュー
グループ</p></th>
<th class="head"><p>メ
ニュー・画面</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Ansible</p>
<p>共通コ
ンソール</p>
</td>
<td><p>インター
フェース情報</p></td>
<td><p>Ansible Core、Ansible Automation
Controllerサーバのどちらを実行エン
ジンとし構築作業をするか選択をします。</p>
<p>ITAシステム・Ansible
driverサーバと実行
エンジンのサーバが共有するディレクトリ
のパスおよび、実行エンジンのサーバへの
接続インターフェース情報を管理します。</p>
</td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td></td>
<td><p>Ansible
Automation
Controll
erホスト一覧</p></td>
<td><p>Ansible Automation
ControllerのRestAPI実行
に必要な情報、および構築資材をAnsible
Automation
Controllerにファイル
転送するために必要な情報を管理します。</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td></td>
<td><p>グロー
バル変数管理</p></td>
<td><p>Playbookや対話ファ
イルなどで共通利用する変数（以降、グロ
ーバル変数と称す）と具体値を管理します</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td></td>
<td><p>テン
プレート管理</p></td>
<td><p>Playbook内のtemp
lateモジュールでなどで使用するテンプレ
ートファイルと埋め込み変数を管理します</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td></td>
<td><p>ファイル管理</p></td>
<td><p>Playbook内の各モジュールで使用する
素材ファイルと埋め込み変数を管理します</p></td>
</tr>
</tbody>
</table>
<ol class="arabic simple" start="4">
<li><p><strong>Ansibleコンソールのメニュー</strong></p></li>
</ol>
<blockquote>
<div><p>各Ansibleコンソールに対応するメニュー一覧を以下に記述します。</p>
</div></blockquote>
<p>表 3.1‑3 Ansible driverコンソール メニュー/画面一覧</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>N
o</p></th>
<th class="head" colspan="2"><p>メ |
ニ |
ュ |
ー |
グ |
ル |
ー |
プ |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</th>
<th class="head"></th>
<th class="head"><p>メ
ニュー・画面</p></th>
<th class="head" colspan="2"><blockquote>
<div><div class="line-block">
<div class="line">説明</div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
<p>非 |
表 |
示 |
メ |
ニ |
ュ |
ー |
※ |
1 |</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
<td colspan="2"><ul>
<li><div class="line-block">
<div class="line"><br /></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><br /></div>
</div>
</li>
</ul>
<p>A |
n |
s |
i |
b |
l |
e |
コ |
ン |
ソ |
ー |
ル |
* |
* |</p>
</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>L
e
g
a
c
y</p></td>
<td><p>Le
ga
cy</p>
<p>Ro
le</p>
</td>
<td><p>P
i
o
n
e
e
r</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td></td>
<td></td>
<td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><p>OS種別</p></td>
<td></td>
<td><p>Pioneerより操作対象
となる機器のOS種別を管理します。</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><p>Movement一覧</p></td>
<td></td>
<td><p>Symphonyに登録
するMovementの一覧を管理します。</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td></td>
<td></td>
<td><p>P
laybook素材集</p></td>
<td></td>
<td><p>Playbookファイルを管理します。</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td></td>
<td><p>ロールパ
ッケージ管理</p></td>
<td></td>
<td><p>ロールパッケージを管理します。</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td></td>
<td></td>
<td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><p>対
話種別リスト</p></td>
<td></td>
<td><p>同一目的の対話ファイルを対話種別
としてまとめる種別を管理します。</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td></td>
<td></td>
<td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><p>対話フ
ァイル素材集</p></td>
<td></td>
<td><p>対話種別に紐づ
けるOS種別とITAシステム独自フォー
マットの作業手順ファイル(以降、対
話ファイルと称す。)を管理します。</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><p>Mov
ement-Playboo
k紐付（Moveme
nt-対話種別紐
付、Movement
-ロール紐付）</p></td>
<td></td>
<td><p>Movementとプレイブ
ック素材の関連付けを管理します。</p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td></td>
<td><p>変
数ネスト管理</p></td>
<td></td>
<td><p>多段
変数が繰返配列で構成されている場
合の最大繰返配列数を管理します。</p></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><p>代入値
自動登録設定</p></td>
<td></td>
<td><p>CMD
Bのメニューに登録されているオぺレ
ーションとホスト毎の項目値を紐付
けるMovementと変数を管理します。</p></td>
</tr>
<tr class="row-odd"><td><p>1
0</p></td>
<td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><p>作
業対象ホスト</p></td>
<td></td>
<td><p>Movem
entで使用するホストを管理します。</p></td>
</tr>
<tr class="row-even"><td><p>1
1</p></td>
<td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><p>代入値管理</p></td>
<td></td>
<td><p>変数の代入値を管理します。</p></td>
</tr>
<tr class="row-odd"><td><p>1
2</p></td>
<td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><p>作業実行</p></td>
<td></td>
<td><p>作業実行するMovementとオペレー
ションを選択し実行を指示します。</p></td>
</tr>
<tr class="row-even"><td><p>1
3</p></td>
<td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><p>作業状態確認</p></td>
<td></td>
<td><p>作業実行状態を表示します。</p></td>
</tr>
<tr class="row-odd"><td><p>1
4</p></td>
<td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><p>作業管理</p></td>
<td></td>
<td><p>作業実行履歴を管理します。</p></td>
</tr>
<tr class="row-even"><td><p>1
5</p></td>
<td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><p>変数名一覧</p></td>
<td colspan="2"><dl>
<dt>〇 | | Legacy:</dt><dd><div class="line-block">
<div class="line">| Playbook素</div>
<div class="line">材集にアップロードしたPlaybookで</div>
<div class="line">使用している変数名を管理します。</div>
<div class="line">| pioneer:</div>
<div class="line"><br /></div>
<div class="line">対話ファイル素材集</div>
<div class="line">にアップロードした対話ファイルで</div>
<div class="line">使用している変数名を管理します。</div>
<div class="line"><br /></div>
<div class="line">Legacy:-role:</div>
<div class="line"><br /></div>
<div class="line">ロールパッケージ管理に</div>
<div class="line">アップロードしたロールパッケージ</div>
<div class="line">ファイル「zip」内のデフォルト変数</div>
<div class="line">定義ファイルやITAreadmeファイルで</div>
<div class="line">定義している変数名を管理します。</div>
</div>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>1
6</p></td>
<td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><p>Movemen
t変数紐付管理</p></td>
<td colspan="2"><dl>
<dt>〇 | Movemen</dt><dd><div class="line-block">
<div class="line">tで使用している変数を管理します。</div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>1
7</p></td>
<td></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td></td>
<td><p>ロール名管理</p></td>
<td colspan="2"><dl>
<dt>〇 | ロール</dt><dd><div class="line-block">
<div class="line">パッケージ管理にアップロードした</div>
<div class="line">ロールパッケージファイル「zip」内</div>
<div class="line">に登録しているロールを管理します</div>
</div>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>1
8</p></td>
<td></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td></td>
<td><p>ロー
ル変数名管理</p></td>
<td colspan="2"><dl>
<dt>〇 | ロールパッケージ管理にアップロー</dt><dd><div class="line-block">
<div class="line">ドしたロールパッケージファイル「</div>
<div class="line">zip」内のデフォルト変数定義ファイ</div>
<div class="line">ルやITAreadmeファイルで定義してい</div>
<div class="line">る変数名をロール毎に管理します。</div>
</div>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>1
9</p></td>
<td></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td></td>
<td><p>変
数具体値管理</p></td>
<td colspan="2"><dl>
<dt>〇 | ロールパッケージ管理にアップ</dt><dd><div class="line-block">
<div class="line">ロードしたロールパッケージファイ</div>
<div class="line">ル「zip」内のデフォルト変数定義フ</div>
<div class="line">ァイルやITAreadmeファイルで定義し</div>
<div class="line">ている変数の具体値を管理します。</div>
</div>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>2
0</p></td>
<td></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td></td>
<td><p>メン
バー変数管理</p></td>
<td colspan="2"><dl>
<dt>〇 | ロール</dt><dd><div class="line-block">
<div class="line">パッケージ管理にアップロードした</div>
<div class="line">ロールパッケージファイル「zip」内</div>
<div class="line">のデフォルト変数定義ファイルやIT</div>
<div class="line">Areadmeファイルで定義している多段</div>
<div class="line">変数のメンバー変数を管理します。</div>
</div>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>2
1</p></td>
<td></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td></td>
<td><p>多段変数
メンバー管理</p></td>
<td colspan="2"><dl>
<dt>〇 | ロールパッケージ管理にアップロ</dt><dd><div class="line-block">
<div class="line">ードしたロールパッケージファイル</div>
<div class="line">「zip」内のデフォルト変数定義ファ</div>
<div class="line">イルやITAreadmeファイルで定義して</div>
<div class="line">いる多段変数の構造を管理します。</div>
</div>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>2
2</p></td>
<td></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td></td>
<td><p>多段変数配
列組合せ管理</p></td>
<td colspan="2"><dl>
<dt>〇 | ロー</dt><dd><div class="line-block">
<div class="line">ルパッケージ管理にアップロードし</div>
<div class="line">たロールパッケージファイル「zip」</div>
<div class="line">内のデフォルト変数定義ファイルや</div>
<div class="line">ITAreadmeファイルで定義している多</div>
<div class="line">段変数の繰り返し数を管理します。</div>
</div>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>2
3</p></td>
<td></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td></td>
<td><p>読替変数一覧</p></td>
<td colspan="2"><dl>
<dt>〇 | ロールパッケージ管理に</dt><dd><div class="line-block">
<div class="line">アップロードしたロールパッケージ</div>
<div class="line">ファイル「zip」内の読替表ファイル</div>
<div class="line">で定義している変数を管理します。</div>
</div>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p>※1非表示メニューは、バックヤード機能でデータの登録・更新を行うメニューです。</p>
<blockquote>
<div><p>Ansible
Driver機能をインストールした状態では表示されないメニューに設定されています。</p>
<p>非表示メニューを表示するには、「管理コンソール/ロール・メニュー紐付管理」で各メニューの復活処理を行います。詳細は「利用手順マニュアル_管理コンソール」
を参照してください。</p>
<p>尚、<em>データの更新を行うとバックヤード機能が正しく動作しなくなります。データの更新はしないで下さい。</em></p>
</div></blockquote>
</section>
</section>
<section id="id10">
<h1><span class="section-number">13. </span>Ansible driver利用手順<a class="headerlink" href="#id10" title="この見出しへのパーマリンク">¶</a></h1>
<p>各Ansibleコンソールの利用手順について説明します</p>
<section id="id11">
<h2><span class="section-number">13.1. </span>作業フロー<a class="headerlink" href="#id11" title="この見出しへのパーマリンク">¶</a></h2>
<blockquote>
<div><p>各Ansibleコンソールにおける標準的な作業フローは以下のとおりです。</p>
<p>各作業の詳細は次項に記載しています。</p>
<p>ITA基本コンソールの利用方法は、「利用手順マニュアル_基本コンソール」を参照してください。</p>
</div></blockquote>
<section id="ansible-legacy">
<h3>Ansible-Legacy作業フロー<a class="headerlink" href="#ansible-legacy" title="この見出しへのパーマリンク">¶</a></h3>
<p>以下は、Ansible-Legacyで作業を実行するまでの流れです。</p>
<ul class="simple">
<li><p><strong>作業フロー詳細と参照先</strong></p></li>
</ul>
<ol class="arabic">
<li><div class="line-block">
<div class="line"><a href="#id12"><span class="problematic" id="id13">**</span></a>機器情報にAnsible利用情報を設定
<a href="#id14"><span class="problematic" id="id15">**</span></a>ITA基本コンソールの機器一覧の画面から、各機器に対してAnsible利用情報を設定します。</div>
<div class="line">詳細は <em>5.1.1機器一覧</em> を参照してください。</div>
</div>
</li>
<li><p><strong>投入オペレーション名の登録</strong></p></li>
</ol>
<p>ITA基本コンソールのオペレーション一覧の画面から、作業用の投入オペレーション名を登録します。</p>
<p>詳細は<a class="reference external" href="l">5.1.2 オペレーション一覧</a>を参照してください。</p>
<ol class="arabic simple" start="3">
<li><p><strong>インターフェース情報の登録</strong></p></li>
</ol>
<p>Ansible共通コンソールのインターフェース情報の画面から、Ansible
Core、Ansible Automation
Controllerサーバのどちらを実行エンジンにするかを選択し、実行エンジンのサーバへの接続情報の登録します。</p>
<p>詳細は<a class="reference external" href="#インターフェース情報">5.2.1インターフェース情報</a>を参照してください。</p>
<ol class="arabic" start="4">
<li><div class="line-block">
<div class="line"><a href="#id16"><span class="problematic" id="id17">**</span></a>作業パターン(Movement)の登録
<a href="#id18"><span class="problematic" id="id19">**</span></a>Ansible-LegacyコンソールのMovement一覧の画面から、作業用のMovementを登録します。</div>
<div class="line">詳細は <em>5.3.2Movement一覧</em> を参照してください。</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><a href="#id20"><span class="problematic" id="id21">**</span></a>Playbookの登録
<a href="#id22"><span class="problematic" id="id23">**</span></a>Ansible-LegacyコンソールのPlaybook素材集の画面から、作業で使用するPlaybookを登録します。</div>
<div class="line">詳細は <em>5.3.3Playbook素材集（Ansible-Legacyのみ）</em>
を参照してください。</div>
</div>
</li>
<li><p><strong>テンプレートファイルの登録（必要に応じて実施）</strong></p></li>
</ol>
<p>Ansible共通コンソールのテンプレート管理の画面から、Playbook内のtemplateモジュールなどで使用しているtemplateファイル(src)とtemplate埋め込み変数の登録／更新／廃止を行います。</p>
<p>詳細は5.2.4<a class="reference external" href="#テンプレート管理">テンプレート管理</a>を参照してください。</p>
<ol class="arabic simple" start="7">
<li><p><a href="#id24"><span class="problematic" id="id25">**</span></a>素材ファイルの登録 （必要に応じて実施）
<a href="#id26"><span class="problematic" id="id27">**</span></a>Ansible共通コンソールのファイル管理の画面から、作業対象サーバに配置するファイルを登録します。</p></li>
</ol>
<p>詳細は 5.2.5<a class="reference external" href="#ファイル管理">ファイル管理</a> を参照してください。</p>
<ol class="arabic simple" start="8">
<li><p><a href="#id28"><span class="problematic" id="id29">**</span></a>Movementにプレイブック素材を指定
<a href="#id30"><span class="problematic" id="id31">**</span></a>Ansible-LegacyコンソールのMovement-Playbook紐付（Movement-対話種別紐付、Movement-ロール紐付）の画面から、登録したMovementにプレイブック素材を指定します。</p></li>
</ol>
<p>詳細は <a class="reference external" href="#movement-playbook紐付movement-対話種別紐付movement-ロール紐付">5.3.7
Movement-Playbook紐付（Movement-対話種別紐付、Movement-ロール紐付）</a>
を参照してください。</p>
<ol class="arabic" start="9">
<li><div class="line-block">
<div class="line"><a href="#id32"><span class="problematic" id="id33">**</span></a>作業対象ホストの指定
<a href="#id34"><span class="problematic" id="id35">**</span></a>Ansible-Legacyコンソールの作業対象ホストの画面から、作業対象ホストを指定します。</div>
<div class="line">詳細は 5.3.10<em>作業対象ホスト</em> を参照してください。</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><a href="#id36"><span class="problematic" id="id37">**</span></a>変数値の設定（必要に応じて実施）
<a href="#id38"><span class="problematic" id="id39">**</span></a>Ansible-Legacyコンソールの代入値管理の画面から、Movementに登録したPlaybook内で定義した変数の値を設定します。変数を利用していない場合、設定は不要です。</div>
<div class="line">詳細は 5.3.11<a class="reference external" href="#代入値管理">代入値管理</a> を参照してください。</div>
</div>
</li>
<li><p><a href="#id40"><span class="problematic" id="id41">**</span></a>作業実行
<a href="#id42"><span class="problematic" id="id43">**</span></a>Ansible-Legacyコンソールの作業実行の画面から、実行日時、投入オペレーションを選択して設定して処理の実行を指示します。</p></li>
</ol>
<p>詳細は <em>5.3.14作業実行</em> を参照してください。</p>
<ol class="arabic" start="12">
<li><div class="line-block">
<div class="line"><a href="#id44"><span class="problematic" id="id45">**</span></a>作業状態確認
<a href="#id46"><span class="problematic" id="id47">**</span></a>Ansible-Legacyコンソールの作業状態確認の画面では、実行した作業の状態がリアルタイムで表示されます。また、作業の緊急停止や、実行ログ、エラーログを監視することができます。</div>
<div class="line">詳細は <em>5.3.12作業状態確認</em> を参照してください。</div>
</div>
</li>
<li><p><a href="#id48"><span class="problematic" id="id49">**</span></a>作業履歴確認
<a href="#id50"><span class="problematic" id="id51">**</span></a>Ansible-Legacyコンソールの作業管理の画面では、実行した作業の一覧が表示され履歴が確認できます。</p></li>
</ol>
<p>詳細は <em>5.3.13作業管理</em> を参照してください。</p>
</section>
<section id="ansible-legacy-role">
<h3>Ansible-Legacy Role作業フロー<a class="headerlink" href="#ansible-legacy-role" title="この見出しへのパーマリンク">¶</a></h3>
<p>以下は、Ansible-Legacy Roleで作業を実行するまでの流れです。</p>
<section id="id54">
<h4><a href="#id52"><span class="problematic" id="id53">**</span></a><a class="headerlink" href="#id54" title="この見出しへのパーマリンク">¶</a></h4>
<ul class="simple">
<li><p><strong>作業フロー詳細と参照先</strong></p></li>
</ul>
<ol class="arabic">
<li><div class="line-block">
<div class="line"><a href="#id55"><span class="problematic" id="id56">**</span></a>機器情報にAnsible利用情報を設定
<a href="#id57"><span class="problematic" id="id58">**</span></a>ITA基本コンソールの機器一覧の画面から、各機器に対してAnsible利用情報を設定します。</div>
<div class="line">詳細は <em>5.1.1機器一覧</em> を参照してください。</div>
</div>
</li>
<li><p><strong>投入オペレーション名の登録</strong></p></li>
</ol>
<p>ITA基本コンソールのオペレーション一覧の画面から、作業用の投入オペレーション名を登録します。</p>
<p>詳細は <a class="reference external" href="#オペレーション一覧">5.1.2 オペレーション一覧</a>
を参照してください。</p>
<ol class="arabic simple" start="3">
<li><p><strong>インターフェース情報の登録</strong></p></li>
</ol>
<p>Ansible共通コンソールのインターフェース情報の画面から、Ansible
Core、Ansible Automation
Controllerサーバのどちらを実行エンジンにするかを選択し、実行エンジンのサーバへの接続情報を登録します。</p>
<p>詳細は<a class="reference external" href="l">5.2.1インターフェース情報</a>を参照してください。</p>
<ol class="arabic" start="4">
<li><div class="line-block">
<div class="line"><a href="#id59"><span class="problematic" id="id60">**</span></a>作業パターン(Movement)の登録
<a href="#id61"><span class="problematic" id="id62">**</span></a>Ansible-Legacy
RoleコンソールのMovement一覧の画面から、作業用のMovementを登録します。</div>
<div class="line">詳細は <em>5.3.2Movement一覧</em> を参照してください。</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><a href="#id63"><span class="problematic" id="id64">**</span></a>ロールパッケージの登録
<a href="#id65"><span class="problematic" id="id66">**</span></a>Ansible-Legacy
Roleコンソールのロールパッケージ管理の画面から、作業で使用するロールパッケージを登録します。</div>
<div class="line">詳細は <em>5.3.4ロールパッケージ管理（Ansible-Legacy Roleのみ）</em>
を参照してください。</div>
</div>
</li>
<li><p><strong>テンプレートファイルの登録（必要に応じて実施）</strong></p></li>
</ol>
<p>Ansible共通コンソールのテンプレート管理の画面から、ロールパッケージのtemplateモジュールなどで使用しているtemplateファイル(src)とtemplate埋め込み変数の登録／更新／廃止を行います。</p>
<p>詳細は5.2.4
<a class="reference external" href="#テンプレート管理">テンプレート管理</a>を参照してください。</p>
<ol class="arabic simple" start="7">
<li><p><strong>素材ファイルの登録 （必要に応じて実施）</strong></p></li>
</ol>
<p>Ansible共通コンソールのファイル管理の画面から、作業対象サーバに配置するファイルを登録します。</p>
<p>詳細は 5.2.5<a class="reference external" href="#ファイル管理">ファイル管理</a> を参照してください。</p>
<ol class="arabic simple" start="8">
<li><p><strong>Movementにロールパッケージを指定</strong></p></li>
</ol>
<p>Ansible-Legacy
RoleコンソールのMovement-Playbook紐付（Movement-対話種別紐付、Movement-ロール紐付）の画面から、登録したMovementにプレイブック素材を指定します。</p>
<p>詳細は <a class="reference external" href="#movement-playbook紐付movement-対話種別紐付movement-ロール紐付">5.3.7
Movement-Playbook紐付（Movement-対話種別紐付、Movement-ロール紐付）</a>
を参照してください。</p>
<ol class="arabic simple" start="9">
<li><p><a href="#id67"><span class="problematic" id="id68">**</span></a>多段変数の最大繰返数を指定
<a href="#id69"><span class="problematic" id="id70">**</span></a>Ansible-Legacy
Roleコンソールの多段変数最大繰返管理の画面から、多段変数で配列定義されているメンバー変数の配列の最大繰返数を指定します。</p></li>
</ol>
<p>詳細は <em>5.3.8変数ネスト管理（Ansible-Legacy Roleのみ）</em>
を参照してください。</p>
<ol class="arabic" start="10">
<li><div class="line-block">
<div class="line"><a href="#id71"><span class="problematic" id="id72">**</span></a>作業対象ホストの指定
<a href="#id73"><span class="problematic" id="id74">**</span></a>Ansible-Legacy
Roleコンソールの作業対象ホストの画面から、作業対象ホストを指定します。</div>
<div class="line">詳細は <em>5.3.10作業対象ホスト</em> を参照してください。</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><a href="#id75"><span class="problematic" id="id76">**</span></a>変数値の設定
<a href="#id77"><span class="problematic" id="id78">**</span></a>Ansible-Legacy
Roleコンソールの代入値管理の画面から、Movementに登録したPlaybook内で定義した変数の値を設定します。変数を利用していない場合、設定は不要です。</div>
<div class="line">詳細は 5.3.11<a class="reference external" href="#代入値管理">代入値管理</a> を参照してください。</div>
</div>
</li>
<li><p><a href="#id79"><span class="problematic" id="id80">**</span></a>作業実行
<a href="#id81"><span class="problematic" id="id82">**</span></a>Ansible-Legacy
Roleコンソールの作業実行の画面から、実行日時、投入オペレーションを選択して設定して処理の実行を指示します。</p></li>
</ol>
<p>詳細は <em>5.3.14作業実行</em> を参照してください。</p>
<ol class="arabic" start="13">
<li><div class="line-block">
<div class="line"><a href="#id83"><span class="problematic" id="id84">**</span></a>作業状態確認
<a href="#id85"><span class="problematic" id="id86">**</span></a>Ansible-Legacy
Roleコンソールの作業状態確認の画面から、実行した作業の状態がリアルタイムで表示されます。また、作業の緊急停止や、実行ログ、エラーログを監視することができます。</div>
<div class="line">詳細は <em>5.3.12作業状態確認</em> を参照してください。</div>
</div>
</li>
<li><p><a href="#id87"><span class="problematic" id="id88">**</span></a>作業履歴確認
<a href="#id89"><span class="problematic" id="id90">**</span></a>Ansible-Legacy
Roleコンソールの作業管理の画面から、実行した作業の一覧が表示され履歴が確認できます。</p></li>
</ol>
<p>詳細は <em>5.3.13作業管理</em> を参照してください。</p>
</section>
</section>
<section id="ansible-pioneer">
<h3>Ansible-Pioneer作業フロー<a class="headerlink" href="#ansible-pioneer" title="この見出しへのパーマリンク">¶</a></h3>
<p>以下は、Ansible-Pioneerで作業を実行するまでの流れです。</p>
<ul class="simple">
<li><p><strong>作業フロー詳細と参照先</strong></p></li>
</ul>
<ol class="arabic simple">
<li><p><strong>OS種別の登録</strong></p></li>
</ol>
<p>Pioneerより操作対象となる機器のOS種別を設定します。</p>
<ol class="arabic" start="2">
<li><div class="line-block">
<div class="line"><a href="#id91"><span class="problematic" id="id92">**</span></a>機器情報にAnsible利用情報を設定
<a href="#id93"><span class="problematic" id="id94">**</span></a>ITA基本コンソールの機器一覧の画面から、各機器に対してAnsible利用情報を設定します。</div>
<div class="line">詳細は <em>5.1.1機器一覧</em> を参照してください。</div>
</div>
</li>
<li><p><strong>投入オペレーション名の登録</strong></p></li>
</ol>
<p>ITA基本コンソールのオペレーション一覧の画面から、作業用の投入オペレーション名を登録します。</p>
<p>詳細は <a class="reference external" href="#オペレーション一覧">5.1.2
オペレーション一覧</a>を参照してください。</p>
<ol class="arabic simple" start="4">
<li><p><strong>インターフェース情報の登録</strong></p></li>
</ol>
<p>Ansible共通コンソールのインターフェース情報の画面から、Ansible
Core、Ansible Automation
Controllerサーバのどちらを実行エンジンにするかを選択し、実行エンジンのサーバへの接続情報の登録します。</p>
<p>詳細は<a class="reference external" href="l">5.2.1インタフェース情報</a>を参照してください。</p>
<ol class="arabic" start="5">
<li><div class="line-block">
<div class="line"><a href="#id95"><span class="problematic" id="id96">**</span></a>作業パターン(Movement)の登録
<a href="#id97"><span class="problematic" id="id98">**</span></a>Ansible-PioneerコンソールのMovement一覧の画面から、作業用のMovementを登録します。</div>
<div class="line">詳細は <em>5.3.2Movement一覧</em> を参照してください。</div>
</div>
</li>
<li><p><strong>対話種別の登録</strong></p></li>
</ol>
<blockquote>
<div><p>Ansible-Pioneerコンソールの対話種別リストの画面から、対話種別を登録します。</p>
<p>OS種別ごとの差異を対話ファイルごとに定義し、同一目的の対話ファイルを対話種別として纏めて機器差分を吸収(抽象化)します。</p>
<p>詳細は、対話種別リスト（Ansible-Pioneerのみ）
を参照してください。**
**</p>
</div></blockquote>
<ol class="arabic simple" start="7">
<li><p><strong>対話ファイルの登録</strong></p></li>
</ol>
<p>Ansible-Pioneerコンソールの対話ファイル素材集の画面から、対話種別とOS種別の組み合わせに対して対話ファイルを登録します。</p>
<p>詳細は <em>5.3.6対話ファイル素材集（Ansible-Pioneerのみ）</em>
を参照してください。</p>
<ol class="arabic simple" start="8">
<li><p><strong>テンプレートファイルの登録(必要に応じて実施)</strong></p></li>
</ol>
<p>Ansible共通コンソールのテンプレート管理の画面から、対話ファイルで使用しているtemplateファイルとtemplate埋め込み変数の登録／更新／廃止を行います。</p>
<p>詳細は5.2.4<a class="reference external" href="#テンプレート管理">テンプレート管理</a>
を参照してください。</p>
<ol class="arabic simple" start="9">
<li><p><strong>素材ファイルの登録(必要に応じて実施)</strong></p></li>
</ol>
<p>Ansible共通コンソールのファイル管理の画面から、作業対象サーバに配置するファイルを登録します。</p>
<p>詳細は 5.2.5<a class="reference external" href="#ファイル管理">ファイル管理</a> を参照してください。</p>
<ol class="arabic simple" start="10">
<li><p><a href="#id99"><span class="problematic" id="id100">**</span></a>Movementに対話ファイルを指定
<a href="#id101"><span class="problematic" id="id102">**</span></a>Ansible-PioneerコンソールのMovement-Playbook紐付（Movement-対話種別紐付、Movement-ロール紐付）の画面から、登録したMovementに対話ファイルに対応した対話種別リストを指定します。</p></li>
</ol>
<p>詳細は <a class="reference external" href="#movement-playbook紐付movement-対話種別紐付movement-ロール紐付">5.3.7
Movement-Playbook紐付（Movement-対話種別紐付、Movement-ロール紐付）</a>を参照してください。</p>
<ol class="arabic" start="11">
<li><div class="line-block">
<div class="line"><a href="#id103"><span class="problematic" id="id104">**</span></a>作業対象ホストの指定
<a href="#id105"><span class="problematic" id="id106">**</span></a>Ansible-Pioneerコンソールの作業対象ホストの画面から、作業対象ホストを指定します。</div>
<div class="line">詳細は <em>5.3.10作業対象ホスト</em> を参照してください。</div>
</div>
</li>
<li><div class="line-block">
<div class="line"><a href="#id107"><span class="problematic" id="id108">**</span></a>変数値の設定
<a href="#id109"><span class="problematic" id="id110">**</span></a>Ansible-Pioneerコンソールの代入値管理の画面から、Movementに登録したPlaybook内で定義した変数の値を設定します。変数を利用していない場合、設定は不要です。</div>
<div class="line">詳細は 5.3.11<a class="reference external" href="#代入値管理">代入値管理</a> を参照してください。</div>
</div>
</li>
<li><p><a href="#id111"><span class="problematic" id="id112">**</span></a>作業実行
<a href="#id113"><span class="problematic" id="id114">**</span></a>Ansible-Pioneerコンソールの作業実行の画面から、実行日時、投入オペレーションを選択して設定して処理の実行を指示します。</p></li>
</ol>
<p>詳細は <em>5.3.14作業実行</em> を参照してください。</p>
<ol class="arabic" start="14">
<li><div class="line-block">
<div class="line"><a href="#id115"><span class="problematic" id="id116">**</span></a>作業状態確認
<a href="#id117"><span class="problematic" id="id118">**</span></a>Ansible-Pioneerコンソールの作業状態確認の画面では、実行した作業の状態がリアルタイムで表示されます。また、作業の緊急停止や、実行ログ、エラーログを監視することができます。</div>
<div class="line">詳細は <em>5.3.12作業状態確認</em> を参照してください。</div>
</div>
</li>
<li><p><a href="#id119"><span class="problematic" id="id120">**</span></a>作業履歴確認
<a href="#id121"><span class="problematic" id="id122">**</span></a>Ansible-Pioneerコンソールの作業管理の画面では、実行した作業の一覧が表示され履歴が確認できます。</p></li>
</ol>
<p>詳細は <em>5.3.14作業管理</em> を参照してください。</p>
<p><strong>■登録画面項目一覧凡例</strong></p>
<p>次項に記載の登録画面項目一覧表の内容について説明します。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><ol class="arabic simple">
<li></li>
</ol>
</th>
<th class="head"><p><strong>②</strong></p></th>
<th class="head"><ul class="simple">
<li></li>
</ul>
</th>
<th class="head"><p><strong>④</strong></p></th>
<th class="head"><p><strong>⑤</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>**
項目**</p></td>
<td><p><strong>説明</strong></p></td>
<td><p>**
入
力
**</p>
<p>**
必
須
**</p>
</td>
<td><p><strong>入力
形式</strong></p></td>
<td><ul class="simple">
<li></li>
</ul>
<p><em>制約事項*</em></p>
</td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<blockquote>
<div><p><strong>①項目</strong></p>
<p>　・サブメニュー内の項目名です</p>
<p><strong>②説明</strong></p>
<p>　・項目に対する説明です</p>
<p><strong>③入力必須</strong></p>
<p>　・○：項目に対する内容の入力が必須の項目</p>
<p>　・‐ ：項目に対する内容の入力が任意の項目</p>
<p><strong>④入力形式</strong></p>
<p>　・手動入力：手動での入力が必要な項目</p>
<p>　・自動入力：自動で内容が入力される項目</p>
<p>　・チェックボックス：チェックボックス形式の項目</p>
<p>　・ボタン：ラジオボタン形式の項目</p>
<p>　・リスト選択：リストボックス形式の項目</p>
<p><strong>⑤制約事項</strong></p>
<p>　・項目に対する制約事項(文字数制限など)です**
**</p>
</div></blockquote>
</section>
</section>
</section>
<section id="id123">
<h1><span class="section-number">14. </span>Ansible driver機能・操作方法説明<a class="headerlink" href="#id123" title="この見出しへのパーマリンク">¶</a></h1>
<p>本章では、Ansible driverで利用する各コンソールの機能について説明します。</p>
<section id="id124">
<h2><span class="section-number">14.1. </span>基本コンソール<a class="headerlink" href="#id124" title="この見出しへのパーマリンク">¶</a></h2>
<blockquote>
<div><p>本節では、ITA基本コンソールでの操作について記載します。</p>
<p>本作業はITA基本コンソールマニュアルを参照して、ITA基本コンソール画面内で作業を実施してください。</p>
</div></blockquote>
<section id="id125">
<h3>機器一覧<a class="headerlink" href="#id125" title="この見出しへのパーマリンク">¶</a></h3>
<ol class="arabic">
<li><div class="line-block">
<div class="line">[機器一覧]では、作業対象ホストの情報を登録／更新／廃止を行います。</div>
<div class="line">本書では、主にAnsible
driverの動作に必要となる項目について説明します。</div>
<div class="line">「利用手順マニュアル_基本コンソール」と合わせて参照してください。</div>
</div>
</li>
</ol>
<blockquote>
<div><a class="reference internal image-reference" href="../../../_images/image51.png"><img alt="../../../_images/image51.png" src="../../../_images/image51.png" style="width: 6.14173in; height: 2.86822in;" /></a>
</div></blockquote>
<p>図 5.1‑1サブメニュー画面（機器一覧）</p>
<ol class="arabic" start="2">
<li><p>「登録」-「登録開始」ボタンより、機器情報の登録を行います。</p>
<a class="reference internal image-reference" href="../../../_images/image6.png"><img alt="../../../_images/image6.png" src="../../../_images/image6.png" style="width: 3.8781in; height: 1.61202in;" /></a>
</li>
</ol>
<p>図 5.1‑2 登録画面（機器一覧 - 共通項目）</p>
<a class="reference internal image-reference" href="../../../_images/image7.png"><img alt="../../../_images/image7.png" src="../../../_images/image7.png" style="width: 5.97917in; height: 1.10417in;" /></a>
<p>図 5.1‑3 登録画面（機器一覧 - Ansible利用情報）</p>
<ol class="arabic" start="3">
<li><div class="line-block">
<div class="line">登録画面の共通項目一覧は以下のとおりです。</div>
<div class="line">Web画面のカラム名の後ろに赤のアスタリスク（＊）が付いているカラムが必須入力になりますが、Ansible　driverを利用する場合には、Ansible利用情報を入力して下さい。</div>
</div>
<p>未入力で作業実行した場合、想定外エラーとなる場合があります。</p>
</li>
</ol>
<p><strong>表 5.1‑1　登録画面項目一覧（機器一覧）</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="2"><ul>
<li><div class="line-block">
<div class="line"><br /></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><br /></div>
</div>
</li>
</ul>
<p>項 |
目 |
* |
* |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</th>
<th class="head"></th>
<th class="head"></th>
<th class="head"><p><strong>説明</strong></p></th>
<th class="head"><p>**
入
力
**</p>
<p>**
必
須
**</p>
</th>
<th class="head"><p><strong>入
力形
式</strong></p></th>
<th class="head"><p><strong>制
約事項</strong></p></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td colspan="2"><p>管 |
理 |
シ |
ス |
テ |
ム |
項 |
番 |</p></td>
<td></td>
<td></td>
<td><p>登録情報を識別する一
意のＩＤが自動入力されます</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>自動
入力</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td></td>
</tr>
<tr class="row-odd"><td colspan="2"><p>ホ |
ス |
ト |
名 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td></td>
<td><p>ホスト名を記入します</p>
<div class="line-block">
<div class="line">※</div>
</div>
<p>ホスト名をlocalhostに設定し
pioneerで作業対象ホストとし
使用する場合、作業実行でエ
ラーになる場合があります。
その場合、インベントリファ
イル追加オプションに下記パ
ラメータでansibleサーバーに
インストールされているpyth
on3のパスを追記して下さい。
| Exp)
|
ansible_python_interpreter:</p>
<blockquote>
<div><p>/usr/bin/python3</p>
</div></blockquote>
</td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><p>最大長
128バイト</p></td>
<td></td>
</tr>
<tr class="row-even"><td colspan="2"><p>I |
P |
ア |
ド |
レ |
ス |</p></td>
<td></td>
<td></td>
<td><p>IPアドレス(xxx.x
xx.xxx.xxx形式)を記入します</p></td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><p>最大長
15バイト</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>E
t
h
e
r
W
a
k
e</p>
<p>O
n
L
a
n</p>
</td>
<td></td>
<td colspan="2"><p>M |
A |
C |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
</div>
</div></blockquote>
<p>ア |
ド |
レ |
ス |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td><p>MACアドレスを記入します</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大長
17バイト</p></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td colspan="2"><p>ネ |
ッ |
ト |
ワ |
ー |
ク |
デ |
バ |
イ |
ス |
名 |</p></td>
<td><p>ネットワ
ークデバイス名を記入します</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大長
256バイト</p></td>
<td></td>
</tr>
<tr class="row-odd"><td colspan="2"><p>ロ |
グ |
イ |
ン |
ユ |
ー |
ザ |
I |
D |</p></td>
<td></td>
<td></td>
<td><p>ロ
グインユーザIDを記入します</p></td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><p>最大長
30バイト</p></td>
<td></td>
</tr>
<tr class="row-even"><td colspan="2"><p>ロ |
グ |
イ |
ン |
パ |
ス |
ワ |
ー |
ド |</p></td>
<td colspan="2"><p>管 |
理 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td><p>ITAでパスワードを管
理する場合「●」を選択します</p></td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td colspan="2"><p>ロ |
グ |
イ |
ン |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
</div>
</div></blockquote>
<p>パ |
ス |
ワ |
ー |
ド |</p>
</td>
<td><p>パスワードを指定します</p></td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><p>最大長
128バイト</p></td>
<td></td>
</tr>
<tr class="row-even"><td colspan="2"><p>s |
s |
h |
鍵 |
認 |
証 |
情 |
報 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td colspan="2"><p>s |
s |
h |
秘 |
密 |
鍵 |
フ |
ァ |
イ |
ル |</p></td>
<td><p>ssh秘密鍵ファイルを
指定して鍵認証する場合の秘
密鍵ファイルを入力します。
アップロ
ードしたファイルは暗号化さ
れて保存されます。※登録後は
ダウンロー不可となります。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>ファ
イル
選択</p></td>
<td><p>最
大サイズ
4Gバイト</p></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td colspan="2"><p>パ |
ス |
フ |
レ |
ー |
ズ |</p></td>
<td><p>ssh秘密鍵ファイルにパスフレ
ーズが設定されている場合、
パスフレーズを入力します。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大長
256バイト</p></td>
<td></td>
</tr>
<tr class="row-even"><td colspan="4"><blockquote>
<div><div class="line-block">
<div class="line-block">
<div class="line-block">
<div class="line">| 認 |</div>
</div>
<div class="line">L | 証 |</div>
</div>
<div class="line">eg | 方 |</div>
</div>
</div></blockquote>
<p>A | ac | 式 |
n | y/ |   |
s | Ro |   |
i | le |   |
b | 利 |   |
l | 用 |   |
e | 情 |   |
利 | 報 |  |
用 |   |   |
情 |   |   |
報 |   |   |</p>
<blockquote>
<div><div class="line-block">
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
<div class="line">|   |</div>
</div>
</div></blockquote>
</td>
<td><div class="line-block">
<div class="line">Ansible・Ansible
Automation
C</div>
</div>
<p>ontrollerから機器へ接続する
際の認証方式を選択します。
| ●パスワード認証</p>
<p>ログインパスワードの
管理で●の選択と、ログインパ
スワードの入力が必須です。</p>
<p>●鍵認証（パスフレーズなし）</p>
<p>　ssh秘密鍵ファイル(id_ras
)のアップロードが必須です。</p>
<p>●鍵認証（パスフレーズあり）</p>
<p>　ssh秘密鍵ファイル(id
_ras)のアップロードと、パス
フレーズの入力が必須です。</p>
<p>●鍵認証（鍵交換済み）※1</p>
<p>ssh秘
密鍵ファイル(id_ras)のアッ
プロードは必要ありません。</p>
<p>●パスワード認証（winrm)</p>
<p>必要に応じて
WinRM接続情報を入力します。</p>
<p>尚、パスワード認証（winrm
)以外の認証方式の場合、機器
側に以下の設定が必要です。</p>
<p>ログインユーザの sudo
権限を NOPASSWD付で
/etc/sudoers に設定する。</p>
<p>Exp)</p>
<p>Demo_user ALL=(ALL)
NOPASSWD:ALL</p>
</td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td><p>説
明欄記載
のとおり</p></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td colspan="2"><blockquote>
<div><div class="line-block">
<div class="line">ポ</div>
<div class="line">ー</div>
<div class="line">ト</div>
</div>
</div></blockquote>
<p>W | 番
i | 号
n |
R |
M |
接 |
続 |
情 |
報 |</p>
</td>
<td><p>Win
dowsServerにWinRM接続する際
のポート番号を入力します。</p>
<p>未
入力の場合はデフォルト(598
5)でのWinRM接続となります。</p>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>説
明欄記載
のとおり</p></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td><p>ｻｰ
ﾊﾞ
証
明
書</p></td>
<td><div class="line-block">
<div class="line">WinRM接続ポートでhttpsの</div>
</div>
<p>ポート番号を指定した場合に
サーバﾞ証明書を入力します。
| アップロ
ードしたファイルは暗号化さ
れて保存されます。※登録後は
ダウンロー不可となります。</p>
<p>サーバ証明
書の認証を省く場合、インベ
ントリファイル追加オプショ
ンに下記を追記して下さい。</p>
<p>ansible_wi
nrm_server_cert_validation:
ignore</p>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>ファ
イル
選択</p></td>
<td><p>最
大サイズ
4Gバイト</p></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td><blockquote>
<div><p>P</p>
</div></blockquote>
<p>io
ne
er
利
用
情
報</p>
</td>
<td colspan="2"><p>プ |
ロ |
ト |
コ |
ル |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td><div class="line-block">
<div class="line">Pioneerから対象機器に</div>
</div>
<p>ログインする際のプロトコル
(ssh/telnet)を選択します。
| ●sshを選択した場合</p>
<div class="line-block">
<div class="line">認</div>
</div>
<p>証方式はパスワード認証（win
rm)以外を選択してください。
| ●telnetを選択した場合
|</p>
<blockquote>
<div><p>認証方式に設定した値は使用</p>
</div></blockquote>
<p>せずにtelnetで接続します。</p>
</td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td colspan="2"><p>O |
S |
種 |
別 |</p></td>
<td><p>対象機器のOSを選択します。
OS
種別マスタで登録されているO
S種別がリスト表示されます。</p></td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td><p>L
A
N
G</p></td>
<td></td>
<td><p>Pionee
rの対話ファイルを実行するユ
ーザーのLANGを選択します。</p>
<p>空白の
場合はutf-8扱いとなります。</p>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td><p>接
続
オ
プ
シ
ョ
ン</p></td>
<td></td>
<td></td>
<td><ol class="arabic">
<li><p>（ssh接続の場合）</p>
<p>/etc/ansible.c</p>
</li>
</ol>
<p>fg/ssh_argsに設定しているss
hオプション以外のオプション
を設定したい場合、設定した
いオプションを入力します。</p>
<blockquote>
<div><blockquote>
<div><p>（telnet接続の場合）</p>
</div></blockquote>
<p>telnet接続時のオプション</p>
</div></blockquote>
<p>を設定したい場合、設定した
いオプションを入力します。</p>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大長
512バイト</p></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>イ
ン
ベ
ン
ト
リ
フ
ァ
イ
ル
追
加
オ
プ
シ
ョ
ン
「
P
io
ne
er
利
用
時
は
、
本
項
目
は
適
用
さ
れ
ま
せ
ん
。
」</p></td>
<td></td>
<td></td>
<td><p>ITAが設
定していないインベントリフ
ァイルのオプションパラメー
タをyaml形式で入力します。</p>
<p>Exp)</p>
<div class="line-block">
<div class="line">ansible_connection:
network_cli</div>
<div class="line">ansible_network_os: ios</div>
<div class="line">ansible_become: yes</div>
<div class="line">ansible_become_method:
enable</div>
<div class="line">各パラメータ値を変数</div>
</div>
<p>で記述することも出来ます。
| ansible_become_password:</p>
<blockquote>
<div><p><a href="#id126"><span class="problematic" id="id127">**</span></a>‘{{ VAR_passwd }}’
**</p>
</div></blockquote>
<p>具体値に変数を記述する場合</p>
<p>'{{△<strong>VAR_passwd</strong>△}}'</p>
<blockquote>
<div><p>△:半角スペース</p>
</div></blockquote>
<p>　
‘:シングル・ダブルコ
ーテーションで囲む「必須」</p>
<p>変数の具
体値は「5.3.9代入値自動登録
設定」や「5.3.11代入値管理
」メニューから登録します。</p>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大長
512バイト</p></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td><blockquote>
<div><p>A</p>
</div></blockquote>
<p>ns
ib
le</p>
<p>Au
to
ma
ti
on</p>
<p>Co
nt
ro
ll
er</p>
<p>利
用
情
報</p>
</td>
<td colspan="2"><p>イ |
ン |
ス |
タ |
ン |
ス |
グ |
ル |
ー |
プ |
名 |
※ |
2 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td><p>Ansible Automation
Controller
がクラスタ構成の場合
、どのインスタンスグループ
で実行するかを選択します。
ここで設定した、インスタン
スグループはインベントリオ
ブジェクトに設定されます。</p>
<p>未選択の場合はAnsible
Automation
Con
trollerのデフォルトのインス
タンスグループになります。</p>
<p>Ansible Automation
Controller
がクラスタ構成でない場
合は、未選択で構いません。</p>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td colspan="2"><p>接 |
続 |
タ |
イ |
プ |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td><p>Ansible Automation
Controller認証情
報の接続タイプを設定します
。通常はmachineを選択します
。ansible_cnnectionをlocal
に設定する必要があるNetwork
OSの
場合にNetworkを選択します。</p>
<p>Networkを選択し
た場合、インベントリファイ
ル追加オプションにPlatform
Op
tions(ansible_cnnection以外
)を設定する必要があります。</p>
<p>Exp)</p>
<p>インベントリファ
イル追加オプションの設定例</p>
<p>Network
OSがiosの場合の設定値</p>
<p>ansible_network_os: ios</p>
<p>ansible_become: yes</p>
<p>ansible_become_method:
enable</p>
<p>Ansible Automation
Controllerの認
証情報の接続タイプについて
は、ドキュメント　<a class="reference external" href="https://docs.ansible.com/ansible-tower/3.6.4/html_ja/userguide/credentials.html#credential-types">認証情報
タイプ</a>
を参照して下さい。</p>
<p>Network
OSとansible
_connectionの関連やPlatform
Optionsにつ
いては、Ansibleドキュメント
<a class="reference external" href="https://docs.ansible.com/ansible/devel/network/user_guide/platform_index.html#platform-options">Platform
Options</a>
を参照ください。</p>
</td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td colspan="2"><p>備 |
考 |</p></td>
<td></td>
<td></td>
<td><p>自由記述欄です。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大長4
000バイト</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>※1　　認証方式が鍵認証（鍵交換済み）に設定する為に必要な公開鍵ファイルの配布</p>
<p>・Ansible Coreの場合</p>
<p>ansibleがインストールされているサーバーの実行ユーザー「Ansible共通コンソール=&gt;インターフェース情報に設定されている実行ユーザー」から作業対象ホストにssh接続します。</p>
<p>実行ユーザーの公開鍵ファイルをログイン先ユーザーのauthorized_keysにコピーして下さい。</p>
<p>・Ansible Automation Controllerの場合</p>
<p>Ansible Automation
Controllerのawxユーザーから作業対象ホストにssh接続しています。</p>
<blockquote>
<div><p>awxユーザーの公開鍵ファイルをログイン先ユーザーのauthorized_keysにコピーして下さい。ブラウザよりAnsible
Automation
Controllerにログインし、「設定」→「ジョブ」→「分離されたジョブに公開するパス」に「/var/lib/awx/.ssh/」を設定します。</p>
</div></blockquote>
<div class="line-block">
<div class="line"><a class="reference internal" href="../../../_images/image8.png"><img alt="image1" src="../../../_images/image8.png" style="width: 4.97986in; height: 1.51304in;" /></a></div>
<div class="line">尚、AnsibleTower4.x以降、awxユーザーの.sshディレクトリが扱えない為、作業対象ホストと鍵認証（鍵交換済み）での接続は出来ません。</div>
</div>
<p>※2 Ansible driverのバックヤード機能 「Ansible Automation
Controllerデータ同期」により取得したデータから選択します。</p>
</section>
<section id="id128">
<h3>オペレーション一覧<a class="headerlink" href="#id128" title="この見出しへのパーマリンク">¶</a></h3>
<ol class="arabic">
<li><p>[オペレーション一覧]画面では、オーケストレータで実行する作業対象ホストに対するオペレーションを管理します。作業はITA基本コンソール内メニューより選択します。</p>
<a class="reference internal image-reference" href="../../../_images/image9.png"><img alt="../../../_images/image9.png" src="../../../_images/image9.png" style="width: 6.69236in; height: 3.14167in;" /></a>
<p><strong>図 5.1‑4サブメニュー画面（オペレーション一覧）</strong></p>
</li>
</ol>
<p>登録方法の詳細は、関連マニュアルの「利用手順マニュアル_基本コンソール」をご参照下さい。</p>
</section>
</section>
<section id="ansible">
<h2><span class="section-number">14.2. </span>Ansible 共通コンソール<a class="headerlink" href="#ansible" title="この見出しへのパーマリンク">¶</a></h2>
<blockquote>
<div><p>本節では、Ansible共通コンソールでの操作について記載します。</p>
</div></blockquote>
<section id="id129">
<h3>インターフェース情報<a class="headerlink" href="#id129" title="この見出しへのパーマリンク">¶</a></h3>
<ol class="arabic">
<li><dl class="simple">
<dt>[インターフェース情報]では、Ansible Core、AnsibleTower、Ansible</dt><dd><p>Automation
Controllerのいずれかを実行エンジンに選択し、ITAシステム・Ansible
driverサーバと実行エンジンのサーバが共有するディレクトリのパスのおよび実行エンジンのサーバへの接続インターフェース情報を登録／更新／廃止を行います。</p>
</dd>
</dl>
<a class="reference internal image-reference" href="../../../_images/image10.png"><img alt="../../../_images/image10.png" src="../../../_images/image10.png" style="width: 6.11321in; height: 3.20764in;" /></a>
</li>
</ol>
<p><strong>図 5.2‑1サブメニュー画面（インタフェース情報）</strong></p>
<ol class="arabic" start="7">
<li><p>「一覧」-「更新」ボタンより、インターフェース情報の登録を行います。</p>
<a class="reference internal image-reference" href="../../../_images/image111.png"><img alt="../../../_images/image111.png" src="../../../_images/image111.png" style="width: 6.11319in; height: 0.69811in;" /></a>
</li>
</ol>
<p>図 5.2‑2 登録画面（インタフェース情報）</p>
<ol class="arabic" start="8">
<li><div class="line-block">
<div class="line">インタフェース情報画面の項目一覧は以下のとおりです。
| インタフェース情報が未登録または、複数レコード登録されている状態で作業実行した場合、作業実行は想定外エラーとなります。</div>
</div>
</li>
</ol>
<p><strong>表 5.2‑1　登録画面項目一覧（インタフェース情報）</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="2"><ul>
<li><div class="line-block">
<div class="line"><br /></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><br /></div>
</div>
</li>
</ul>
<p>項 |
目 |
* |
* |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</th>
<th class="head"></th>
<th class="head"><p><strong>説明</strong></p></th>
<th class="head"><p>**
入
力
**</p>
<p>**
必
須
**</p>
</th>
<th class="head"><p><strong>入
力形
式</strong></p></th>
<th class="head"><ul class="simple">
<li></li>
</ul>
<p><em>制約事項*</em></p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td colspan="2"><p>実 |
行 |
エ |
ン |
ジ |
ン |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td><div class="line-block">
<div class="line">実行するエンジンを</div>
</div>
<p>下記の3種類から選択します。
| ・Ansible Core</p>
<div class="line-block">
<div class="line">・Ansible Tower</div>
<div class="line">・Ansible Automation
Controller</div>
</div>
</td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td></td>
</tr>
<tr class="row-odd"><td colspan="3"><blockquote>
<div><div class="line-block">
<div class="line">ホ |</div>
<div class="line">ス |</div>
<div class="line">ト |</div>
</div>
</div></blockquote>
<p>A |   |
n |   |
s |   |
i |   |
b |   |
l |   |
e |   |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><a href="#id130"><span class="problematic" id="id131">|</span></a></div>
<div class="line"><a href="#id132"><span class="problematic" id="id133">|</span></a></div>
<div class="line"><a href="#id134"><span class="problematic" id="id135">|</span></a></div>
</div>
</div></blockquote>
<p>C |   |
o |   |
r |   |
e |   |
イ |  |
ン |  |
タ |  |
ー |  |
フ |  |
ェ |  |
ー |  |
ス |  |</p>
</td>
<td><p>Ansi
bleサーバのホスト名（または
IPアドレス）を入力します。</p>
<p>HTTPS通信の
場合はホスト名が推奨です。</p>
</td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><p>最大
長128バイト
実行エンジ
ンがAnsible
Core以外
でもansibl
e-vaultコマ
ンドを実行
するAnsible
Coreイン
ターフェー
スの設定が
必要です。</p></td>
</tr>
<tr class="row-even"><td></td>
<td colspan="2"><p>プ |
ロ |
ト |
コ |
ル |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td><p>An
sibleサーバとのプロトコルを</p>
<p>http /
http
s　のどちらかを入力します。</p>
</td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><ul class="simple">
<li></li>
</ul>
<p>実行エンジ
ンがAnsible
Core以外
でもansibl
e-vaultコマ
ンドを実行
するAnsible
Coreイン
ターフェー
スの設定が
必要です。</p>
</td>
</tr>
<tr class="row-odd"><td></td>
<td colspan="2"><p>ポ |
ー |
ト |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td><p>Ansibleサーバの接
続ポート(80/443)を入力しま
す。通常はHTTPS(443)です。</p></td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><ul class="simple">
<li></li>
</ul>
<p>実行エンジ
ンがAnsible
Core以外
でもansibl
e-vaultコマ
ンドを実行
するAnsible
Coreイン
ターフェー
スの設定が
必要です。</p>
</td>
</tr>
<tr class="row-even"><td></td>
<td colspan="2"><p>実 |
行 |
ユ |
ー |
ザ |
ー |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td><p>sudoコ
マンドでansible-playbook/an
sible-vaultコマンドを実行す
るとユーザーを入力します。</p></td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><p>最大
長64バイト
実行エンジ
ンがAnsible
Core以外
でもansibl
e-vaultコマ
ンドを実行
するAnsible
Coreイン
ターフェー
スの設定が
必要です。</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>A
C
C
E
S
S
_
K
E
Y
_
I
D</p></td>
<td></td>
<td><p>Ansibleサー
バと接続時の認証に使用する
アクセスキーを入力します。</p></td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><p>最大
長64バイト
実行エンジ
ンがAnsible
Core以外
でもansibl
e-vaultコマ
ンドを実行
するAnsible
Coreイン
ターフェー
スの設定が
必要です。</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>S
E
C
R
E
T
_
A
C
C
E
S
S
_
K
E
Y</p></td>
<td></td>
<td><p>Ansibleサーバと接続時の
認証に使用するシークレット
アクセスキーを入力します。</p></td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><p>最大
長64バイト
実行エンジ
ンがAnsible
Core以外
でもansibl
e-vaultコマ
ンドを実行
するAnsible
Coreイン
ターフェー
スの設定が
必要です。</p></td>
</tr>
<tr class="row-odd"><td colspan="3"><blockquote>
<div><div class="line-block">
<div class="line">代 |</div>
<div class="line">表 |</div>
<div class="line">ホ |</div>
</div>
</div></blockquote>
<p>A | ス |
n | ト |
s |   |
i |   |
b |   |
l |   |
e |   |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><a href="#id136"><span class="problematic" id="id137">|</span></a></div>
<div class="line"><a href="#id138"><span class="problematic" id="id139">|</span></a></div>
<div class="line"><a href="#id140"><span class="problematic" id="id141">|</span></a></div>
</div>
</div></blockquote>
<p>A |   |
u |   |
t |   |
o |   |
m |   |
a |   |
t |   |
i |   |
o |   |
n |   |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><a href="#id142"><span class="problematic" id="id143">|</span></a></div>
<div class="line"><a href="#id144"><span class="problematic" id="id145">|</span></a></div>
<div class="line"><a href="#id146"><span class="problematic" id="id147">|</span></a></div>
</div>
</div></blockquote>
<p>C |   |
o |   |
n |   |
t |   |
r |   |
o |   |
l |   |
l |   |
e |   |
r |   |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><a href="#id148"><span class="problematic" id="id149">|</span></a></div>
<div class="line"><a href="#id150"><span class="problematic" id="id151">|</span></a></div>
<div class="line"><a href="#id152"><span class="problematic" id="id153">|</span></a></div>
</div>
</div></blockquote>
<p>イ |  |
ン |  |
タ |  |
ー |  |
フ |  |
ェ |  |
ー |  |
ス |  |</p>
</td>
<td><p>Ansible Automation
Controllerホスト一覧に
登録されているホストの一覧
より、ITAと通信するAnsible
Automation
Controllerを選択します。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>リ
スト
選択</p></td>
<td><p>実行エンジ
ンがAnsible
Cor
e以外の場合
に入力必須</p></td>
</tr>
<tr class="row-even"><td></td>
<td colspan="2"><p>プ |
ロ |
ト |
コ |
ル |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td><p>Ansible Automation
Contr
ollerサーバとのプロトコルを</p>
<p>http /
http
s　のどちらかを入力します。</p>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>実行エンジ
ンがAnsible
Cor
e以外の場合
に入力必須</p></td>
</tr>
<tr class="row-odd"><td></td>
<td colspan="2"><p>ポ |
ー |
ト |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td><p>Ansible Automation
Controllerサーバの接
続ポート(80/443)を入力しま
す。通常はHTTPS(443)です。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>実行エンジ
ンがAnsible
Cor
e以外の場合
に入力必須</p></td>
</tr>
<tr class="row-even"><td></td>
<td colspan="2"><p>組 |
織 |
名 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td><p>Ansible Automation
Controllerサーバに登録され
ている組織名を選択します。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>リ
スト
選択</p></td>
<td><p>実行エンジ
ンがAnsible
Cor
e以外の場合
に入力必須</p></td>
</tr>
<tr class="row-odd"><td></td>
<td colspan="2"><p>認 |
証 |
ト |
ー |
ク |
ン |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td><p>ITAからAnsible Automation
Controlle
rサーバに接続するユーザーの
認証トークンを入力します。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大
長128バイト</p>
<p>実行エンジ
ンがAnsible
Cor
e以外の場合
に入力必須</p>
</td>
</tr>
<tr class="row-even"><td></td>
<td colspan="2"><p>実 |
行 |
時 |
デ |
ー |
タ |
削 |
除 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td><p>作業実行時にITAとAnsible
Automation Controller
内に一時的に生成した
データリソースを作業終了後
に削除するかを選択します。
「削
除する」を選択した場合に削
除されるデータリソースは「
8.5実行時デー
タ削除で削除されるデータリ
ソース」を参照して下さい。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>リ
スト
選択</p></td>
<td><p>実行エンジ
ンがAnsible
Cor
e以外の場合
に入力必須</p></td>
</tr>
<tr class="row-odd"><td><p>P
r
o
x
y</p></td>
<td><p>A
d
r
e
s
s</p></td>
<td></td>
<td><p>プロキシサー
バのアドレスを入力します。</p>
<p>ITAがプロキシ
環境下にある場合、Ansible/
Ansible Automation
Controlle
rサーバまでの疎通のために設
定が必要な場合があります。</p>
<p>プロキシサーバのURLが</p>
<p><a class="reference external" href="http://">http://</a>
procy.gate.co.jp:8080の場合</p>
<p>Address
にはhttp://procy.gate.co.jp
を入力します。</p>
<p>Portには 8080を入力します。</p>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最
大128バイト</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>P
o
r
t</p></td>
<td></td>
<td><p>プロキシサ
ーバのポートを入力します。</p>
<p>ITAがプロキシ
環境下にある場合、Ansible/
Ansible Automation
Controlle
rサーバまでの疎通のために設
定が必要な場合があります。</p>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td></td>
</tr>
<tr class="row-odd"><td colspan="3"><blockquote>
<div><div class="line-block">
<div class="line">ホ |</div>
<div class="line">ス |</div>
<div class="line">ト |</div>
</div>
</div></blockquote>
<p>S | 名 |
C |   |
M |   |
管 |  |
理 |  |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><a href="#id154"><span class="problematic" id="id155">|</span></a></div>
<div class="line"><a href="#id156"><span class="problematic" id="id157">|</span></a></div>
<div class="line"><a href="#id158"><span class="problematic" id="id159">|</span></a></div>
</div>
</div></blockquote>
<p>G |   |
i |   |
t |   |
連 |  |
携 |  |
先 |  |
情 |  |
報 |  |</p>
</td>
<td><p>Ansible Automation
Controllerから連携先のGitリ
ポジトリへsshプロトコルで接
続する為のホスト名（または
IPアドレス）を入力します。</p>
<p>Ansible
driverのバ
ックヤード機能がインストー
ルされているホストにAnsible
Automation
Controllerと連携するGi
tリポジトリが作成されます。</p>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大
長128バイト
実行エンジ
ンがAnsible
Automation
C
ontrollerの
場合に必須
入力です。</p></td>
</tr>
<tr class="row-even"><td></td>
<td colspan="2"><blockquote>
<div><div class="line-block">
<div class="line">ユー</div>
<div class="line">ザー</div>
<div class="line"><br /></div>
</div>
</div></blockquote>
<p>L |
i |
n |
u |
x |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
<p>ア |
カ |
ウ |
ン |
ト |</p>
</td>
<td><p>Ansible Automation
Contro
llerから連携先のGitリポジト
リへsshプロトコルで接続する
為のユーザーを入力します。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大
長128バイト
実行エンジ
ンがAnsible
Automation
C
ontrollerの
場合に必須
入力です。</p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td><p>ssh秘
密鍵
ファ
イル</p></td>
<td><p>Ansible Automation
Controllerから連携先の
Gitリポジトリへsshプロトコ
ルの鍵認証で接続する為の秘
密鍵ファイルを入力します。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>ファ
イル</p></td>
<td><p>フ
ァイル選択</p>
<div class="line-block">
<div class="line">最大サイ</div>
</div>
<p>ズ4Gバイト
|</p>
<blockquote>
<div><p>実行エンジ</p>
</div></blockquote>
<p>ンがAnsible</p>
<blockquote>
<div><dl class="simple">
<dt>Automation</dt><dd><p>C</p>
</dd>
</dl>
</div></blockquote>
<p>ontrollerの
場合に必須
入力です。</p>
</td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td><p>パス
フレ
ーズ</p></td>
<td><p>ssh秘密
鍵ファイルに設定されている
パスフレーズを入力します。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大
長256バイト</p></td>
</tr>
<tr class="row-odd"><td colspan="2"><p>デ |
ー |
タ |
リ |
レ |
イ |
ス |
ト |
レ |
ー |
ジ |
パ |
ス |
( |
I |
T |
A |
) |
※ |
1 |</p></td>
<td></td>
<td><p>ITAシステム・Ansible
driverサーバから見た
ディレクトリを入力します。</p></td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><p>最大
長128バイト</p></td>
</tr>
<tr class="row-even"><td colspan="2"><p>デ |
ー |
タ |
リ |
レ |
イ |
ス |
ト |
レ |
ー |
ジ |
パ |
ス |
( |
A |
n |
s |
i |
b |
l |
e |
) |</p></td>
<td></td>
<td><p>Ansibleサーバーから見た
ディレクトリを入力します。</p></td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><p>最大
長128バイト
実行エンジ
ンがAnsible
C
ore以外では
使用しない
情報です。</p></td>
</tr>
<tr class="row-odd"><td colspan="2"><p>S |
y |
m |
p |
h |
o |
n |
y |
イ |
ン |
ス |
タ |
ン |
ス |
デ |
ー |
タ |
リ |
レ |
イ |
ス |
ト |
レ |
ー |
ジ |
パ |
ス |
( |
A |
n |
s |
i |
b |
l |
e |
) |</p></td>
<td></td>
<td><p>Symphony実行時、各Movem
entで共有するディレクトリで
す。Ansibleサーバーから見た
ディレクトリを入力します。</p>
<p>ITAシステムから見たパ
スはSymphonyインターフェー
ス情報より設定します。Symph
onyインターフェース情報につ
いては「利用手順マニュアル
S
ymphony」を参照して下さい。</p>
</td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><p>最大
長128バイト
実行エンジ
ンがAnsible
Core以外で
は使用ない
情報です。</p></td>
</tr>
<tr class="row-even"><td colspan="2"><p>C |
o |
n |
d |
u |
c |
t |
o |
r |
イ |
ン |
ス |
タ |
ン |
ス |
デ |
ー |
タ |
リ |
レ |
イ |
ス |
ト |
レ |
ー |
ジ |
パ |
ス |
( |
A |
n |
s |
i |
b |
l |
e |
) |</p></td>
<td></td>
<td><p>Conducto
r実行時、各Movementで共有す
るディレクトリです。Ansible
サーバーから見た
ディレクトリを入力します。</p>
<p>ITAシステムから見たパス
はConductorインターフェース
情報より設定します。Conduc
torインターフェース情報につ
いては「利用手順マニュアル
Co
nductor」を参照して下さい。</p>
</td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><p>最大
長128バイト
実行エンジ
ンがAnsible
Core以外で
は使用ない
情報です。</p></td>
</tr>
<tr class="row-odd"><td colspan="2"><p>オ |
プ |
シ |
ョ |
ン |
パ |
ラ |
メ |
ー |
タ |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td><p>Movement共通のオプショ
ンパラメータを入力します。</p>
<p>実行エンジンがAnsible
Coreの場合はansible-playboo
kコマンドのオプションパラメ
ータ、実行エンジンがAnsible
Core以外
の場合はジョブテンプレート
のパラメータを入力します。</p>
<p>Movement固
有のオプションパラメータは
Movement一覧で入力します。</p>
<p>オプションパ
ラメータの詳細については、
*
8.3オプションパラメータ一覧
<a href="#id160"><span class="problematic" id="id161">*</span></a>」覧を参照してください。</p>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大
長512バイト</p></td>
</tr>
<tr class="row-even"><td colspan="2"><p>並 |
列 |
実 |
行 |
数 |</p></td>
<td></td>
<td><p>同時に実行でき
るMovement(Legacy/Pioneer/</p>
<p>Legacy-
Role)の最大数を入力します。</p>
</td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td></td>
</tr>
<tr class="row-odd"><td colspan="2"><p>状 |
態 |
監 |
視 |
周 |
期 |
（ |
単 |
位 |
ミ |
リ |
秒 |
） |</p></td>
<td></td>
<td><dl class="simple">
<dt>「</dt><dd><p><em>5.3.12作業状態確認</em>」で</p>
</dd>
</dl>
<p>表示されるログのリフレッシ
ュ間隔を入力します。通常は3
000ミリ秒程度が推奨値です。</p>
</td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><p>最小値 1000
ミリ秒</p></td>
</tr>
<tr class="row-even"><td colspan="2"><p>進 |
行 |
状 |
態 |
表 |
示 |
行 |
数 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td><p>「
<em>5.3.12作業状態確認</em>」
での進行ログ・エラーログの
最大表示行数を入力します。</p>
<p>ステータスが[未実
行]、[準備中]、[実行中]、[
実行中(遅延)]の場合、指定し
た行数でログを出力します。</p>
<p>ステータス
が[完了]、[完了(異常)]、[想
定外エラー]、[緊急停止]、[
未実行(予約)]、[予約取消]の
場合、指定した行数ではなく
すべてのログを出力します。</p>
<p>環境毎にチュ
ーニングを要しますが、通常
は1000行程度が推奨値です。</p>
</td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><p>N |
U |
L |
L |
連 |
携 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td><p>代入値自動登録
設定でパラメータシートの具
体値がNULL(空白)の場合に、
代入値管理への登録をNULL(空
白)の値で行うか設定します。</p>
<p>代入値自動登録設定メニ
ューの「NULL連携」が空白の
場合この値が適用されます。</p>
<p>・「有効」
の場合、パラメータシートの
値がどのような値でも代入値
管理への登録が行われます。</p>
<p>・「無効」の
場合、パラメータシートに値
が入っている場合のみ代入値
管理への登録が行われます。</p>
</td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td colspan="2"><p>備 |
考 |</p></td>
<td></td>
<td><p>自由記述欄です。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大長
4000バイト</p></td>
</tr>
</tbody>
</table>
<p>※1
データリレイストレージパスは、ITAとAnsibleが別サーバで運用する構成もサポートするので、ディレクトリパスを別々に管理します。詳細は「システム構成／環境構築ガイド_Ansible-driver編」を参照してください。</p>
</section>
<section id="id162">
<h3>Ansible Automation Controllerホスト一覧<a class="headerlink" href="#id162" title="この見出しへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">[Ansible Automation Controllerホスト一覧]では、Ansible Automation
ControllerのRestAPI実行に必要な情報、および構築資材をAnsible
Automation
Controllerにファイル転送するために必要な情報を登録／更新／廃止を行います。</div>
<div class="line">クラスタ構成の場合は、構成している全てのサーバを登録して下さい。</div>
</div>
</div></blockquote>
<p>ただし、Ansible Automation Controllerのhop nodeの登録は不要です。</p>
<a class="reference internal image-reference" href="../../../_images/image12.png"><img alt="../../../_images/image12.png" src="../../../_images/image12.png" style="width: 6.26944in; height: 3.04348in;" /></a>
<p><strong>図 5.2‑3サブメニュー画面（Ansible Automation Controller ホスト一覧）</strong></p>
<ol class="arabic simple">
<li><p>「一覧」-「更新」ボタンより、Ansible Automation
Controllerのホスト情報の登録を行います。</p></li>
</ol>
<blockquote>
<div><a class="reference internal image-reference" href="../../../_images/image13.png"><img alt="../../../_images/image13.png" src="../../../_images/image13.png" style="width: 6.46875in; height: 0.83333in;" /></a>
</div></blockquote>
<p>図 5.2‑4 登録画面（Ansible Automation Controller ホスト一覧）</p>
<ol class="arabic simple" start="9">
<li><dl class="simple">
<dt>Ansible Automation</dt><dd><p>Controllerホスト一覧画面の項目一覧は以下のとおりです。</p>
</dd>
</dl>
</li>
</ol>
<p><strong>表 5.2‑2　登録画面項目一覧（</strong>Ansible Automation Controller
ホスト一覧<strong>）</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><ul class="simple">
<li></li>
</ul>
<p><em>項
目
*</em></p>
</th>
<th class="head"></th>
<th class="head"><p><strong>説明</strong></p></th>
<th class="head"><p>**
入
力
**</p>
<p>**
必
須
**</p>
</th>
<th class="head"><p><strong>入
力形
式</strong></p></th>
<th class="head"><ul class="simple">
<li></li>
</ul>
<p><em>制約事項*</em></p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>ホ
ス
ト</p></td>
<td></td>
<td><p>Ansible Automation
Control
lerサーバのホスト名（または
IPアドレス）を入力します。</p>
<p>HTTPS通信の
場合はホスト名が推奨です。</p>
</td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><p>最大
長128バイト</p></td>
</tr>
<tr class="row-even"><td><p>認
証
方
式</p></td>
<td></td>
<td><div class="line-block">
<div class="line">Ansible Automation
Controllerサーバへ</div>
</div>
<p>ファイル転送(scp)で接続する
際の認証方式を選択します。
| ●パスワード認証</p>
<p>ログインユーザとパ
スワードの入力が必須です。</p>
<p>●鍵認証（パスフレーズなし）</p>
<p>　ssh秘密鍵ファイル(id_ras
)のアップロードが必須です。</p>
<p>●鍵認証（パスフレーズあり）</p>
<p>　ssh秘密鍵ファイル(id
_ras)のアップロードと、パス
フレーズの入力が必須です。</p>
<p>●鍵認証（鍵交換済み）※1</p>
<p>ssh秘
密鍵ファイル(id_ras)のアッ
プロードは必要ありません。</p>
</td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><p>最大
長30バイト</p></td>
</tr>
<tr class="row-odd"><td><p>ロ
グ
イ
ン
ユ
ー
ザ</p></td>
<td></td>
<td><p>Ansible Automation
Controllerサーバへファイ
ル転送(scp)で接続する際のロ
グインユーザを入力します。</p>
<p>ログインユーザは、Ansible
Automation
Controllerインストー
ル時に生成されるawxユーザー
にパスワードを設定し、使用
することを強く推奨します。</p>
</td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><p>最大
長30バイト</p></td>
</tr>
<tr class="row-even"><td><p>パ
ス
ワ
ー
ド</p></td>
<td></td>
<td><p>認証方式
でパスワード認証を選択した
場合に必須入力となります。
ログインユーザ
のパスワードを指定します。</p></td>
<td><p>－</p></td>
<td><p>手動
入力</p></td>
<td><p>最大
長30バイト</p></td>
</tr>
<tr class="row-odd"><td><p>ssh
鍵
認
証
情
報</p></td>
<td><p>ssh秘
密鍵
ファ
イル</p></td>
<td><p>ssh秘密鍵ファイルを
指定して鍵認証する場合の秘
密鍵ファイルを入力します。
アップロ
ードしたファイルは暗号化さ
れて保存されます。※登録後は
ダウンロー不可となります。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>ファ
イル
選択</p></td>
<td><p>最大サイ
ズ4Gバイト</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>パス
フレ
ーズ</p></td>
<td><p>ssh秘密鍵ファイルにパスフレ
ーズが設定されている場合、
パスフレーズを入力します。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大
長256バイト</p></td>
</tr>
<tr class="row-odd"><td><p>is
ola
ted
To
wer</p></td>
<td></td>
<td><p>ク
ラスタ構成で構築されている
場合で、対象ノードがAnsible
Towerのisolated
node／Ansible Automation
Controllerのexecution
node
の場合、「●」を選択します。</p></td>
<td><p>－</p></td>
<td><p>選択
方式</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>備
考</p></td>
<td></td>
<td><p>自由記述欄です。</p></td>
<td><p>－</p></td>
<td><p>手動
入力</p></td>
<td><p>最大長
4000バイト</p></td>
</tr>
</tbody>
</table>
<p>※1　　認証方式が鍵認証（鍵交換済み）に設定する為に必要な公開鍵ファイルの配布</p>
<p>ITAがインストールされているサーバーのrootからAnsible Automation
Controllerのawxユーザーでssh接続します。</p>
<p>rootの公開鍵ファイルをAnsible Automation
Controllerのawxユーザーのauthorized_keysにコピーして下さい。</p>
</section>
<section id="id163">
<h3>グローバル変数管理<a class="headerlink" href="#id163" title="この見出しへのパーマリンク">¶</a></h3>
<ol class="arabic">
<li><p>[グローバル変数管理]では、Playbookや対話ファイルなどで利用するグローバル変数名を登録／更新／廃止を行います。</p>
<a class="reference internal image-reference" href="../../../_images/image14.png"><img alt="../../../_images/image14.png" src="../../../_images/image14.png" style="width: 5.8005in; height: 2.58022in;" /></a>
</li>
</ol>
<p><strong>図 5.2‑5サブメニュー画面（グローバル変数管理）</strong></p>
<ol class="arabic" start="2">
<li><p>「登録」-「登録開始」ボタンより、オペレーション情報の登録を行います。</p>
<a class="reference internal image-reference" href="../../../_images/image15.png"><img alt="../../../_images/image15.png" src="../../../_images/image15.png" style="width: 5.78962in; height: 0.74566in;" /></a>
<p><strong>図 5.2‑6 登録画面（グローバル変数管理）</strong></p>
</li>
<li><p>グローバル変数管理画面の項目一覧は以下のとおりです。</p></li>
</ol>
<p><strong>表 5.2‑3　登録画面項目一覧（グローバル変数管理）</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>項目</strong></p></th>
<th class="head"><p><strong>説明</strong></p></th>
<th class="head"><p>**
入
力
**</p>
<p>**
必
須
**</p>
</th>
<th class="head"><p><strong>入
力形
式</strong></p></th>
<th class="head"><ul class="simple">
<li></li>
</ul>
<p><em>制約事項*</em></p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>グローバ
ル変数名</p></td>
<td><p>変数名を入力します。</p>
<p>変数名は、
「GBL_****」形式で入力します。</p>
<p>****
：半角英数字とアンダースコア（
_
）が利用可能です。(最小
値:1バイト、最大値:128バイト)</p>
</td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><p>説明欄記
載のとおり</p></td>
</tr>
<tr class="row-odd"><td><p>具体値</p></td>
<td><p>具体値を入力
します。複数行の具体値も入力で
きますが、Pioneerの対話ファイ
ルで使用しているグローバル変数
で複数行の具体値を設定すると、
作業実行時にエラーとなります。</p>
<p>具体値にファイル埋込変数
「<a href="#id271"><span class="problematic" id="id272">CPF_</span></a>」とテンプレート埋込変数
「<a href="#id273"><span class="problematic" id="id274">TPF_</span></a>」が入力出来ます。変数を
記述する場合、Playbookに変数を
記述する場合と同様、変数名を{{
}}で囲みます。</p>
<p>入力例)</p>
<p>具
体値にTPF_sampleを入力する場合</p>
<p>'{{△TPF_sample△}}'
△:半角スペース</p>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大長
8192バイト</p></td>
</tr>
<tr class="row-even"><td><p>変
数名説明</p></td>
<td><p>変数に対
する説明・コメントを入力します</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大
長256バイト</p></td>
</tr>
<tr class="row-odd"><td><p>備考</p></td>
<td><p>自由記述欄です。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大長
4000バイト</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id164">
<h3>テンプレート管理<a class="headerlink" href="#id164" title="この見出しへのパーマリンク">¶</a></h3>
<ol class="arabic">
<li><p>[テンプレート管理]では、Playbookで定義しているtemplateモジュールやios_configモジュールなどのパラメータで使用するJinja2テンプレートファイルとテンプレート埋め込み変数の登録／更新／廃止を行います。</p>
<p>テンプレート管理でテンプレートモジュールを登録しておくことで、Playbook内で定義しているtemplateモジュールなどで使用するtemplateファイルをテンプレート埋め込み変数で指定することが出来ます。</p>
<a class="reference internal image-reference" href="../../../_images/image16.png"><img alt="../../../_images/image16.png" src="../../../_images/image16.png" style="width: 6.12053in; height: 2.7269in;" /></a>
</li>
</ol>
<p><strong>図 5.2-7サブメニュー画面（テンプレート管理）</strong></p>
<p><strong>(2)</strong>
「登録」-「登録開始」ボタンより、ファイル管理情報の登録を行います。</p>
<p>　　　　　　　　　　<a class="reference internal" href="../../../_images/image17.png"><img alt="image2" src="../../../_images/image17.png" style="width: 5.76003in; height: 0.75723in;" /></a></p>
<p>図 5.2-8 登録画面（テンプレート管理）</p>
<p><strong>(3)</strong> 登録画面の項目は以下のとおりです。</p>
<p>表 5.2-4登録画面項目一覧（テンプレート管理）</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>項目</strong></p></th>
<th class="head"><p><strong>説明</strong></p></th>
<th class="head"><p>**
入
力
**</p>
<p>**
必
須
**</p>
</th>
<th class="head"><p><strong>入
力形
式</strong></p></th>
<th class="head"><ul class="simple">
<li></li>
</ul>
<p><em>制約事項*</em></p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ﾃﾝﾌﾟﾚｰﾄ</p>
<p>埋
込変数名</p>
</td>
<td><p>templateモジュールやios_co
nfigモジュールなどのパラメータ
に埋め込む変数名を入力します。</p>
<p>変数名は、
「TPF_****」形式で入力します。</p>
<p>****
：半角英数字とアンダースコア（
_
）が利用可能です。(最小
値:1バイト、最大値:128バイト)</p>
</td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><p>説明欄記
載のとおり</p></td>
</tr>
<tr class="row-odd"><td><p>ﾃﾝ
ﾌﾟﾚｰﾄ素材</p></td>
<td><p>モジュールのパラメー
タで使用するJinja2テンプレート
ファイルをアップロードします。</p></td>
<td><p>○</p></td>
<td><p>ファ
イル
登録</p></td>
<td><p>テ
キスト形式
最大サイ
ズ4Gバイト</p></td>
</tr>
<tr class="row-even"><td><p>変数定義</p></td>
<td><p>テンプレート素材で
使用している変数を定義します。</p>
<p>具体値は定義の
みで使用することはありません。</p>
<p>Ansible-Roleのみで使用するテン
プレートで、default変数定義フ
ァイルなどに変数定義をしている
場合、変数定義は省略できます。</p>
<p>同名の変数を複
数のテンプレートで使用する場合
、変数定義を合わせる必要があり
のす。変数定義が一致していない
場合は登録でエラーとなります。</p>
<p>変数定義はA
nsibleの仕様に準拠していますが
、ITA独自仕様があります。表5.2
-5-1に変数定義の留意事項を記載
します。また、変数名の命名規則
は表2.1変数の種類と同様です。</p>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大長
4000バイト</p></td>
</tr>
<tr class="row-odd"><td><p>備考</p></td>
<td><p>自由記述欄です。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大長
4000バイト</p></td>
</tr>
</tbody>
</table>
<p>「登録」の前に、「テンプレート素材」を「事前アップロード（①）」してください。「アップロード状況（②）」にPlaybookのファイル名が表示されたのを確認してから、「登録」ボタンを押してください。</p>
<a class="reference internal image-reference" href="../../../_images/image18.png"><img alt="../../../_images/image18.png" src="../../../_images/image18.png" style="width: 2.60802in; height: 1.55251in;" /></a>
<p>表 5.2-5変数定義の留意事項</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>種類</p></th>
<th class="head"><p>留意事項</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>通常変数</p></td>
<td><p>具体値は省略可能です</p>
<p>e.g.)</p>
<p>VAR_sample_1: none</p>
<p>VAR_sample_2:</p>
</td>
</tr>
<tr class="row-odd"><td><p>複
数具体値変数</p></td>
<td><p>具体値は省略可能です</p>
<p>e.g.)</p>
<p>VAR_sample_1:</p>
<ul class="simple">
<li><p>none</p></li>
</ul>
<p>VAR_sample_2: []</p>
</td>
</tr>
<tr class="row-even"><td><p>多段変数</p></td>
<td><p>階層化された変数構造が定義出来ます。</p>
<p>e.g.)</p>
<p>VAR_sample_1:</p>
<ul class="simple">
<li><p>item1: none</p></li>
</ul>
<p>item2:</p>
<p>VAR_sample_2:</p>
<ul class="simple">
<li><p>array:</p></li>
<li><p>item1: none</p></li>
</ul>
<p>item2:</p>
<p>多段変数を定義したテン
プレートはAnsible-Roleでのみ使用することが出来ます。</p>
<p>Ansible-Roleで使用する
場合、同名の変数をdefault変数定義ファイルなどに定義
している場合は、変数定義を合わせる必要があります。変
数定義が一致していない場合は登録でエラーとなります。</p>
</td>
</tr>
<tr class="row-odd"><td><p>グ
ローバル変数</p></td>
<td><p>具体値は省略可能です</p>
<p>e.g.)</p>
<p>GBL_sample_1: none</p>
<p>GBL_sample_2:</p>
</td>
</tr>
<tr class="row-even"><td><p>ITA独自変数</p></td>
<td><p>変数の定義は不要です。</p></td>
</tr>
<tr class="row-odd"><td><p>読替変数</p></td>
<td><p>定義出来る変数の種類は以下の3種類です。</p>
<p>・通常変数</p>
<p>・複数具体値変数</p>
<p>・多段変数</p>
<p>各変数定義の留意事項は同様です。</p>
<p>e.g.)</p>
<p>LCA_sample_1:</p>
<p>LCA_sample_2: []</p>
<p>LCA_sample_3:</p>
<ul class="simple">
<li><p>item1: none</p></li>
</ul>
<p>item2:</p>
<p>読替変数を定義したテン
プレートはAnsible-Roleでのみ使用することが出来ます。</p>
</td>
</tr>
</tbody>
</table>
<p>詳しくは、別資料
「利用手順マニュアル_Ansible-driver_別紙_Ansible利用ガイドライン_追加ルール」を参照してください。</p>
<ol class="arabic simple">
<li><p>Playbookの記述</p></li>
</ol>
<p>テンプレート管理で登録したテンプレートをPlaybookに記述する場合、該当のパラメータにテンプレート埋込変数名を記述します。テンプレート埋込変数名を使用しない場合、代入値管理で登録した変数や該当ファイルのパスを記述します。</p>
<p>※ファイル名にスペースなどが含まれている場合、適切にクォーテーションで囲まないと、作業実行時にエラーになる場合があります。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Exp)</p>
<p><strong>Playbookの記述 登録内容</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>テンプレート埋込変数名</strong></p></th>
<th class="head"><p><strong>テンプレート素材</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>TPF_hosts</p></td>
<td><p>/etc/hosts</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><ul class="simple">
<li><p>template: src='{{△TPF_hosts△}}' dest=/etc/hosts</p></li>
</ul>
</div></blockquote>
<p>△:半角スペース</p>
<p>_destはファイル名も記
述してください。ファイル名の指定がない場合、登録したﾃﾝﾌﾟﾚｰﾄ素材のファ
イル名の前にITAの管理番号が付与された名前のファイル名で処理されます。</p>
<p>たとえば、dest=/etc/ とした場合、ファイル名は/etc/10桁の数値
_hostsとなります。</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<ol class="arabic simple" start="2">
<li><p>対話ファイルの記述</p></li>
</ol>
<p>対話ファイルに記述する場合、テンプレート埋込変数名を記述します。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Exp)</p>
<p><strong>対話ファイルの記述</strong></p>
<ul class="simple">
<li><p>expect: '{{△__loginuser__△}}&#64;{{△__loginhostname__△}}'</p></li>
</ul>
<p>exec: 'scp △ITAユーザ&#64;ITAホスト名:{{△TPF_hosts△}}△転送先'</p>
<ul class="simple">
<li><p>expect:</p></li>
</ul>
<p>'p
assword:'　　　　　　　　　　　　　　　　　　　　　　　　<strong>登録内容</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>テンプレート埋込変数名</strong></p></th>
<th class="head"><p><strong>テンプレート素材</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>TPF_hosts</p></td>
<td><p>/etc/hosts</p></td>
</tr>
</tbody>
</table>
<p>exec: ITAユーザのパスワード'</p>
<p>△:半角スペース</p>
<p>転送先はファイル名も記述してくだ
さい。ファイル名の指定がない場合、登録し<strong>た</strong>ファイル素材のファ
イル名の前にITAの管理番号が付与された名前のファイル名で処理されます。</p>
<p>例えば、転送先=/etc/
とした場合、ファイル名は/etc/10桁の数字_hostsとなります。</p>
<p>{{△TPF_hosts△}}は実行時に転送元の絶対パスに置換されます。</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<p>内部の処理でテンプレートの変数定義を読み取り、「<a class="reference external" href="#代入値自動登録設定">5.3.9
代入値自動登録設定</a>」や「5.3.11<a class="reference external" href="#代入値管理">代入値管理</a>」で具体値が登録可能になります。</p>
<p>読み取りのタイミングはリアルタイムではないので、「<a class="reference external" href="#代入値自動登録設定">5.3.9
代入値自動登録設定</a>」や「5.3.11<a class="reference external" href="#代入値管理">代入値管理</a>」で変数が扱えるまでに<em>時間がかかる※1</em>場合があります。</p>
<p>※1 読み取りのタイミングは「 <a class="reference external" href="#_起動周期の変更">7.2
メンテナンス方法について</a>」に記載していますので、そちらをご参照ください。</p>
</section>
<section id="id165">
<h3>ファイル管理<a class="headerlink" href="#id165" title="この見出しへのパーマリンク">¶</a></h3>
<ol class="arabic">
<li><p>[ファイル管理]では、Playbook内で定義している各モジュールで使用するファイルとファイル埋め込み変数の登録／更新／廃止を行います。</p>
<p>ファイル管理でファイル素材を登録しておくことで、Playbook内で定義している各モジュールで使用するファイルをファイル埋め込み変数名で指定することが出来ます。</p>
<a class="reference internal image-reference" href="../../../_images/image19.png"><img alt="../../../_images/image19.png" src="../../../_images/image19.png" style="width: 6.20054in; height: 2.75357in;" /></a>
</li>
</ol>
<p><strong>図5.2-9サブメニュー画面（ファイル管理）</strong></p>
<blockquote>
<div><p><strong>(2)</strong>
「登録」-「登録開始」ボタンより、ファイル管理情報の登録を行います。</p>
</div></blockquote>
<a class="reference internal image-reference" href="../../../_images/image20.png"><img alt="../../../_images/image20.png" src="../../../_images/image20.png" style="width: 5.65318in; height: 0.81937in;" /></a>
<p>図 5.2-10 登録画面（ファイル管理）</p>
<blockquote>
<div><p><strong>(3)</strong> 登録画面の項目は以下のとおりです。</p>
</div></blockquote>
<p><strong>表 5.2-6 登録画面項目一覧（ファイル管理）</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><ul class="simple">
<li></li>
</ul>
<p><em>項目*</em></p>
</th>
<th class="head"><p><strong>説明</strong></p></th>
<th class="head"><p>**
入
力
**</p>
<p>**
必
須
**</p>
</th>
<th class="head"><p><strong>入
力形
式</strong></p></th>
<th class="head"><ul class="simple">
<li></li>
</ul>
<p><em>制約事項*</em></p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ファイ
ル埋込</p>
<p>変数名</p>
</td>
<td><p>各モジュールのパラメータ
に埋め込む変数名を入力します。</p>
<p>変数名は、
「CPF_****」形式で入力します。</p>
<p>***
<a href="#id166"><span class="problematic" id="id167">*</span></a>：半角英数字とアンダースコア（
_
）が利用可能です。(最
小値:1バイト、最大値:128バイト)</p>
</td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><p>説明欄記
載のとおり</p></td>
</tr>
<tr class="row-odd"><td><p>ファイ
ル素材</p></td>
<td><p>各モジュールで使用する
ファイルをアップロードします。</p></td>
<td><p>○</p></td>
<td><p>ファ
イル
登録</p></td>
<td><p>最大サイ
ズ4Gバイト</p></td>
</tr>
<tr class="row-even"><td><p>備考</p></td>
<td><p>自由記述欄です。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大長
4000バイト</p></td>
</tr>
</tbody>
</table>
<p>「登録」の前に、「ファイル素材」を「事前アップロード（①）」してください。「アップロード状況（②）」にPlaybookのファイル名が表示されたのを確認してから、「登録」ボタンを押してください。</p>
<a class="reference internal image-reference" href="../../../_images/image18.png"><img alt="../../../_images/image18.png" src="../../../_images/image18.png" style="width: 2.60802in; height: 1.55251in;" /></a>
<ol class="arabic simple">
<li><p>Playbookの記述</p></li>
</ol>
<blockquote>
<div><p>プレイブックの各モジュールに記述する場合、ファイル埋め込み変数を記述します。</p>
<p>※ファイル名にスペースなどが含まれている場合、適切にクォーテーションで囲まないと、作業実行時にエラーになる場合があります。</p>
</div></blockquote>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>e.g)</p>
<p><strong>Playbookの記述</strong> 登録内容</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>ファイル埋込変数名</strong></p></th>
<th class="head"><p><strong>ファイル素材</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CPF_hosts</p></td>
<td><p>hosts</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>-copy: src='{{△CPF_hosts△}}' dest=/etc/hosts</p>
</div></blockquote>
<p>△:半角スペース</p>
<p>destはファイル名も記述
してください。ファイル名の指定がない場合、登録したファイル素材のファ
イル名の前にITAの管理番号が付与された名前のファイル名で処理されます。</p>
<p>たとえば、dest=/etc/
とした場合、ファイル名は/etc/10桁の数字_hostsとなります。</p>
<p>-unarchive src={{△CPF_tool_tgz△}} dest=/usr/local/bin</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>ファイル埋込変数名</strong></p></th>
<th class="head"><p><strong>ファイル素材</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CPF_tool_tgz</p></td>
<td><p>tool.tgz</p></td>
</tr>
</tbody>
</table>
<p>△:半角スペース</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<ol class="arabic simple" start="2">
<li><p>対話ファイルの記述</p></li>
</ol>
<blockquote>
<div><p>対話ファイルに記述する場合、ファイル埋め込み変数を記述します。</p>
</div></blockquote>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>e.g)</p>
<p><strong>対話ファイルの記述</strong> 登録内容</p>
<ul class="simple">
<li><p>expect: '{{△__loginuser__△}}&#64;{{△__loginhostname__△}}'</p></li>
</ul>
<p>exec: 'scp △ITAユーザ&#64;ITAホスト名:{{△CPF_hosts△}}△転送先'</p>
<ul class="simple">
<li><p>expect: 'password:'</p></li>
</ul>
<p>exec: ITAユーザのパスワード'</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>ファイル埋込変数名</strong></p></th>
<th class="head"><p><strong>ファイル素材</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CPF_hosts</p></td>
<td><p>hosts</p></td>
</tr>
</tbody>
</table>
<p>△:半角スペース</p>
<p>転送先はファイル名も記述
してください。ファイル名の指定がない場合、登録したファイル素材のファ
イル名の前にITAの管理番号が付与された名前のファイル名で処理されます。</p>
<p>たとえば、転送先=/etc/
とした場合、ファイル名は/etc/10桁の数字_hostsとなります。</p>
<p>{{△CPF_hosts△}}は実行時に転送元の絶対パスに置換されます。</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
</tr>
</tbody>
</table>
<ol class="arabic">
<li><p class="rubric" id="id168">収集インターフェース情報</p>
<p>[収集インターフェース情報]では、収集機能で利用するITAの標準RESTAPIを利用する為、RESTAPIアクセス用の接続インターフェース情報の更新を行います。</p>
<p>詳細は、別紙「Exastro-ITA_利用手順マニュアル_収集機能」を参照。</p>
</li>
<li><p class="rubric" id="id169">収集項目値管理</p>
<p>[収集項目値管理]では、収集対象項目とパラメータシートの項目の紐付設定を行います。</p>
<p>詳細は、別紙「Exastro-ITA_利用手順マニュアル_収集機能」を参照。</p>
</li>
<li><p>一覧/更新のメニューIDまたは、メニュー名称のリンクをクリックすると、対象メニューへ遷移する。</p></li>
</ol>
<p>　　　　　<a class="reference internal" href="../../../_images/image21.png"><img alt="image3" src="../../../_images/image21.png" style="width: 6.06889in; height: 1.28747in;" /></a></p>
<p>　　　　　　図 5.2‑13サブメニュー画面（収集項目値管理）</p>
</section>
</section>
<section id="ansibel-legacy-legacy-role-pioneer">
<h2><span class="section-number">14.3. </span>Ansibel-Legacy／Legacy Role／Pioneer　コンソール<a class="headerlink" href="#ansibel-legacy-legacy-role-pioneer" title="この見出しへのパーマリンク">¶</a></h2>
<blockquote>
<div><p>Ansibel-Legacy／Legacy Role／Pioneer　コンソールの操作です。</p>
</div></blockquote>
<section id="os">
<h3>OS種別マスタ<a class="headerlink" href="#os" title="この見出しへのパーマリンク">¶</a></h3>
<ol class="arabic">
<li><dl class="simple">
<dt>[OS種別マスタ]</dt><dd><p>画面では、ITAのPioneerより操作対象となる機器のOS種別を管理します。</p>
</dd>
</dl>
<p>※本メニューはAnsible-Pioneer コンソールにのみ存在します。</p>
</li>
</ol>
<a class="reference internal image-reference" href="../../../_images/image22.png"><img alt="../../../_images/image22.png" src="../../../_images/image22.png" style="width: 6.08053in; height: 2.91359in;" /></a>
<p>図 5.3‑1サブメニュー画面（ＯＳ種別マスタ）</p>
<ol class="arabic simple" start="10">
<li><p>「登録」-「登録開始」ボタンより、OS情報の登録を行います。</p></li>
</ol>
<a class="reference internal image-reference" href="../../../_images/image23.png"><img alt="../../../_images/image23.png" src="../../../_images/image23.png" style="width: 5.80331in; height: 0.80347in;" /></a>
<p>図 5.3‑2 登録画面（ＯＳ種別マスタ）</p>
<ol class="arabic" start="11">
<li><dl class="simple">
<dt>一覧/更新の対話素材ファイル集ボタンをクリックすると、対象の<a href="#id170"><span class="problematic" id="id171">`</span></a>5.3.6</dt><dd><p>対話素材ファイル集 &lt;l&gt;`__へ遷移する。</p>
</dd>
</dl>
<a class="reference internal image-reference" href="../../../_images/image24.png"><img alt="../../../_images/image24.png" src="../../../_images/image24.png" style="width: 5.81353in; height: 1.20265in;" /></a>
</li>
</ol>
<p>図 5.3‑3サブメニュー画面（ＯＳ種別マスタ）</p>
<ol class="arabic simple" start="12">
<li><p>登録画面の項目一覧は以下のとおりです。</p></li>
</ol>
<p>表 5.3‑2　登録画面項目一覧（ＯＳ種別マスタ）</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>**
項
目
**</p></th>
<th class="head"></th>
<th class="head"><p><strong>説明</strong></p></th>
<th class="head"><p>**
入
力
**</p>
<p>**
必
須
**</p>
</th>
<th class="head"><p><strong>入力
形式</strong></p></th>
<th class="head"><ul class="simple">
<li></li>
</ul>
<p><em>制約事項*</em></p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>OS
種
別
ID</p></td>
<td></td>
<td><p>登録情報を識別する
一意のＩＤが自動入力されます</p></td>
<td><p>○</p></td>
<td><p>自
動入力</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>OS
種
別
名</p></td>
<td></td>
<td><p>任意の機器名称を入力します</p></td>
<td><p>○</p></td>
<td><p>手
動入力</p></td>
<td><p>最大
長256バイト</p></td>
</tr>
<tr class="row-even"><td><p>機
種
別</p></td>
<td><p>S
V</p></td>
<td><p>機器種別が
サーバの場合「●」を選択します</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>リス
ト選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td></td>
<td><p>N
W</p></td>
<td><p>機器種別がネットワー
ク機器の場合「●」を選択します</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>リス
ト選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td></td>
<td><p>S
T</p></td>
<td><p>機器種別がストレー
ジ機器の場合「●」を選択します</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>リス
ト選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>備
考</p></td>
<td></td>
<td><p>自由記述欄です</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手
動入力</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="movement">
<h3>Movement一覧<a class="headerlink" href="#movement" title="この見出しへのパーマリンク">¶</a></h3>
<ol class="arabic">
<li><p>[Movement一覧]ではMovement名の登録／更新／廃止を行います。</p>
<a class="reference internal image-reference" href="../../../_images/image25.png"><img alt="../../../_images/image25.png" src="../../../_images/image25.png" style="width: 5.91875in; height: 2.79653in;" /></a>
</li>
</ol>
<blockquote>
<div><p>図 5.3‑4サブメニュー画面（Movement一覧）</p>
</div></blockquote>
<ol class="arabic" start="2">
<li><div class="line-block">
<div class="line">「登録」-「登録開始」ボタンより、Movement情報の登録を行います。
| <a class="reference internal" href="../../../_images/image26.png"><img alt="image4" src="../../../_images/image26.png" style="width: 5.91875in; height: 0.63536in;" /></a></div>
</div>
</li>
</ol>
<p>図 5.3‑5登録画面（Movement一覧）</p>
<ol class="arabic">
<li></li>
<li></li>
<li><dl class="simple">
<dt>Movement-Playbook紐付(Movement-対話種別紐付、Movement-ロール紐付)ボタンをクリックすると、対象の<a href="#id172"><span class="problematic" id="id173">`</span></a>5.3.7</dt><dd><p>Movement-Playbook紐付（Movement-対話種別紐付、Movement-ロール紐付） &lt;l&gt;`__へ遷移する。</p>
</dd>
</dl>
<a class="reference internal image-reference" href="../../../_images/image27.png"><img alt="../../../_images/image27.png" src="../../../_images/image27.png" style="width: 5.97831in; height: 1.1875in;" /></a>
</li>
</ol>
<blockquote>
<div><p>図 5.3‑6サブメニュー画面（Movement一覧）</p>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>登録画面の項目一覧は以下のとおりです。</p></li>
</ol>
<p>表 5.3‑2登録画面項目一覧（Movement一覧）</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>項目</strong></p></th>
<th class="head"><p><strong>説明</strong></p></th>
<th class="head"><p>**
入
力
**</p>
<p>**
必
須
**</p>
</th>
<th class="head"><p><strong>入
力形
式</strong></p></th>
<th class="head"><ul class="simple">
<li></li>
</ul>
<p><em>制約事項*</em></p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>M
ovement名</p></td>
<td><p>Movementの名称を入力します。</p></td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><p>最大
長256バイト</p></td>
</tr>
<tr class="row-odd"><td><p>遅延
タイマー</p></td>
<td><p>Movementが指定期間遅
延した場合にステータスを遅延と
して警告表示したい場合に指定期
間(1～)を入力します。(単位:分)</p>
<p>未
入力の場合は警告表示しません。</p>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>ホスト
指定形式</p></td>
<td><p>特別にIP
アドレスで表現しないホストを指
定したい場合に「ホスト名」を選
択します。通常はIPが推奨です。</p></td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>v
irtualenv</p></td>
<td><p>Ansibleサーバー内にvirtu
alenvで構築したansible実行環境
で作業実行したい場合、virtuale
nvのフルパスを入力して下さい。</p>
<p>virtualen
v環境が存在しなかったりvirtual
env環境内にansibleがインストー
ルされていない場合、作業実行時
に「想定外エラー」となります。</p>
<p>未入力の場合はansibleサーバ
ーにインストールされているans
ible環境で作業実行を行います。</p>
<div class="line-block">
<div class="line">Exp)</div>
<div class="line">/virtualenv配下にans</div>
</div>
<p>ible11.1.0という名前でvirtuale
nv環境を作成した場合のvirtuale
nvのフルパスは下記となります。</p>
<p>virtualenv環境の作成</p>
<blockquote>
<div><div class="line-block">
<div class="line">cd　/virtualenv</div>
<div class="line">virtualenv ansible11.1.0</div>
</div>
<div class="line-block">
<div class="line">virtualenvのフルパス</div>
<div class="line">/virtualenv/ansible11.1.0</div>
</div>
</div></blockquote>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大
長512バイト</p></td>
</tr>
<tr class="row-even"><td><p>並
列実行数</p>
<p>※
Pioneer
のMovemen
t一覧での
み表示さ
れます。</p>
</td>
<td><p>Ansible-pl
aybookコマンドのオプションパラ
メータ「forks」を入力します。</p>
<p>■未入力時の振る舞いについて</p>
<p>サーバの設定
ファイル(/etc/ansible.conf)の
内容がデフォルト値となります。</p>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>NUL
Lまたは整数</p></td>
</tr>
<tr class="row-odd"><td><p>WinRM接続</p></td>
<td><p>対象ホストがWindowsServe
rの場合に、「●」を選択します。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>ヘ
ッダーセ
クション</p>
<p>※
Pioneer
のMovemen
t一覧では
表示され
ません。</p>
</td>
<td><p>ITA
が自動生成する親Playbookの先頭
からtasksまたはrolesセクション
までのセクションを編集します。</p>
<p>未入
力の場合は、以下を適用します。</p>
<p>Ansible:</p>
<ul class="simple">
<li><p>hosts: all</p></li>
</ul>
<p>remote_user: \&quot;{{
__loginuser__ }}\&quot;</p>
<p>gather_facts: no</p>
<p>become: yes</p>
<p>Ansible Automation Controller</p>
<ul class="simple">
<li><p>hosts: all</p></li>
</ul>
<p>　　　gather_facts: no</p>
<p>become: yes</p>
<p>※winrm接続の場合は become:
yesは適用しません。</p>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大
長512バイト</p></td>
</tr>
<tr class="row-odd"><td><p>オプ
ションパ
ラメータ
※
Pioneer
のMovemen
t一覧では
表示され
ません。</p></td>
<td><p>Movement固有のオプ
ションパラメータを入力します。</p>
<p>実行エンジンがAnsible
Coreの場合はan
sible-playbookコマンドのオプシ
ョンパラメータ、実行エンジンが
Ansible Core
以外の場合はジョブテンプレ
ートのパラメータを入力します。</p>
<p>オプショ
ンパラメータの詳細については、
<em>8.3オプションパラメータ一
覧</em>」覧を参照してください。</p>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大
長512バイト</p></td>
</tr>
<tr class="row-even"><td><p>V
irtualenv</p>
<p><a href="#id174"><span class="problematic" id="id175">**</span></a>※*
<a href="#id176"><span class="problematic" id="id177">*</span></a>実行エ
ンジンが
AnsibleTo
werの場合
に表示さ
れます。</p>
</td>
<td><p>virtualenvで構築した
ansible実行環境を選択します。</p>
<p>未選択の場合は Ansible
Automation Controller
インストール時にインストー
ルされた仮想環境を使用します。</p>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>リ
スト
選択</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>実行
環境**
※*
<a href="#id178"><span class="problematic" id="id179">*</span></a>実行エ
ンジンが
Ansible
A
utomation
c
ontroller
の場合
に表示さ
れます。</p></td>
<td><p>Ansible Automation
Controllerサーバに構築されてい
る実行環境が表示されています。</p>
<p>作業
実行する実行環境を選択します。</p>
<p>未選択
の場合は、デフォルト「Default
execution
environment」が使用されます。</p>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>リ
スト
選択</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>An
sible.cfg</p></td>
<td><p>作業実行時に使用するans
ible.cfgをアップロードします。</p>
<p>未アップロードの場合
は、デフォルトが使用されます。</p>
<p>また
、ロールパッケージ管理でアップ
ロードされているzipファイルに
ansible.cfgが含まれている場合
は、この項目でアップロードした
ansible.cfgで上書きされます。</p>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>ファ
イル
選択</p></td>
<td><p>最大サイ
ズ4Gバイト</p></td>
</tr>
<tr class="row-odd"><td><p>備考</p></td>
<td><p>自由記述欄です。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大長
4000バイト</p></td>
</tr>
</tbody>
</table>
</section>
<section id="playbook-ansible-legacy">
<h3>Playbook素材集（Ansible-Legacyのみ）<a class="headerlink" href="#playbook-ansible-legacy" title="この見出しへのパーマリンク">¶</a></h3>
<ol class="arabic">
<li><div class="line-block">
<div class="line">[Playbook素材集]ではユーザーが作成したPlaybookの登録／更新／廃止を行います。
| ※本メニューはAnsible-Legacy コンソールにのみ存在します。</div>
</div>
<p>Playbookの記述など関しては、「
<em>6.1Playbook（Ansible-Legacy）の記述</em>」を参照してください。</p>
<a class="reference internal image-reference" href="../../../_images/image28.png"><img alt="../../../_images/image28.png" src="../../../_images/image28.png" style="width: 6.22721in; height: 2.78024in;" /></a>
</li>
</ol>
<p><strong>図 5.3‑7サブメニュー画面（Playbook素材集）</strong></p>
<ol class="arabic" start="13">
<li><p>「登録」-「登録開始」ボタンより、Playbookの登録を行います。</p>
<a class="reference internal image-reference" href="../../../_images/image29.png"><img alt="../../../_images/image29.png" src="../../../_images/image29.png" style="width: 5.99563in; height: 0.89595in;" /></a>
</li>
</ol>
<p>図 5.3‑8 登録画面（Playbook素材集）</p>
<ol class="arabic simple" start="14">
<li><dl class="simple">
<dt>Movement-Playbook紐付ボタンをクリックすると、対象の<a href="#id180"><span class="problematic" id="id181">`</span></a>5.3.7</dt><dd><p>Movement-Playbook紐付（Movement-対話種別紐付、Movement-ロール紐付） &lt;l&gt;`__へ遷移する。</p>
</dd>
</dl>
</li>
</ol>
<a class="reference internal image-reference" href="../../../_images/image30.png"><img alt="../../../_images/image30.png" src="../../../_images/image30.png" style="width: 6.16965in; height: 1.25024in;" /></a>
<p>図 5.3‑9 サブメニュー画面（Playbook素材集）</p>
<ol class="arabic simple" start="15">
<li><p>登録画面の項目一覧は以下のとおりです。</p></li>
</ol>
<p><strong>表 5.3‑3登録画面項目一覧（Playbook素材集）</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>項目</strong></p></th>
<th class="head"><p><strong>説明</strong></p></th>
<th class="head"><p>**
入
力
**</p>
<p>**
必
須
**</p>
</th>
<th class="head"><p><strong>入力
形式</strong></p></th>
<th class="head"><p><strong>制約事項</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>プレイ
ブック素材名</p></td>
<td><p>ITAで
管理するプレイブック
素材名を入力します。</p></td>
<td><p>○</p></td>
<td><p>手
動入力</p></td>
<td><p>最
大長256バイト</p></td>
</tr>
<tr class="row-odd"><td><p>プレ
イブック素材</p></td>
<td><p>作成し
たPlaybookファイルを
アップロードします。</p>
<p>アップロードす
るPlaybookファイルは
文字コードがUTF-8のB
OMで作成して下さい。</p>
<p>文
字コードがUTF-8のBOM
なし以外のPlaybookフ
ァイルはアップロード
でエラーになります。</p>
</td>
<td><p>○</p></td>
<td><p>ファイ
ル選択</p></td>
<td><p>最大サ
イズ4Gバイト</p></td>
</tr>
<tr class="row-even"><td><p>備考</p></td>
<td><p>自由記述欄です。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手
動入力</p></td>
<td><p>最大
長4000バイト</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>「登録」の前に、「プレイブック素材」を「事前アップロード（①）」してください。「アップロード状況（②）」にPlaybookのファイル名が表示されたのを確認してから、「登録」ボタンを押してください。</p>
<a class="reference internal image-reference" href="../../../_images/image31.png"><img alt="../../../_images/image31.png" src="../../../_images/image31.png" style="width: 1.81218in; height: 0.98027in;" /></a>
<p>内部の処理でPlaybookファイル内に定義している変数を抜出します。抜出した変数は、「5.3.11<a class="reference external" href="#代入値管理">代入値管理</a>」や「<em>5.3.9代入値自動登録設定</em>」で具体値の登録が可能になります。</p>
<p>抜出するタイミングはリアルタイムではありませんので、「5.3.12<a class="reference external" href="#代入値管理">代入値管理</a>」や「<em>5.3.9代入値自動登録設定</em>」で変数が扱えるまでに<em>時間がかかる※1</em>場合があります。</p>
<p>※1抜出のタイミングは「<a class="reference external" href="#_起動周期の変更">7.2メンテナンス方法について</a>」に記載していますので、そちらをご参照ください</p>
</div></blockquote>
</section>
<section id="id182">
<h3>ロールパッケージ管理（Ansible-Legacy Roleのみ）<a class="headerlink" href="#id182" title="この見出しへのパーマリンク">¶</a></h3>
<p><strong>(1)</strong>
ユーザーが作成したロールパッケージファイルの登録／更新／廃止を行います。</p>
<p>※本メニューはAnsible-Legacy Role コンソールにのみ存在します。</p>
<p>ロールパッケージファイルは、「roles」のある階層のディレクトリをzipにて圧縮したものを登録してください。ロールパッケージディレクトリ構成などは「<a class="reference external" href="#ロールパッケージansible-legacy-roleの記述">ロールパッケージ（Ansible-Legacy
Role）の記述</a>」を参照してください。</p>
<a class="reference internal image-reference" href="../../../_images/image32.png"><img alt="../../../_images/image32.png" src="../../../_images/image32.png" style="width: 5.81384in; height: 2.59356in;" /></a>
<p><strong>図 5.3‑10サブメニュー画面（ロールパッケージ管理）</strong></p>
<p><strong>(2)</strong>
「登録」-「登録開始」ボタンより、ロールパッケージ情報の登録を行います。</p>
<a class="reference internal image-reference" href="../../../_images/image33.png"><img alt="../../../_images/image33.png" src="../../../_images/image33.png" style="width: 5.35466in; height: 0.78035in;" /></a>
<p><strong>図 5.3-11 登録画面（ロールパッケージ管理）</strong></p>
<p><strong>(3)</strong> 一覧/更新のMovement-ロール紐付ボタンをクリックすると、<a class="reference external" href="l">5.3.7
Movement-Playbook紐付（Movement-対話種別紐付、Movement-ロール紐付）</a>へ遷移します。</p>
<a class="reference internal image-reference" href="../../../_images/image34.png"><img alt="../../../_images/image34.png" src="../../../_images/image34.png" style="width: 6.55395in; height: 1.29253in;" /></a>
<p><strong>図 5.3‑12サブメニュー画面（ロールパッケージ管理）</strong></p>
<p><strong>(4)</strong> 登録画面の項目一覧は以下のとおりです。</p>
<p><strong>表 5.3-4 登録画面項目一覧（ロールパッケージ管理）</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>項目</strong></p></th>
<th class="head"><p><strong>説明</strong></p></th>
<th class="head"><p>**
入
力
**</p>
<p>**
必
須
**</p>
</th>
<th class="head"><p><strong>入
力形
式</strong></p></th>
<th class="head"><ul class="simple">
<li></li>
</ul>
<p><em>制約事項*</em></p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ロ
ールパッ
ケージ名</p></td>
<td><p>ITAで管理するロ
ールパッケージ名を入力します。</p></td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><p>最大
長256バイト</p></td>
</tr>
<tr class="row-odd"><td><p>ロールパ
ッケージ
ファイル</p></td>
<td><p>作成
したロールパッケージファイル(
zip形式)をアップロードします。</p>
<p>アップロードするロール
パッケージファイルに含まれるPl
aybookファイルは文字コードがUT
F-8でBOMなしで作成して下さい。</p>
<p>UTF-8でBOMなし以外の
Playbookファイルが含まれてい
ると登録時にエラーとなります。</p>
<p>詳しくは、6.3ロ
ールパッケージ（Ansible-Legacy
Role）の記述を参照下さい。</p>
</td>
<td><p>○</p></td>
<td><p>ファ
イル
選択</p></td>
<td><p>最大サイ
ズ4Gバイト</p></td>
</tr>
<tr class="row-even"><td><p>備考</p></td>
<td><p>自由記述欄です。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大長
4000バイト</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>「登録」の前に、「ロールパッケージファイル」を「事前アップロード（①）」してください。「アップロード状況（②）」にロールパッケージファイル名が表示されたのを確認してから、「登録」ボタンを押してください。</p>
<a class="reference internal image-reference" href="../../../_images/image18.png"><img alt="../../../_images/image18.png" src="../../../_images/image18.png" style="width: 2.60802in; height: 1.55251in;" /></a>
<p>内部の処理でロールパッケージ内に定義している変数を取り出します。取り出した変数は、「<em>5.3.9代入値自動登録設定</em>」や「<em>5.3.11代入値管理</em>」で具体値の登録が可能になります。</p>
<p>抜出するタイミングはリアルタイムではありませんので、「5.3.11<a class="reference external" href="#代入値管理">代入値管理</a>」や「<em>5.3.9代入値自動登録設定</em>」で変数が扱えるまでに<em>時間がかかる※1</em>場合があります。</p>
<p>※1 抜出のタイミングは「<a class="reference external" href="#_起動周期の変更">7.2
起動周期の変更</a>」に記載していますので、そちらをご参照ください</p>
</div></blockquote>
</section>
<section id="id183">
<h3>対話種別リスト（Ansible-Pioneerのみ）<a class="headerlink" href="#id183" title="この見出しへのパーマリンク">¶</a></h3>
<ol class="arabic">
<li><p>[対話種別リスト]では、対話種別の登録／更新／廃止を行います。</p>
<p>※本メニューはAnsible-Pioneer コンソールにのみ存在します。</p>
<p>Ansible-Pioneerでは、「OS種別」ごとの差異を対話ファイルごとに定義し、同一目的の対話ファイルを「対話種別」として纏めて機器差分を吸収(抽象化)します。</p>
<a class="reference internal image-reference" href="../../../_images/image35.png"><img alt="../../../_images/image35.png" src="../../../_images/image35.png" style="width: 6.25388in; height: 2.78024in;" /></a>
</li>
</ol>
<p><strong>図 5.3‑13サブメニュー画面（対話種別リスト）</strong></p>
<ol class="arabic simple" start="2">
<li><p>「登録」-「登録開始」ボタンより、オペレーション情報の登録を行います。</p></li>
</ol>
<a class="reference internal image-reference" href="../../../_images/image36.png"><img alt="../../../_images/image36.png" src="../../../_images/image36.png" style="width: 5.38086in; height: 0.9422in;" /></a>
<p>図 5.3‑14登録画面（対話種別リスト）</p>
<ol class="arabic">
<li></li>
<li></li>
<li><p>一覧/更新のMovement-対話種別紐付ボタンをクリックすると、対象の<a class="reference external" href="l">5.3.7
Movement-Playbook紐付（Movement-対話種別紐付、Movement-ロール紐付）</a>へ遷移します。対話素材ファイル集ボタンをクリックすると、対象の<a class="reference external" href="#_対話ファイル素材集（Ansible-Pioneerのみ）">5.3.6
対話素材ファイル集</a>へ遷移します。</p>
<a class="reference internal image-reference" href="../../../_images/image37.png"><img alt="../../../_images/image37.png" src="../../../_images/image37.png" style="width: 6.06944in; height: 1.17301in;" /></a>
</li>
</ol>
<p><strong>図 5.3‑15サブメニュー画面（対話種別リスト）</strong></p>
<ol class="arabic simple" start="3">
<li><p>登録画面の項目一覧は以下のとおりです。</p></li>
</ol>
<p><strong>表 5.3‑5　登録画面項目一覧（対話種別リスト）</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>項目</strong></p></th>
<th class="head"><p><strong>説明</strong></p></th>
<th class="head"><p>**
入
力
**</p>
<p>**
必
須
**</p>
</th>
<th class="head"><p><strong>入
力形
式</strong></p></th>
<th class="head"><ul class="simple">
<li></li>
</ul>
<p><em>制約事項*</em></p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>対
話種別名</p></td>
<td><p>対話種別名を入力します</p></td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td><p>最大
長256バイト</p></td>
</tr>
<tr class="row-odd"><td><p>備考</p></td>
<td><p>自由記述欄です。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大長
4000バイト</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id184">
<h3>対話ファイル素材集（Ansible-Pioneerのみ）<a class="headerlink" href="#id184" title="この見出しへのパーマリンク">¶</a></h3>
<ol class="arabic">
<li><p>[対話ファイル素材集]では、ユーザーが作成した対話ファイルの登録／更新／廃止を行います。</p>
<p>※本メニューは、Ansible-Pioneer コンソールにのみ存在します。</p>
</li>
</ol>
<ol class="arabic" start="16">
<li><dl class="simple">
<dt>対話ファイルの記述などに関しては、「</dt><dd><p><em>6.2対話ファイル（Ansible-Pioneer）の記述</em>」を参照してください。</p>
</dd>
</dl>
<p>「対話種別」と「OS種別」の組み合わせごとに対話ファイルを登録します。</p>
<p>１つの「対話種別」で複数のOSに対応させたい場合は、同じ「対話種別」で、「OS種別」それぞれについて対話ファイルを登録してください。</p>
<a class="reference internal image-reference" href="../../../_images/image38.png"><img alt="../../../_images/image38.png" src="../../../_images/image38.png" style="width: 6.4939in; height: 2.90025in;" /></a>
</li>
</ol>
<p><strong>図 5.3‑16サブメニュー画面（対話ファイル素材集）</strong></p>
<ol class="arabic simple" start="2">
<li><p>「登録」-「登録開始」ボタンより、対話ファイル素材の登録を行います。</p></li>
</ol>
<a class="reference internal image-reference" href="../../../_images/image36.png"><img alt="../../../_images/image36.png" src="../../../_images/image36.png" style="width: 5.19507in; height: 0.90966in;" /></a>
<p>図 5.3‑17 登録画面（対話ファイル素材集）</p>
<ol class="arabic">
<li></li>
<li></li>
<li></li>
<li><p>一覧/更新の対話種別のリンクをクリックすると、対象の<a class="reference external" href="l">5.3.5
対話種別リスト</a>へ遷移する。</p>
<p>また、os種別のリンクをクリックすると、対象の<a class="reference external" href="l">5.3.1
OS種別マスタ</a>へ遷移する。</p>
<a class="reference internal image-reference" href="../../../_images/image39.png"><img alt="../../../_images/image39.png" src="../../../_images/image39.png" style="width: 6.2281in; height: 1.2785in;" /></a>
</li>
</ol>
<p><strong>図 5.3‑18サブメニュー画面（対話ファイル素材集）</strong></p>
<ol class="arabic simple" start="3">
<li><p>登録画面の項目一覧は以下のとおりです。</p></li>
</ol>
<p><strong>表 5.3‑6　登録画面項目一覧（対話ファイル素材集）</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>項目</strong></p></th>
<th class="head"><p><strong>説明</strong></p></th>
<th class="head"><p>**
入
力
**</p>
<p>**
必
須
**</p>
</th>
<th class="head"><p><strong>入
力形
式</strong></p></th>
<th class="head"><ul class="simple">
<li></li>
</ul>
<p><em>制約事項*</em></p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>対話種別</p></td>
<td><p>対話種別
リストに登録されている対話種別
が表示されます。登録する対話フ
ァイルの対話種別を選択します。</p></td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>OS種別</p></td>
<td><p>OS
種別マスタに登録されているOS種
別が表示されます。登録する対話
ファイルのOS種別を選択します。</p></td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>対話ファ
イル素材</p></td>
<td><div class="line-block">
<div class="line"><br /></div>
</div>
<p>対話種別とOS種別に対応する対話
ファイルをアップロードします。
| アップロードす
る対話ファイルは文字コードがUT
F-8のBOMなしで作成して下さい。</p>
<p>文字コードがUTF-8の
BOMなし以外の対話ファイルはア
ップロードでエラーになります。</p>
</td>
<td><p>○</p></td>
<td><p>ファ
イル
登録</p></td>
<td><p>最大サイ
ズ4Gバイト</p></td>
</tr>
<tr class="row-odd"><td><p>備考</p></td>
<td><p>自由記述欄です。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大長
4000バイト</p></td>
</tr>
</tbody>
</table>
<p>「登録」の前に、「対話ファイル」を「事前アップロード（①）」してください。「アップロード状況（②）」に対話ファイルのファイル名が表示されたのを確認してから、「登録」ボタンを押してください。</p>
<p>内部の処理で対話ファイル内に定義している変数を取り出します。取り出した変数は、「<em>5.3.9代入値自動登録設定</em>」や「<em>5.3.11代入値管理</em>」で具体値の登録が可能になります。</p>
<blockquote>
<div><p>抜出するタイミングはリアルタイムではありませんので、「5.3.11<a class="reference external" href="#代入値管理">代入値管理</a>」や「<em>5.3.9代入値自動登録設定</em>」で変数が扱えるまでに<em>時間がかかる※1</em>場合があります。</p>
<p>※1 抜出のタイミングは「<a class="reference external" href="l">7.2
メンテナンス方法について</a>」に記載していますので、そちらをご参照ください</p>
</div></blockquote>
</section>
<section id="movement-playbook-movement-movement">
<h3>Movement-Playbook紐付（Movement-対話種別紐付、Movement-ロール紐付）<a class="headerlink" href="#movement-playbook-movement-movement" title="この見出しへのパーマリンク">¶</a></h3>
<p>※メニュー名はAnsible-LegacyはMovement-Playbook紐付、Ansible-Pioneer
はMovement-対話種別紐付、Ansible-LegacyRoleはMovement-ロール紐付です。</p>
<ol class="arabic">
<li><p>Movementで実行する素材の登録／更新／廃止を行います。</p>
<a class="reference internal image-reference" href="../../../_images/image40.png"><img alt="../../../_images/image40.png" src="../../../_images/image40.png" style="width: 6.16053in; height: 2.76691in;" /></a>
</li>
</ol>
<p><a href="#id185"><span class="problematic" id="id186">**</span></a>図 5.3‑19サブメニュー画面（Movement-Playbook紐付）
<a href="#id187"><span class="problematic" id="id188">**</span></a>※画面はAnsible-Legacyのものです。</p>
<ol class="arabic" start="2">
<li><p>「登録」-「登録開始」ボタンより、Movement-Playbook紐付の登録を行います。</p>
<a class="reference internal image-reference" href="../../../_images/image41.png"><img alt="../../../_images/image41.png" src="../../../_images/image41.png" style="width: 5.57348in; height: 0.8004in;" /></a>
</li>
</ol>
<p>図 5.3‑20 登録画面（Movement-Playbook紐付）</p>
<ol class="arabic">
<li></li>
<li></li>
<li><p>Movementのリンクをクリックすると、対象の<a class="reference external" href="l">5.3.2.Movement一覧</a>へ遷移する。</p>
<p>また、Playbook素材のリンクをクリックすると、<a class="reference external" href="l">5.3.3.Playbook素材集</a>へ遷移する。</p>
<p>※Movement-対話種別紐付（Ansible-Pioneer）の場合は、Movementと対話種別、Movement-ロール紐付（Ansible-LegacyRole）の場合は、Movementとロールパッケージ名がそれぞれリンクになっています。</p>
</li>
</ol>
<p>　　　　　<a class="reference internal" href="../../../_images/image42.png"><img alt="image5" src="../../../_images/image42.png" style="width: 6.10208in; height: 1.22666in;" /></a></p>
<p>　　　　　　　　　　　　　　　　　　<strong>図
5.3‑21サブメニュー画面（Movement-Playbook紐付）</strong></p>
<ol class="arabic simple" start="3">
<li><p>登録画面の項目一覧は以下のとおりです。</p></li>
</ol>
<ul>
<li><p><strong>Ansible-Legacy の場合</strong></p>
<p><strong>表 5.3‑7　登録画面項目一覧（Movement-Playbook紐付の場合）</strong></p>
</li>
</ul>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>項目</strong></p></th>
<th class="head"><p><strong>説明</strong></p></th>
<th class="head"><p>**
入
力
**</p>
<p>**
必
須
**</p>
</th>
<th class="head"><p><strong>入
力形
式</strong></p></th>
<th class="head"><ul class="simple">
<li></li>
</ul>
<p><em>制約事項*</em></p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Movement</p></td>
<td><p>Movement一覧で登
録したMovementが表示されます。</p>
<p>Movementを選択します。</p>
</td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>プレイブ
ック素材</p></td>
<td><dl class="simple">
<dt>「</dt><dd><p><a href="#id189"><span class="problematic" id="id190">*</span></a>5.3.3Playbook素材集（Ansible</p>
</dd>
</dl>
<p>-Legacyのみ）*」で登録したプ
レイブック素材が表示されます。
プレイブック素材を選択します。</p>
</td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>インクル
ード順序</p></td>
<td><p>プレイブック素材の実行
順序(1～:一意値)を入力します。</p>
<p>入力さ
れたインクルード順序(昇順)でプ
レイブック素材が実行されます。</p>
</td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><p>半角整数</p></td>
</tr>
<tr class="row-odd"><td><p>備考</p></td>
<td><p>自由記述欄です。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大長
4000バイト</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p><strong>Ansible-Legacy Role の場合</strong></p></li>
</ul>
<p><strong>表 5.3‑8　登録画面項目一覧（Movement-ロール紐付の場合）</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>項目</strong></p></th>
<th class="head"><p><strong>説明</strong></p></th>
<th class="head"><p>**
入
力
**</p>
<p>**
必
須
**</p>
</th>
<th class="head"><p><strong>入
力形
式</strong></p></th>
<th class="head"><ul class="simple">
<li></li>
</ul>
<p><em>制約事項*</em></p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Movement</p></td>
<td><p>Ansible-Legacyと同様。</p></td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>ロ
ールパッ
ケージ名</p></td>
<td><p>ロールパッ
ケージ管理で登録したロールパッ
ケージが表示されます。実行する
ロールパッケージを選択します。
同一<strong>Movement</strong>
に複数のロー
ルパッケージは登録出来ません。</p></td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>ロール名</p></td>
<td><p>ロールパッ
ケージ名で選択したロールパッケ
ージに含まれているロール名が表
示されます。実行するロールパッ
ケージ内のロールを選択します。</p></td>
<td><p>○</p></td>
<td></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>インクル
ード順序</p></td>
<td><p>Ansible-Legacyと同様。</p></td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><p>半角整数</p></td>
</tr>
<tr class="row-even"><td><p>備考</p></td>
<td><p>自由記述欄です。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大長
4000バイト</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p><strong>Ansible-Pioneer の場合</strong></p></li>
</ul>
<p><strong>表 5.3‑9　登録画面項目一覧（Movement-対話種別紐付の場合）</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>項目</strong></p></th>
<th class="head"><p><strong>説明</strong></p></th>
<th class="head"><p>**
入
力
**</p>
<p>**
必
須
**</p>
</th>
<th class="head"><p><strong>入
力形
式</strong></p></th>
<th class="head"><ul class="simple">
<li></li>
</ul>
<p><em>制約事項*</em></p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Movement</p></td>
<td><p>Ansible-Legacyと同様。</p></td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>対話種別</p></td>
<td><p>「<a class="reference external" href="#対話種別リストansible-pioneerのみ">対話種別リスト（Ansible-P
ioneerのみ）</a>」で登
録した対話種別が表示されます。
実行する対話種別を選択します。</p>
<p>ホスト毎に
OS種別と対話種別に関連付く対話
ファイルが実行対象となります。</p>
</td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>インクル
ード順序</p></td>
<td><p>Ansible-Legacyと同様。</p></td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><p>半角整数</p></td>
</tr>
<tr class="row-odd"><td><p>備考</p></td>
<td><p>自由記述欄です。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大長
4000バイト</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id191">
<h3>変数ネスト管理（Ansible-Legacy Roleのみ）<a class="headerlink" href="#id191" title="この見出しへのパーマリンク">¶</a></h3>
<p><strong>(1)</strong>
[変数ネスト管理]では、「<em>5.3.4ロールパッケージ管理（Ansible-Legacy
Roleのみ）</em>」で登録したロールパッケージで定義されている多段変数内で繰返配列定義されているメンバー変数の配列の最大繰返数の更新が行えます。変更したいメンバー変数の更新ボタンをクリックし最大繰返数を更新します。</p>
<a class="reference internal image-reference" href="../../../_images/image43.png"><img alt="../../../_images/image43.png" src="../../../_images/image43.png" style="width: 6.38722in; height: 3.16694in;" /></a>
<p><strong>図 5.3-22 サブメニュー画面（変数ネスト管理）</strong></p>
<p><strong>(2)</strong>
「一覧」-「更新」ボタンより最大繰返数の更新を行います。（※登録ボタンではありません）</p>
<a class="reference internal image-reference" href="../../../_images/image44.png"><img alt="../../../_images/image44.png" src="../../../_images/image44.png" style="width: 5.94247in; height: 0.80925in;" /></a>
<p><strong>図 5.3-23 登録画面（変数ネスト管理）</strong></p>
<p><strong>(3)</strong> 登録画面の項目一覧は以下のとおりです。</p>
<p><strong>表 5.3-10 登録画面項目一覧（変数ネスト管理）</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>**
項目**</p></th>
<th class="head"><p><strong>説明</strong></p></th>
<th class="head"><p>**
入
力
**</p>
<p>**
必
須
**</p>
</th>
<th class="head"><p><strong>入
力形
式</strong></p></th>
<th class="head"><p><strong>制約事項</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>最大
繰返数</p></td>
<td><p>配列の最大繰返数を1
～99,999,999の範囲で入力します。</p></td>
<td><p>○</p></td>
<td><p>手動
入力</p></td>
<td><p>入力値
1
～99,999,999</p></td>
</tr>
<tr class="row-odd"><td><p>備考</p></td>
<td><p>自由記述欄です。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大
長4000バイト</p></td>
</tr>
</tbody>
</table>
<p>メンバー変数名の表示は各階層の変数を「.」でスコープします。また、1階層目が繰返配列の場合は</p>
<p>メンバー変数名が「－」と表示されます。</p>
<p>e.g.)</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>変数定義</strong></p>
<p>VAR_users:</p>
<ul class="simple">
<li><p>name: alice</p></li>
</ul>
<p>authorized:</p>
<ul class="simple">
<li><p>/tmp/alice/onekey.pub</p></li>
</ul>
<p>nested:</p>
<ul class="simple">
<li><p>craete_users:</p></li>
</ul>
<p>Name: root</p>
<p>password: xxxxxxxxx</p>
<ul class="simple">
<li><p>craete_users:</p></li>
</ul>
<p>Name: mysql</p>
<p>password: xxxxxxxxx</p>
</th>
<th class="head"><p><strong>メンバー変数の表示</strong>
<strong>最大繰返数の初期値</strong></p>
<ul class="simple">
<li><p>　　　　　　　 　1</p></li>
</ul>
<p>nested 　　　　　　　　2</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
<td></td>
</tr>
</tbody>
</table>
<p>内部の処理でロールパッケージ内に定義している多段変数繰返配列で定義されているメンバー変数の繰返数を初期登録します。初期登録後、変数ネスト管理で繰返数を更新することが出来ます。</p>
<blockquote>
<div><p>なお、初期登録および繰返数の更新はリアルタイムではないので、「<a class="reference external" href="#代入値自動登録設定">5.3.11
代入値自動登録設定</a>」や「5.3.9<a class="reference external" href="#代入値管理">代入値管理</a>」で変数が扱えるまでに<em>時間がかかる※1</em>場合があります。</p>
</div></blockquote>
<p>※1 初期登録および繰返数の更新タイミングは「<a class="reference external" href="#_起動周期の変更">7.2
メンテナンス方法について</a>」に記載していますので、そちらをご参照ください</p>
<div class="line-block">
<div class="line"><strong>(4)</strong> 変数名の一意管理</div>
<div class="line">変数名の管理は、全ロールパッケージで一意管理しています。ロールパッケージを跨って同じ変数名を使用している場合、変数ネスト管理で設定した繰返し数は、全ロールパッケージの変数に適用されます。</div>
</div>
<p><strong>(5)</strong> アクセス許可ロール</p>
<p>変数ネスト管理に設定されるアクセス許可ロールは、該当の変数が定義されているロールパッケージ管理のアクセス許可ロールが設定されます。複数のロールパッケージ管理で変数が定義されている場合、各ロールパッケージ管理のアクセス許可ロールが全て設定されます。また、アクセス許可ロールが空の場合、全てのロールへのアクセスが可能として扱われます。各ロールパッケージ管理のアクセス許可ロールが空白の場合、変数ネスト管理のアクセス許可ロールも空白が設定されます。</p>
<p>アクセス許可ロールの詳細については「Exastro-ITA_利用手順マニュアル_データレコード毎のロールベースアクセス制御」を参照して下さい。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>ﾛｰﾙﾊﾟ
ｯｹｰｼﾞ管理</p></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"><p>多
段変数最
大繰返数</p></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ﾛ
ｰﾙﾊﾟｯｹｰｼﾞ</p></td>
<td><p>変数</p></td>
<td><p>ｱｸｾｽ許
可ﾛｰﾙ</p></td>
<td></td>
<td><p>変数</p></td>
<td><p>ｱｸｾｽ許可ﾛｰﾙ</p></td>
</tr>
<tr class="row-odd"><td><p>P
ackeage_A</p></td>
<td><p><a href="#id275"><span class="problematic" id="id276">VAR_</span></a>
nest1</p></td>
<td><p>空白</p></td>
<td></td>
<td><p>V
AR_nest1</p></td>
<td><p>空白</p></td>
</tr>
<tr class="row-even"><td><p>P
ackeage_A</p></td>
<td><p><a href="#id277"><span class="problematic" id="id278">VAR_</span></a>
nest2</p></td>
<td><p>空白</p></td>
<td></td>
<td><p>V
AR_nest2</p></td>
<td><p>空白</p></td>
</tr>
<tr class="row-odd"><td><p>P
ackeage_A</p></td>
<td><p><a href="#id279"><span class="problematic" id="id280">VAR_</span></a>
nest3</p></td>
<td><p>Role_A</p></td>
<td></td>
<td><p>V
AR_nest3</p></td>
<td><p>Ro
le_A,Role_B</p></td>
</tr>
<tr class="row-even"><td><p>P
ackeage_B</p></td>
<td><p><a href="#id281"><span class="problematic" id="id282">VAR_</span></a>
nest2</p></td>
<td><p>Role_A</p></td>
<td></td>
<td><p>V
AR_nest4</p></td>
<td><p>Role_C</p></td>
</tr>
<tr class="row-odd"><td><p>P
ackeage_B</p></td>
<td><p><a href="#id283"><span class="problematic" id="id284">VAR_</span></a>
nest3</p></td>
<td><p>Role_B</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>P
ackeage_B</p></td>
<td><p><a href="#id285"><span class="problematic" id="id286">VAR_</span></a>
nest4</p></td>
<td><p>Role_C</p></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="id192">
<h3>代入値自動登録設定<a class="headerlink" href="#id192" title="この見出しへのパーマリンク">¶</a></h3>
<ol class="arabic">
<li><p>メニュー作成機能で作成したパラメータシートと、Movementの変数を紐付けます。登録した情報は内部の処理により代入値管理と作業対象ホストに反映されます。</p>
<p><a class="reference external" href="#backyardコンテンツ">6.8 BackYardコンテンツ (2)
代入自動値登録設定</a>に反映ルールを記載しています。</p>
<a class="reference internal image-reference" href="../../../_images/image45.png"><img alt="../../../_images/image45.png" src="../../../_images/image45.png" style="width: 6.08053in; height: 2.71357in;" /></a>
</li>
</ol>
<p><strong>図 5.3-24 サブメニュー画面（代入値自動登録設定）</strong></p>
<p>※画面はAnsible-Legacy Roleのものです</p>
<p><strong>(2)</strong> 「登録」-「登録開始」ボタンより代入値自動登録設定を行います。</p>
<a class="reference internal image-reference" href="../../../_images/image46.png"><img alt="../../../_images/image46.png" src="../../../_images/image46.png" style="width: 5.59977in; height: 0.73063in;" /></a>
<p><strong>図 5.3-25 登録画面（代入値自動登録設定）</strong></p>
<p><strong>(3)</strong>
一覧/更新のメニューIDまたは、メニュー名称のリンクをクリックすると、対象メニューへ遷移します。</p>
<a class="reference internal image-reference" href="../../../_images/image47.png"><img alt="../../../_images/image47.png" src="../../../_images/image47.png" style="width: 6.43176in; height: 1.54306in;" /></a>
<p><strong>図 5.3-26サブメニュー画面（代入値自動登録設定）</strong></p>
<p><strong>表 5.3-11 対応カラム一覧（代入値自動登録設定）</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>カ
ラム</p></th>
<th class="head"></th>
<th class="head"><p>Legacy</p></th>
<th class="head"><p>Legacy Role</p></th>
<th class="head"><p>Pioneer</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>メ
ニュ
ーグ
ルー
プ:
メニ
ュー</p></td>
<td></td>
<td><p>○</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
</tr>
<tr class="row-odd"><td><p>項目</p></td>
<td></td>
<td><p>○</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
</tr>
<tr class="row-even"><td><p>登録
方式</p></td>
<td></td>
<td><p>○</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
</tr>
<tr class="row-odd"><td><p>Move
ment</p></td>
<td></td>
<td><p>○</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
</tr>
<tr class="row-even"><td><p>Key</p>
<p>情報</p>
</td>
<td><p>変数名</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>メンバー変数名</p></td>
<td><p>－</p></td>
<td><p>▲</p></td>
<td><p>－</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>代入順序</p></td>
<td><p>△</p></td>
<td><p>△</p></td>
<td><p>△</p></td>
</tr>
<tr class="row-odd"><td><p>V
alue</p>
<p>情報</p>
</td>
<td><p>変数名</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>メンバー変数名</p></td>
<td><p>－</p></td>
<td><p>▲</p></td>
<td><p>－</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>代入順序</p></td>
<td><p>△</p></td>
<td><p>△</p></td>
<td><p>△</p></td>
</tr>
<tr class="row-even"><td><p>NULL
連携</p></td>
<td></td>
<td><p>●</p></td>
<td><p>●</p></td>
<td><p>●</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>○:必須</p>
<div class="line-block">
<div class="line">●:任意</div>
<div class="line">△:選択した変数が複数具体値設定可能な変数の場合のみ必須</div>
<div class="line">▲:選択した変数が多段変数の場合のみ必須</div>
<div class="line">－:非表示</div>
</div>
</div></blockquote>
<p><strong>(4)</strong> 登録画面の項目一覧は以下のとおりです。</p>
<p><strong>表 5.3-12 登録画面項目一覧（代入値自動登録設定）</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>カラム</p></th>
<th class="head"><p>説明</p></th>
<th class="head"><p>**
入
力
**</p>
<p>必
須</p>
</th>
<th class="head"><p>入力
形式</p></th>
<th class="head"><p>制約事項</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>メニ
ューグループ:
メニュー</p></td>
<td><p>メニュ
ー作成機能で作成したパラメ
ータシートが表示されます。</p>
<p>該当のパラ
メータシートを選択します。</p>
</td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>項目</p></td>
<td><p>選択したパラメータシ
ートの項目が表示されます。</p>
<p>対象の項目を選択します。</p>
</td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>登録方式</p></td>
<td><p>Value型：項目の
設定値を紐付けた変数の具体
値とする場合に選択します。</p>
<p>Key型：項目
の名称を紐付けた変数の具体
値とする場合に選択します。</p>
<p>項目の設定値が空白の場合
は紐付け対象外となります。</p>
<p>Key-Value型
：項目の名称(Key)と設定値(
Value)を紐付けた変数の具体
値とする場合に選択します。</p>
</td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>Movement</p></td>
<td><p>Movement一覧で登
録したMovementが表示されま
す。Movementを選択します。</p></td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><ul class="simple">
<li></li>
</ul>
<p><em>カラ
ム*</em></p>
</th>
<th class="head"></th>
<th class="head"><p><strong>説明</strong></p></th>
<th class="head"><p>**
入
力
必
須
**</p></th>
<th class="head"><p><strong>入
力形
式</strong></p></th>
<th class="head"><p>**
制約事項**</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Key</p>
<p>情報</p>
</td>
<td><p>変
数名</p></td>
<td><p>Movement-Pla
ybook紐付（Movement-対話種
別紐付、Movement-ロール紐
付）で登録した資材で使用し
ている変数が表示されます。</p>
<p>Key型で具体値に紐
付けたい変数を選択します。</p>
</td>
<td><p>○</p>
<p>ま
た
は</p>
<p>／</p>
</td>
<td><p>リ
スト
選択</p></td>
<td><p>登録方
式でKey型</p>
<p>またはKey
-Value型を</p>
<p>選択した
場合は必須</p>
</td>
</tr>
<tr class="row-odd"><td></td>
<td><p>メ
ンバ
ー変
数名</p></td>
<td><p>変数名で多段変数
を選択した場合に多段変数の</p>
<p>メ
ンバー変数が表示されます。</p>
<p>メンバー変数を選択します。</p>
</td>
<td><p>○</p>
<p>ま
た
は</p>
<p>／</p>
</td>
<td><p>リ
スト
選択</p></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td><p>代入
順序</p></td>
<td><p>複数
具体値が設定できる変数の場
合のみ必須入力になります。</p>
<p>具体値の代入順序（1
～）を入力します。入力値に
従い昇順で代入されます。具
体値が複数ない場合でも代入
順序（1～）を入力します。</p>
</td>
<td><p>○</p>
<p>ま
た
は</p>
<p>／</p>
</td>
<td><p>手動
入力</p></td>
<td><p>ブランク</p>
<p>または、</p>
<p>正の整数</p>
</td>
</tr>
<tr class="row-odd"><td><p>Value</p>
<p>情報</p>
</td>
<td><p>変
数名</p></td>
<td><p>Movement-Pla
ybook紐付（Movement-対話種
別紐付、Movement-ロール紐
付）で登録した資材で使用し
ている変数が表示されます。</p>
<p>Value型で具体値に紐
付けたい変数を選択します。</p>
</td>
<td><p>○</p>
<p>ま
た
は</p>
<p>／</p>
</td>
<td><p>リ
スト
選択</p></td>
<td><p>登録方式
でValue型</p>
<p>またはKey
-Value型を</p>
<p>選択した
場合は必須</p>
</td>
</tr>
<tr class="row-even"><td></td>
<td><p>メ
ンバ
ー変
数名</p></td>
<td><p>変数名で多段変数
を選択した場合に多段変数の</p>
<p>メ
ンバー変数が表示されます。</p>
<p>メンバー変数を選択します。</p>
</td>
<td><p>○</p>
<p>ま
た
は</p>
<p>／</p>
</td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td></td>
<td><p>代入
順序</p></td>
<td><p>複数
具体値が設定できる変数の場
合のみ必須入力になります。</p>
<p>具体値の代入順序（1
～）を入力します。入力値に
従い昇順で代入されます。具
体値が複数ない場合でも代入
順序（1～）を入力します。</p>
</td>
<td><p>○</p>
<p>ま
た
は</p>
<p>／</p>
</td>
<td><p>手動
入力</p></td>
<td><p>ブランク</p>
<p>または、</p>
<p>正の整数</p>
</td>
</tr>
<tr class="row-even"><td><p>NUL
L連携</p></td>
<td></td>
<td><p>パラメータシートの具体値
がNULL(空白)の場合に、代入
値管理への登録をNULL(空白
)の値で行うか設定します。</p>
<p>・「有効」
の場合、パラメータシートの
値がどのような値でも代入値
管理への登録が行われます。</p>
<p>・「無効」の
場合、パラメータシートに値
が入っている場合のみ代入値
管理への登録が行われます。</p>
<p>・空白の場合、Ansibleイ
ンターフェース情報の「NULL
連携」の値が適用されます。</p>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>備考</p></td>
<td></td>
<td><p>自由記述欄です。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大長
4000バイト</p></td>
</tr>
</tbody>
</table>
<p>※
メンバー変数名の表記内容については「5.3.11<a class="reference external" href="#代入値管理">代入値管理</a>」に記載していますので、そちらをご参照ください。</p>
<section id="id195">
<h4><a href="#id193"><span class="problematic" id="id194">**</span></a><a class="headerlink" href="#id195" title="この見出しへのパーマリンク">¶</a></h4>
<p><strong>(5)</strong> パラメータシートの変数項目</p>
<div class="line-block">
<div class="line">「Ansible共通:テンプレート管理:テンプレート変数名」「Ansible共通:ファイル管理:ファイル埋込変数名」をパラメータシートの項目として代入値自動登録設定で使用した場合、項目の設定値は選択されている変数名となり紐付ている変数の具体値は
‘{{ 変数名 }}’ として代入値管理に反映されます。</div>
<div class="line">ファイルパスはITAが作業実行時に配置したファイルパスをホスト変数経由でansibleが解釈し処理します。</div>
</div>
<blockquote>
<div><a class="reference internal image-reference" href="../../../_images/image48.png"><img alt="../../../_images/image48.png" src="../../../_images/image48.png" style="width: 5.92051in; height: 1.60681in;" /></a>
<p>　　<a class="reference internal" href="../../../_images/image49.png"><img alt="image6" src="../../../_images/image49.png" style="width: 6.30721in; height: 1.76682in;" /></a></p>
<a class="reference internal image-reference" href="../../../_images/image50.png"><img alt="../../../_images/image50.png" src="../../../_images/image50.png" style="width: 6.1872in; height: 1.46013in;" /></a>
<a class="reference internal image-reference" href="../../../_images/image511.png"><img alt="../../../_images/image511.png" src="../../../_images/image511.png" style="width: 6.13386in; height: 1.36678in;" /></a>
</div></blockquote>
<p><strong>(6)</strong> アクセス許可ロール</p>
<p>代入値自動登録の情報から生成される代入値管理と作業対象ホストに設定されるアクセス許可ロールは、代入値自動登録に設定されているMovementとパラメータシートに設定されているホスト(機器一覧)とオペレーションの各アクセス許可ロールで一致しているロールが設定されます。また、アクセス許可ロールが空の場合、全てのロールへのアクセスが可能として扱われます。各アクセス許可ロールで一致するロールの組み合わせが無いデータは、代入値管理と作業対象ホストにデータが生成されません。</p>
<p>アクセス許可ロールの詳細については「Exastro-ITA_利用手順マニュアル_データレコード毎のロールベースアクセス制御」を参照して下さい。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>ｵﾍﾟﾚｰｼｮﾝ</p></th>
<th class="head"><p>Host</p></th>
<th class="head"><p>Movement</p></th>
<th class="head"></th>
<th class="head"><p>代入値管理
・作業管理ﾎｽﾄ
に展開
されるｱｸｾｽ許可</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ｱｸｾ
ｽ許可ﾛｰﾙ</p></td>
<td><p>ｱｸ
ｾｽ許可ﾛｰﾙ</p></td>
<td><p>ｱｸｾｽ許可ﾛｰﾙ</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>空白</p></td>
<td><p>空白</p></td>
<td><p>空白</p></td>
<td></td>
<td><p>空白</p></td>
</tr>
<tr class="row-even"><td><p>Role_A</p></td>
<td><p>空白</p></td>
<td><p>空白</p></td>
<td></td>
<td><p>Role_A</p></td>
</tr>
<tr class="row-odd"><td><p>Role_A</p></td>
<td><p>Role_A</p></td>
<td><p>空白</p></td>
<td></td>
<td><p>Role_A</p></td>
</tr>
<tr class="row-even"><td><p>Role_A</p></td>
<td><p>Role_A</p></td>
<td><p>Role_A</p></td>
<td></td>
<td><p>Role_A</p></td>
</tr>
<tr class="row-odd"><td><p>Role
_A,RoleB</p></td>
<td><p>Rol
e_A,RoleB</p></td>
<td><p>Role_A,Ro
le_B,Role_C</p></td>
<td></td>
<td><p>Role_A,RoleB</p></td>
</tr>
<tr class="row-even"><td><p>Role_A</p></td>
<td><p>Role_B</p></td>
<td><p>Role_C</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="id198">
<h4><a href="#id196"><span class="problematic" id="id197">**</span></a><a class="headerlink" href="#id198" title="この見出しへのパーマリンク">¶</a></h4>
<p><strong>(7)</strong> パラメータシート(縦メニュー)</p>
<p>パラメータシート(縦メニュー)を使用する際に、リピート設定されている項目において、</p>
<p>まとまり単位で値が空の場合、代入値自動登録設定でNULL連携を有効にしていても、</p>
<p>代入値管理に登録はされません。</p>
<p>メニュー作成</p>
<a class="reference internal image-reference" href="../../../_images/image52.png"><img alt="../../../_images/image52.png" src="../../../_images/image52.png" style="width: 5.44952in; height: 1.80784in;" /></a>
<p>パラメータシート</p>
<a class="reference internal image-reference" href="../../../_images/image53.png"><img alt="../../../_images/image53.png" src="../../../_images/image53.png" style="width: 5.45255in; height: 1.69342in;" /></a>
<p>代入値自動登録設定</p>
<a class="reference internal image-reference" href="../../../_images/image54.png"><img alt="../../../_images/image54.png" src="../../../_images/image54.png" style="width: 5.44943in; height: 1.19823in;" /></a>
<p>代入値管理</p>
<a class="reference internal image-reference" href="../../../_images/image55.png"><img alt="../../../_images/image55.png" src="../../../_images/image55.png" style="width: 5.49702in; height: 1.21611in;" /></a>
</section>
</section>
<section id="id199">
<h3>作業対象ホスト<a class="headerlink" href="#id199" title="この見出しへのパーマリンク">¶</a></h3>
<ol class="arabic">
<li><p>[作業対象ホスト]では、オペレーションに関連付くMovementとホストの登録／更新／廃止を行います。</p>
<a class="reference internal image-reference" href="../../../_images/image56.png"><img alt="../../../_images/image56.png" src="../../../_images/image56.png" style="width: 6.69236in; height: 3.32569in;" /></a>
</li>
</ol>
<p><strong>図 5.3-27 サブメニュー画面（作業対象ホスト）</strong></p>
<p><strong>(2)</strong> 「登録」-「登録開始」ボタンより、作業対象ホスト登録を行います。</p>
<a class="reference internal image-reference" href="../../../_images/image57.png"><img alt="../../../_images/image57.png" src="../../../_images/image57.png" style="width: 5.39203in; height: 1.33953in;" /></a>
<p><strong>図 5.3-28 登録画面（作業対象ホスト）</strong></p>
<ol class="arabic">
<li></li>
<li></li>
<li><p>一覧/更新のMovementのリンクをクリックすると、対象の<a class="reference external" href="l">5.3.7
Movement-Playbook紐付（Movement-対話種別紐付、Movement-ロール紐付）</a>へ遷移します。</p>
<p>また、代入値管理ボタンをクリックすると、対象の<a class="reference external" href="l">5.4.11代入値管理</a>へ遷移します。</p>
</li>
</ol>
<a class="reference internal image-reference" href="../../../_images/image58.png"><img alt="../../../_images/image58.png" src="../../../_images/image58.png" style="width: 6.20485in; height: 1.25094in;" /></a>
<p><strong>図 5.3-29 サブメニュー画面（作業対象ホスト）</strong></p>
<p><strong>(4)</strong> 登録画面の項目一覧は以下のとおりです。</p>
<p><strong>表 5.3-13 登録画面項目一覧（作業対象ホスト）</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>項目</strong></p></th>
<th class="head"><p><strong>説明</strong></p></th>
<th class="head"><p>**
入
力
**</p>
<p>**
必
須
**</p>
</th>
<th class="head"><p><strong>入
力形
式</strong></p></th>
<th class="head"><p>**
制約事項**</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>オペレ
ーション</p></td>
<td><p>オ
ペレーション一覧に登録されてい
るオペレーションが表示されます
。オペレーションを選択します。</p></td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>Movement</p></td>
<td><p>Movemen
t一覧に登録されているMovementが
表示されます。オペレーションに
紐付けるMovementを選択します。</p></td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>ホスト</p></td>
<td><p>機器一覧に登録され
ているホスト名が表示されます。</p>
<p>オペレーション
に紐付けるホストを選択します。</p>
</td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>備考</p></td>
<td><p>自由記述欄です。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大長
4000バイト</p></td>
</tr>
</tbody>
</table>
<section id="id202">
<h4><a href="#id200"><span class="problematic" id="id201">**</span></a><a class="headerlink" href="#id202" title="この見出しへのパーマリンク">¶</a></h4>
</section>
</section>
<section id="id203">
<h3>代入値管理<a class="headerlink" href="#id203" title="この見出しへのパーマリンク">¶</a></h3>
<ol class="arabic">
<li><p>変数への代入値の登録／更新／廃止を行います。</p>
<p>オペレーションごとに、対象のMovementで利用されるPlaybookやテンプレートファイル内の変数「<a href="#id287"><span class="problematic" id="id288">VAR_</span></a>」に代入する具体値をメンテナンス(閲覧/登録/更新/廃止)できます。</p>
<p>また、読替表の定義により「<a href="#id289"><span class="problematic" id="id290">VAR_</span></a>」以外の変数「<a href="#id291"><span class="problematic" id="id292">LCA_</span></a>」に対して代入する具体値をメンテナンスできます。詳しくは「<a class="reference external" href="#読替表ansible-legacy-roleのみの記述">6.7
読替表の記述</a>」を参照してください。</p>
<p>登録した変数の情報は作業実行時にホスト変数ファイル(host_vars/配下)に出力されます。</p>
<a class="reference internal image-reference" href="../../../_images/image59.png"><img alt="../../../_images/image59.png" src="../../../_images/image59.png" style="width: 6.21389in; height: 2.8072in;" /></a>
</li>
</ol>
<p><strong>図 5.3-30 サブメニュー画面（代入値管理）</strong></p>
<p>※画面はAnsible-Legacy Roleのものです。</p>
<ol class="arabic" start="2">
<li><p>「登録」-「登録開始」ボタンより代入値管理を行います。</p>
<a class="reference internal image-reference" href="../../../_images/image60.png"><img alt="../../../_images/image60.png" src="../../../_images/image60.png" style="width: 6.14722in; height: 0.63535in;" /></a>
</li>
</ol>
<p><strong>図 5.3-31 登録画面（代入値管理）</strong></p>
<p>代入値管理の変数名は、アップロードされたPlaybookや代入値自動登録設定で登録された情報から</p>
<p>反映されます。</p>
<p>反映のタイミングは「<a class="reference external" href="l">7.2
メンテナンス方法について</a>」に記載していますので、そちらをご参照ください。</p>
<p><strong>(3)</strong> 登録画面の項目一覧は以下のとおりです。</p>
<p><strong>表 5.3-14 対応カラム一覧（代入値管理）</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>カラム</p></th>
<th class="head"><p>Legacy</p></th>
<th class="head"><p>Legacy Role</p></th>
<th class="head"><p>Pioneer</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>オペレーション</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
</tr>
<tr class="row-odd"><td><p>Movement</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
</tr>
<tr class="row-even"><td><p>ホスト</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
</tr>
<tr class="row-odd"><td><p>変数名</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
</tr>
<tr class="row-even"><td><p>メンバー変数名</p></td>
<td><p>－</p></td>
<td><p>▲</p></td>
<td><p>－</p></td>
</tr>
<tr class="row-odd"><td><p>代入順序</p></td>
<td><p>△</p></td>
<td><p>△</p></td>
<td><p>△</p></td>
</tr>
<tr class="row-even"><td><p>デフォルト値(表示のみ)</p></td>
<td><p>－</p></td>
<td><p>○</p></td>
<td><p>－</p></td>
</tr>
</tbody>
</table>
<p>○:必須</p>
<p>△:選択した変数が複数具体値設定可能な変数の場合のみ必須</p>
<p>▲:選択した変数が多段変数の場合のみ必須</p>
<p>－:非表示</p>
<p><strong>表 5.3-15 登録画面項目一覧（代入値管理）</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="2"><ul>
<li><div class="line-block">
<div class="line"><br /></div>
</div>
</li>
<li><div class="line-block">
<div class="line"><br /></div>
</div>
</li>
</ul>
<p>項 |
目 |
* |
* |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</th>
<th class="head"></th>
<th class="head"><p><strong>説明</strong></p></th>
<th class="head"><p>**
入
力
**</p>
<p>**
必
須
**</p>
</th>
<th class="head"><p><strong>入
力形
式</strong></p></th>
<th class="head"><p><strong>制
約事項</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ｵ
ﾍ
ﾟ
ﾚ
ｰ
ｼ
ｮ
ﾝ</p></td>
<td></td>
<td></td>
<td><p>作業対象ホストに登録されてい
るオペレーションが表示されます
。オペレーションを選択します。</p></td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>M
o
v
e
m
e
n
t</p></td>
<td></td>
<td></td>
<td><p>作業対象ホストに登録
されているデータの中から、選択</p>
<p>されたオペレーションに
紐づくMovementが表示されます。</p>
<p>Movementを選択します。</p>
</td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td colspan="2"><p>ホ |
ス |
ト |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td><p>作業対象ホ
ストに登録されているデータで選
択されたオペレーションとMovemen
tに紐づくホストが表示されます。</p>
<p>ホストを選択します。</p>
</td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><p>変 |
数 |
名 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td><p>Movemen
t-Playbook紐付（Movement-対話種
別紐付、Movement-ロール紐付）に
て登録されている資材の中から、</p>
<p>選択されたMov
ementにアタッチしている変数名が</p>
<p>表
示されます。変数を選択します。</p>
</td>
<td><p>○</p></td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td colspan="2"><p>メ |
ン |
バ |
ー |
変 |
数 |
名 |</p></td>
<td></td>
<td><p>変数名で多段
変数を選択した場合に多段変数の</p>
<p>メンバー変数が表示されます。</p>
<p>メンバー変数を選択します。</p>
</td>
<td><p>○</p>
<p>ま
た
は</p>
<p>／</p>
</td>
<td><p>リ
スト
選択</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td colspan="5"><p>具 | 文 | Se | 「                             | －
体 | 字 | nsi | OFF」または「ON」を選択します。 |
値 | 列 | tiv |                               |</p>
<blockquote>
<div><div class="line-block">
<div class="line">| e設 | | 「ON」を選                    |</div>
<div class="line">| 定  | 択した場合、具体値を暗号化しIT  |</div>
<div class="line">|     | A上で表示させないようにします。 |</div>
<div class="line">|     | | ・Legacy/Legacy-Roleの場合    |</div>
<div class="line">|     |                                 |</div>
<div class="line">|     | ansibleに渡すホスト変数         |</div>
<div class="line">|     | ファイルには、ansible-vaultで暗 |</div>
<div class="line">|     | 号化された内容が設定されます。  |</div>
<div class="line">|     |                                 |</div>
<div class="line">|     | | ・Pioneerの場合               |</div>
<div class="line">|     | | ansibleに渡すホ               |</div>
<div class="line">|     | スト変数ファイルには、ITA独自で |</div>
<div class="line">|     | 暗号化した内容が設定されます。  |</div>
</div>
</div></blockquote>
</td>
<td><p>ボ
タン
選択</p></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td><p>値
※１</p></td>
<td><p>オペレーション
/Movement/ホストで使用する変数
の具体値を入力します。複数行の
具体値も入力できますが、Pionee
rで複数行の具体値を設定すると、
作業実行時にエラーとなります。</p>
<p>具体値にファイル埋込変数
「<a href="#id293"><span class="problematic" id="id294">CPF_</span></a>」とテンプレート埋込変数
「<a href="#id295"><span class="problematic" id="id296">TPF_</span></a>」が入力出来ます。変数を
記述する場合、Playbookに変数を
記述する場合と同様、変数名を{{
}}で囲みます。</p>
<p>Exp)</p>
<p>具
体値にTPF_sampleを入力する場合</p>
<p>'{{△TPF_sample△}}'</p>
<blockquote>
<div><p>△:半角スペース</p>
<p>‘:シングル・ダブ</p>
</div></blockquote>
<p>ルコーテーションで囲む「必須」</p>
<p>尚、
具体値
に値とファイルの両方を設定する
ことは出来ません。Sensitive設定
ONで設定さ
れている値をクリアしたい場合、
Sensitive
設定をOFFにして更新して下さい。</p>
</td>
<td><p>－</p></td>
<td><p>手動
入力</p></td>
<td><p>最大長8
192バイト</p></td>
</tr>
<tr class="row-odd"><td></td>
<td colspan="2"><p>フ |
ァ |
イ |
ル |</p></td>
<td><p>オペレーション/
Movement/ホストで使用する変数に
ファイルを埋込む場合に、埋込む
ファイルをアップロードします。</p></td>
<td><p>－</p></td>
<td><p>手動
入力</p></td>
<td><p>最
大サイズ
4Gバイト</p></td>
</tr>
<tr class="row-even"><td colspan="2"><p>代 |
入 |
順 |
序 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td><p>複数具体値が設定できる変数
の場合のみ必須入力になります。</p>
<p>具体値の代入順序（1～）を入力し
ます。入力値に従い昇順で代入さ
れます。具体値が複数ない場合で
も代入順序（1～）を入力します。</p>
</td>
<td><p>○</p>
<p>ま
た
は</p>
<p>／</p>
</td>
<td><p>手動
入力</p></td>
<td><p>ブランク</p>
<p>または、</p>
<p>正の整数</p>
</td>
</tr>
<tr class="row-odd"><td colspan="2"><p>デ |
フ |
ォ |
ル |
ト |
値 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td><p>変数名およ
びメンバー変数名で選択されてい
る変数のデフォルト変数定義ファ
イル(defaults-&gt;main.yml)に設定
されている具体値を表示します。</p>
<p>詳しくは「<em>6.4
ITAreadme（Ansible-Legacy
Roleのみ）
の記述</em>」を参照してください。</p>
<p>具体値が8進数文字列
(0755)や16進数文字列(0x1ED)の場
合、10進数(493)で表示されます。</p>
<p>具体値が「true」「Yes」「Y」「
y」の場合は空白が表示されます。</p>
<p>具体値が「false」「No」「N」「n
」の場合はFalseが表示されます。</p>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>表示
のみ</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td colspan="2"><p>備 |
考 |</p></td>
<td></td>
<td><p>自由記述欄です。</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>手動
入力</p></td>
<td><p>最大長4
000バイト</p></td>
</tr>
</tbody>
</table>
<p>※１
具体値にファイル埋込変数「<a href="#id297"><span class="problematic" id="id298">CPF_</span></a>」・テンプレート埋込変数「<a href="#id299"><span class="problematic" id="id300">TPF_</span></a>」を設定する場合、
Sensitive設定は「OFF」に設定して下さい。
Sensitive設定が「ON」の場合、各変数として扱われません。</p>
<p>【メンバー変数名の表示内容】</p>
<p>多段変数の場合にのみメンバー変数の選択が必要になります。メンバー変数に表示される変数は</p>
<p>具体値を必要とする変数のみです。</p>
<blockquote>
<div><p>メンバー変数名の表示は各階層の変数を「.」でスコープします。繰返配列の場合は「[
]」で繰返位置(0～)をスコープします。繰返し配列の数は「<a class="reference external" href="l">5.3.8
多段変数最大繰返数</a>」で設定を行います。</p>
</div></blockquote>
<p>e.g.)</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>変数定義</p>
<p>VAR_users:</p>
<ul class="simple">
<li><p>name: alice</p></li>
</ul>
<p>authorized:</p>
<ul class="simple">
<li><p>/tmp/alice/onekey.pub</p></li>
</ul>
<p>mysql:</p>
<p>password: mysql-password</p>
<p>hosts:</p>
<ul class="simple">
<li><p>&quot;127.0.0.1&quot;</p></li>
<li><p>&quot;localhost&quot;</p></li>
<li><p>name: bob</p></li>
</ul>
<p>authorized:</p>
<ul class="simple">
<li><p>/tmp/alice/onekey.pub</p></li>
</ul>
<p>mysql:</p>
<p>password: mysql-password</p>
<p>hosts:</p>
<ul class="simple">
<li><p>&quot;127.0.0.1&quot;</p></li>
<li><p>&quot;localhost&quot;</p></li>
</ul>
</th>
<th class="head"><p>メンバー変数の表示</p>
<p>[0].name</p>
<p>[0].authorized</p>
<p>[0].mysql.password</p>
<p>[0].mysql.hosts</p>
<p>[1].name</p>
<p>[1].authorized</p>
<p>[1].mysql.password</p>
<p>[1].mysql.hosts</p>
<p>※mysqlは階層を示す変数
なのでメンバー変数には表示されません。</p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
<td></td>
</tr>
</tbody>
</table>
<p>代入値自動登録設定で登録した情報は、内部の処理で代入値管理と作業対象ホストへ反映されます。</p>
<blockquote>
<div><p>※反映のタイミングは「<a class="reference external" href="#_起動周期の変更">7.2
メンテナンス方法について</a>」に記載していますので、そちらをご参照ください。</p>
</div></blockquote>
<ol class="arabic simple">
<li><p><strong>代入順序の入力</strong></p></li>
</ol>
<div class="line-block">
<div class="line">Ansible-Legacyでは、代入順序が未入力の場合は、通常変数として扱います。</div>
<div class="line">代入順序が入力されている場合は、複数具体値変数として扱います。複数具体値変数の場合は複数の具体値が必要ない場合(具体値が1個でよい)でも代入順序は入力してください。</div>
<div class="line">Ansible-Legacy
Roleでは、変数名またはメンバー変数名を選択することで、複数具体値変数の場合のみ代入順序が入力可能となります。複数具体値変数の場合に入力してください。</div>
</div>
<blockquote>
<div><div class="line-block">
<div class="line">Ansible-Pioneerでは、代入順序が未入力の場合は、通常変数として扱います。</div>
<div class="line">代入順序が入力されている場合は、複数具体値変数として扱います。複数具体値変数の場合は、</div>
</div>
<p>複数の具体値が必要ない場合(具体値が1個でよい)でも代入順序を入力してください。</p>
</div></blockquote>
<p>各モードとも、特定の複数具体値変数に対して代入順序が連続していなくても問題ありません。</p>
<p>e.g.)</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>**
代入値
管理の
登録**</p></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"><p><strong>HOST_Aのホスト
変数ファイルへの出力内容</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ホスト</p></td>
<td><p>変数</p></td>
<td><p>具
体値</p></td>
<td><p>代入</p>
<p>順序</p>
</td>
<td></td>
<td><p>VAR_std: value1
VAR_list_a:
- value2
VAR_list_b:
- value3
- value4</p></td>
</tr>
<tr class="row-odd"><td><p>HOST_A</p></td>
<td><p>V
AR_std</p></td>
<td><p>va
lue1</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>HOST_A</p></td>
<td><p><a href="#id301"><span class="problematic" id="id302">VAR_</span></a>
list_a</p></td>
<td><p>va
lue2</p></td>
<td><p>10</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>HOST_A</p></td>
<td><p><a href="#id303"><span class="problematic" id="id304">VAR_</span></a>
list_b</p></td>
<td><p>va
lue3</p></td>
<td><p>100</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>HOST_A</p></td>
<td><p><a href="#id305"><span class="problematic" id="id306">VAR_</span></a>
list_b</p></td>
<td><p>va
lue4</p></td>
<td><p>200</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<ol class="arabic simple" start="2">
<li><p><strong>ホスト変数ファイルへの出力</strong></p></li>
</ol>
<div class="line-block">
<div class="line">代入値管理で登録した変数の具体値はホスト変数ファイルへ出力されます。</div>
<div class="line">Ansible-Legacyと
Ansible-Pioneerでは、作業実行時にPlaybookまたは対話ファイルで使用している</div>
<div class="line">変数の具体値が代入値管理に登録されていないと作業実行が想定外エラーとなります。</div>
<div class="line">Ansible-Legacy
Roleでは、代入値管理で具体値を登録した変数のみが作業実行時にホスト変数ファイルへ出力されます。多段変数も同様で具体値を登録しているメンバー変数のみとなります。</div>
<div class="line">e.g.)</div>
</div>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>変数定義</strong></p>
<p>VAR_users:</p>
<ul class="simple">
<li><p>name: alice</p></li>
</ul>
<p>authorized:</p>
<ul class="simple">
<li></li>
</ul>
<p>/tmp/alice/onekey.pub</p>
<p>mysql:</p>
<p>password:
mysql-password</p>
<p>hosts:</p>
<ul class="simple">
<li><p>&quot;127.0.0.1&quot;</p></li>
<li><p>&quot;localhost&quot;</p></li>
<li><p>name: bob</p></li>
</ul>
<p>略</p>
</th>
<th class="head"><p><strong>代
入値
管理
の登
録</strong></p></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
<td><p>ホ
スト</p></td>
<td><p>変数</p></td>
<td><p>メン
バー変数</p></td>
<td><p>具
体値</p></td>
<td><p>代
入順序</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>H
OST_A</p></td>
<td><p><a href="#id307"><span class="problematic" id="id308">VAR_</span></a>
users:</p></td>
<td><p>[0].name</p></td>
<td><p>v
alue1</p></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td><p>H
OST_A</p></td>
<td><p>VAR
_users</p></td>
<td><p>[1].au
thorized</p></td>
<td><p>v
alue2</p></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td><p><strong>HOS
T_Aの
ホス
ト変
数フ
ァイ
ルへ
の出
力内
容</strong></p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>VAR_u
sers:
| -</p>
<blockquote>
<div><dl class="simple">
<dt>name</dt><dd><p>:v</p>
</dd>
</dl>
</div></blockquote>
<p>alue1
| -</p>
<blockquote>
<div><p>.a</p>
</div></blockquote>
<p>uthor
ized:</p>
<blockquote>
<div><p>v</p>
</div></blockquote>
<p>alue2</p>
</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<ol class="arabic simple" start="3">
<li><p><strong>デフォルト値チェックオプション</strong></p></li>
</ol>
<p>複数ロール間でデフォルト値が一致していない変数に対して具体値の登録した場合に、警告メッセージを表示して登録させないパラメータを「ITA管理コンソール
システム設定」で設定することが出来ます。このパラメータはデフォルトでは未登録です。必要に応じて登録して下さい。</p>
<p>システム設定に登録する内容は以下の通りです。尚、システム設定については「利用手順マニュアル_管理コンソール」を参照してください。</p>
<p><strong>表 5.3-16 システム設定登録内容</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>項目</strong></p></th>
<th class="head"><p><strong>入力値</strong></p></th>
<th class="head"><p><strong>入
力</strong></p>
<p><strong>必
須</strong></p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>識別ID</p></td>
<td><p>ANSIBLE_DEF_VAL_CHK</p></td>
<td><p>○</p></td>
</tr>
<tr class="row-odd"><td><p>項目名</p></td>
<td><p>任意の文字列</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>設定値</p></td>
<td><p>1： パラメータ有効</p>
<p>1以外またはレコード未登録 ： パラメータ無効</p>
</td>
<td><p>○</p></td>
</tr>
<tr class="row-odd"><td><p>備考</p></td>
<td><p>任意の文字列</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="id204">
<h3>作業状態確認<a class="headerlink" href="#id204" title="この見出しへのパーマリンク">¶</a></h3>
<ol class="arabic">
<li><p>作業の実行状態を監視します。</p>
<a class="reference internal image-reference" href="../../../_images/image61.png"><img alt="../../../_images/image61.png" src="../../../_images/image61.png" style="width: 4.63326in; height: 5.27826in;" /></a>
</li>
</ol>
<p><strong>図5.3-32 サブメニュー画面（作業状態確認）</strong></p>
<ol class="arabic simple">
<li><dl class="simple">
<dt><a href="#id205"><span class="problematic" id="id206">**</span></a>実行状態表示</dt><dd><p><a href="#id207"><span class="problematic" id="id208">**</span></a>実行状況に即し、「ステータス」が表示されます。</p>
</dd>
</dl>
</li>
</ol>
<blockquote>
<div><p>また、実行ログ、エラーログに実行状況の詳細が表示されます。</p>
<div class="line-block">
<div class="line">「実行種別」には、ドライランの場合は「ドライラン」、それ以外は「通常」が表示されます。</div>
<div class="line">ステータスが想定外エラーで終了した場合、Webコンテンツの登録不備が原因であれば、エラーログにメッセージが表示されます。</div>
<div class="line">また、「<em>5.2.1インターフェース情報</em>」の登録不備等で、Ansible
RestAPIとの通信に失敗した場合にはエラーログにメッセージが表示されません。この場合は、アプリケーションログにエラー情報が記録されます。必要に応じてアプリケーションログを確認ください。</div>
</div>
<p>Symphonyから実行した場合に、「呼出元Symphony」には、どのSymphonyから実行されたかを表示します。</p>
<p>Conductorから実行した場合に、「呼出元Conductor」には、どのConductorから実行されたかを表示します。</p>
<p>Ansible-Legacy,Pioneer,LegacyRole,ドライバから直接実行した場合は空欄になります。</p>
<p>「実行ユーザ」には、作業実行メニューより「実行」ボタンまたは「ドライラン」ボタンを押下した際のログインユーザが表示されます。</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p><strong>作業対象ホスト確認</strong></p></li>
</ol>
<blockquote>
<div><p>「確認」ボタンで「<a class="reference external" href="#作業対象ホスト">5.3.10作業対象ホスト</a>」が表示され、作業対象のオペレーションとMovementに絞り込んだホストが表示されます。</p>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p><strong>代入値確認</strong></p></li>
</ol>
<blockquote>
<div><p>「確認」ボタンで「5.3.11<a class="reference external" href="#代入値管理">代入値管理</a>」が表示され、作業対象のオペレーションとMovementに絞り込んだ代入値が表示されます。</p>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p><strong>緊急停止/予約取り消し</strong></p></li>
</ol>
<blockquote>
<div><p>「緊急停止」ボタンで構築作業を停止させることができます。</p>
<p>また、実行前の「予約実行」の作業の場合は、「予約取消」ボタンが表示されます。「予約取消」ボタンで予約実行が取り消せます。</p>
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p><strong>実行ログ表示</strong></p></li>
</ol>
<blockquote>
<div><p>Ansible Automation
Controllerで実行した場合、構築対象機器の機器一覧のユーザー・パスワード・インスタンスグルーブなのどの項目値でグループ化された構築対象機器の単位でPlaybookが実行され、ansibleの実行ログが分割されます。</p>
<p>さらに、Movement一覧のオプションパラメータでジョブスライス数を指定するすることによりグループ化された構築対象機器をさらにジョブスライス数で分割しplaybookが実行され、ansibleの実行ログも分割されます。</p>
<p>実行ログが分割された場合、表示ログファイルのプルダウンが表示され、表示したいログファイルを選択する事ができます。</p>
</div></blockquote>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>要素</p></th>
<th class="head"><p>内容</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>mode名</p></td>
<td><p>実行したモード名 legacy/pioneer/legacy_role</p></td>
</tr>
<tr class="row-odd"><td><p>作業番号</p></td>
<td><p>作業管理メニューの作業実行No</p></td>
</tr>
<tr class="row-even"><td><p>グ
ループ番号</p></td>
<td><p>構築対
象機器の機器一覧のユーザー・パスワード・インスタンスグ
ルーブなのどの項目値でグルーブ化した1からの通番です。</p></td>
</tr>
<tr class="row-odd"><td><p>通番</p></td>
<td><p>ジョブスライ
ス数の設定によりグループ内を分割した1からの通番です。</p>
<p>0の場合は
ジョブスライス数による分割がなかったことのを表します。</p>
</td>
</tr>
</tbody>
</table>
<ol class="arabic" start="6">
<li><div class="line-block">
<div class="line">ログ検索**
  <a href="#id209"><span class="problematic" id="id210">**</span></a>実行ログ、エラーログは、フィルタリングができます。各ログのフィルタのテキストボックスに検索したい文字列を入力し、「該当行のみ表示」のチェックボックスをチェックすることで該当する行だけが表示されます。
| 実行ログ、エラーログのリフレッシュ表示間隔と最大表示行数を、「<em>5.2.1インターフェース情報</em>」の「状態監視周期（単位ミリ秒）」と「進行状態表示行数」で設定できます。</div>
</div>
</li>
<li><dl class="simple">
<dt><a href="#id211"><span class="problematic" id="id212">**</span></a>投入データ</dt><dd><p><a href="#id213"><span class="problematic" id="id214">**</span></a>実行したPlaybookなどをダウンロードすることができます。</p>
</dd>
</dl>
</li>
</ol>
<blockquote>
<div><p>投入データの構成は「 <em>8.1</em>
Ansible実行時に使用される投入データとITAメニューの紐づけ」を参照して下さい。</p>
</div></blockquote>
<ol class="arabic simple" start="8">
<li><dl class="simple">
<dt><a href="#id215"><span class="problematic" id="id216">**</span></a>結果データ</dt><dd><p><a href="#id217"><span class="problematic" id="id218">**</span></a>実行ログ、エラーログなどをダウンロードすることができます。</p>
</dd>
</dl>
</li>
</ol>
</section>
<section id="id219">
<h3>作業管理<a class="headerlink" href="#id219" title="この見出しへのパーマリンク">¶</a></h3>
<ol class="arabic simple">
<li><p>作業の履歴を閲覧できます。</p></li>
</ol>
<p>条件を指定し「フィルタ」ボタンをクリックすると、作業一覧テーブルを表示します。</p>
<p>「作業状態確認」ボタンで、「<em>5.3.12作業状態確認</em>」に遷移し、実行状態の詳細を見ることができます。</p>
<a class="reference internal image-reference" href="../../../_images/image63.png"><img alt="../../../_images/image63.png" src="../../../_images/image63.png" style="width: 6.12053in; height: 3.04693in;" /></a>
<p><a href="#id220"><span class="problematic" id="id221">**</span></a>図 5.3-33 サブメニュー画面（作業管理）
**</p>
</section>
<section id="id222">
<h3>作業実行<a class="headerlink" href="#id222" title="この見出しへのパーマリンク">¶</a></h3>
<ol class="arabic">
<li><p>作業の実行を指示します。Movement一覧、オペレーション一覧からそれぞれラジオボタンで選択し、実行ボタンを押すと、「<em>5.3.12作業状態確認</em>」に遷移し、実行されます。</p>
<a class="reference internal image-reference" href="../../../_images/image64.png"><img alt="../../../_images/image64.png" src="../../../_images/image64.png" style="width: 6.5739in; height: 3.82033in;" /></a>
</li>
</ol>
<p><strong>図 5.3-34 サブメニュー画面（作業実行）</strong></p>
<p>※画面はAnsible-LegacyRoleのものです。</p>
<ol class="arabic simple">
<li><p><a href="#id223"><span class="problematic" id="id224">**</span></a>ドライラン
<a href="#id225"><span class="problematic" id="id226">**</span></a>「ドライラン」ボタンをクリックすると、実際に対象機器に対して構築作業をせず、ドライランを行うことができます。ドライランを行った場合の、モード毎の動作は以下のとおりです。</p></li>
</ol>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Driver</p></th>
<th class="head"><p>動作</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Ansible-Legacy</p></td>
<td><p>Ansible-Playbookコマン
ドの—checkパラメータを指定しPlaybookを実行します。</p></td>
</tr>
<tr class="row-odd"><td><p>Ansible-Legacy
Role</p></td>
<td><p>Ansible-Playbookコ
マンドの—checkパラメータを指定しroleを実行します。</p></td>
</tr>
<tr class="row-even"><td><p>A
nsible-Pioneer</p></td>
<td><p>対象機器への接続チェックのみを行います。</p></td>
</tr>
</tbody>
</table>
<ol class="arabic" start="2">
<li><div class="line-block">
<div class="line"><strong>予約日時の指定</strong></div>
<div class="line">「予約日時」を入力することで、実行を予約することがきます。</div>
<div class="line">「予約日時」には、未来の日時のみ登録可能です。</div>
</div>
<ol class="arabic simple">
<li><p>作業実行時にアクセス許可ロールの適合判定</p></li>
</ol>
</li>
</ol>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Movement</p></th>
<th class="head"><p>ｵﾍﾟﾚｰｼｮﾝ</p></th>
<th class="head"></th>
<th class="head"><p>作業管理</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ｱｸｾｽ許可ﾛｰﾙ</p></td>
<td><p>ｱｸｾｽ許可ﾛｰﾙ</p></td>
<td></td>
<td><p>ｱｸｾｽ許可ﾛｰﾙ</p></td>
</tr>
<tr class="row-odd"><td><p>空白</p></td>
<td><p>空白</p></td>
<td></td>
<td><p>空白</p></td>
</tr>
<tr class="row-even"><td><p>空白</p></td>
<td><p>Role_A</p></td>
<td></td>
<td><p>Role_A</p></td>
</tr>
<tr class="row-odd"><td><p>Role_B</p></td>
<td><p>Role_B</p></td>
<td></td>
<td><p>Role_B</p></td>
</tr>
<tr class="row-even"><td><p>Role_B,Role_C</p></td>
<td><p>R
ole_B,Role_C</p></td>
<td></td>
<td><p>Role_B</p></td>
</tr>
<tr class="row-odd"><td><p>Role_D</p></td>
<td><p>Role_E</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Movement一覧、オペレーション一覧で選択したMovementとオペレーションの各アクセス許可ロールで一致するロールがあるかを判定します。一致するロールが無い場合、その旨のエラーメッセージが表示され作業実行は出来ません。また、一致するロールが作業管理のアクセス許可ロールとして設定されます。また、アクセス許可ロールが空白の場合は、全てのロールへのアクセスが可能として扱われます。各アクセス許可ロールが空白の場合、作業管理のアクセス許可ロールも空白に設定されます。</p>
<p>アクセス許可ロールの詳細については「Exastro-ITA_利用手順マニュアル_データレコード毎のロールベースアクセス制御」を参照して下さい。</p>
</section>
</section>
</section>
<section id="id227">
<h1><span class="section-number">15. </span>構築コード記述方法<a class="headerlink" href="#id227" title="この見出しへのパーマリンク">¶</a></h1>
<section id="id228">
<h2><span class="section-number">15.1. </span>Playbook（Ansible-Legacy）の記述<a class="headerlink" href="#id228" title="この見出しへのパーマリンク">¶</a></h2>
<blockquote>
<div><p>5.3.3.<a class="reference external" href="#playbook素材集ansible-legacyのみ">Playbook素材集（Ansible-Legacyのみ）</a>」でアップロードされたPlaybookは、ITAで生成するママスタPlaybookよりinclude形式で実行されます。</p>
</div></blockquote>
<p>ITAで作成するマスターPlaybookはへッダーセクションとtasksセクションで構成されます。</p>
<ol class="arabic simple">
<li><p>へッダーセクション</p></li>
</ol>
<blockquote>
<div><p>アップロードするPlaybookにはヘッダーセクションは含む必要はありません。</p>
<p>ヘッダーセクションは、デフォルト値が決まっていますが、「5.3.2.<a class="reference external" href="#movement一覧">Movement一覧</a>」のヘッダーセクションで変更することが出来ます。</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>tasksセクション</p></li>
</ol>
<blockquote>
<div><p>アップロードされたPlaybookは、ITAで生成するマスタPlaybookよりinclude形式で実行されます。</p>
<p>Playbook基本書式についてはAnsibleの公式マニュアルを参照してください。</p>
<p>Playbook内のインデントは2倍数で調整してください。</p>
<p>文字コードは、UTF-8のBOMなしで作成して下さい。</p>
<p>アップロードさたPlaybookは、「5.3.7.<a class="reference external" href="#movement-playbook紐付movement-対話種別紐付movement-ロール紐付">Movement-Playbook紐付（Movement-対話種別紐付、Movement-ロール紐付）</a>」のインクルード順序に従いincludeします。</p>
</div></blockquote>
</section>
<section id="id229">
<h2><span class="section-number">15.2. </span>対話ファイル（Ansible-Pioneer）の記述<a class="headerlink" href="#id229" title="この見出しへのパーマリンク">¶</a></h2>
<p>Ansible-Pioneerでは、ITA独自モジュールをAnsibleに組込んでいます。</p>
<p>対話ファイルはITA独自書式となります。</p>
<blockquote>
<div><p>文字コードは、UTF-8のBOMなで作成して下さい。</p>
<p>対話ファイルはYAML形式のファイルとして扱います。YAML形式に準じていない記述があると、対話ファイルのアップロード時や作業実行時にエラーとなります。詳しくは、本章の「(7)
対話ファイルをyaml形式で記載する際の注意事項」を参照して下さい。</p>
<p><strong>(1)</strong> 対話ファイルの構成</p>
</div></blockquote>
<p>対話ファイルは2種類のセクションにより構成されます。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>セクション名</p></th>
<th class="head"><p>用途</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Conf</p></td>
<td><p>timeoutパラメータによりタイムアウト値を指定します。</p>
<p>タイムアウト値:1～3600(単位:秒)</p>
</td>
</tr>
<tr class="row-odd"><td><p>exec_list</p></td>
<td><p>4種類
の対話コマンドにより作業対象ホストの構築を行います。</p></td>
</tr>
</tbody>
</table>
<p>対話ファイルの先頭にtimeoutパラメータを記述。以降に対話コマンドを記述します。</p>
<p>コメントはAnsibleの基本書式と同様の記述が出来ます。</p>
<p><strong>(2)</strong> 対話コマンド</p>
<p>対話コマンドは以下の5種類があります。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>モジュール</p></th>
<th class="head"><p>用途</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>exec</p></td>
<td><p>作業対象ホストにコマンドを投入します。</p></td>
</tr>
<tr class="row-odd"><td><p>expect</p></td>
<td><p>作業対象ホストが標準出力に出力する内容よ
り、期待する文字列(プロンプト)の出力を待ち合せます。</p></td>
</tr>
<tr class="row-even"><td><p>state</p></td>
<td><p>作業対象ホストにコ
マンドを投入し、標準出力にプロンプトを出力するまでの
標準出力の内容を外部Shellで解析し結果判定をします。</p></td>
</tr>
<tr class="row-odd"><td><p>command</p></td>
<td><p>作業対象ホストにコマンドを投入する前
後において、繰り返しや条件分岐を行うことができます。</p></td>
</tr>
<tr class="row-even"><td><p>localaction</p></td>
<td><p>Ansible/Ansible Automation
Controllerサーバ上でコマンドを実行します。</p></td>
</tr>
</tbody>
</table>
<ol class="arabic simple">
<li><p>expectモジュール</p></li>
</ol>
<p>作業対象ホストが標準出力に出力する内容より、期待する文字列(プロンプト)の出力を待ち合せます。期待する文字列を正規表記で記述できます。</p>
<p>期待する文字列を受取ると次へ進みます。また、timeoutパラメータで指定された時間内に受取れない場合は対話ファイルを異常終了します。</p>
<ol class="arabic simple" start="2">
<li><p>execモジュール</p></li>
</ol>
<p>作業対象ホストにコマンドを投入します。</p>
<p>execモジュールとexpectモジュールは対で使用します。</p>
<ol class="arabic simple" start="3">
<li><p>stateモジュール</p></li>
</ol>
<p>作業対象ホストにコマンドを投入し、標準出力にプロンプトを出力するまでの標準出力の内容を外部Shellで解析し結果判定をします。</p>
<p>stateモジュールの書式</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>パラメータ</p></th>
<th class="head"><p>必
須/</p>
<p>任意</p>
</th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>△△－△state:△xxx</p></td>
<td><p>必須</p></td>
<td><p>投入するコマンドを指定します。</p></td>
</tr>
<tr class="row-odd"><td><p>△△△△prompt:△xxx</p></td>
<td><p>必須</p></td>
<td><p>待受けプロンプ
トを指定します。正規表記で記述できます。</p></td>
</tr>
<tr class="row-even"><td><p>△△△△shell:△xxx</p></td>
<td><p>任意</p></td>
<td><p>作成したshellで結果を確認
する場合に、shellファイル名を指定します。</p>
<p>作成したshellのexitコー
ドが0の場合は正常、他は異常と判定します。</p>
<p>デフ
ォルトのshellで結果を確認する場合、本パラ
メータは不要となります。デフォルトのshel
lはparameter(-)で指定された文字列で標準出
力の内容をgrepします。マッチする行が1行で
もあれば正常とし、マッチする行がなければ
異常と判定します。また、parameterを指定し
なかった場合、異常と判定されます。コマン
ドの結果(標準出力)をstdout_fileで指定した
ファイルに退避したい目的で使用する場合、
ignore_errorsで「yes」を指定して下さい。</p>
</td>
</tr>
<tr class="row-odd"><td><p>△△△△parameter:</p>
<p>△△△△△△-△xxx</p>
<p>△△△△△△-△xxx</p>
</td>
<td><p>任意</p></td>
<td><p>投入するコマンドの結果
(標準出力)を検索する文字列を指定します。</p>
<p>shellを指定している場合、
作成したshellの実行時パラメータとなります
。複数ある場合は検索文字列を列挙します。</p>
</td>
</tr>
<tr class="row-even"><td><p>△△△
△stdout_file:△xxx</p></td>
<td><p>任意</p></td>
<td><p>投入するコマンド
の結果(標準出力)を退避するファイルです。</p></td>
</tr>
<tr class="row-odd"><td><p>△
△△△success_exit:△
xxx</p></td>
<td><p>任意</p></td>
<td><p>検索結果が正常
の場合で対話ファイルを正常終了する場合に
「yes」を指定します。「no」の場合は正常の
場合は次に進みます。デフォルトは「no」。</p></td>
</tr>
<tr class="row-even"><td><p>△△
△△ignore_errors:△
xxx</p>
<p>※△:半角スペース</p>
</td>
<td><p>任意</p></td>
<td><p>検索結果が異
常でも次に進む場合に「yes」を指定します。</p>
<p>「no」の場合は、異常の場合に対話ファイル
を異常終了とします。デフォルトは「no」。</p>
</td>
</tr>
</tbody>
</table>
<ol class="arabic simple" start="4">
<li><p>commandモジュール</p></li>
</ol>
<p>作業対象ホストにコマンドを投入する前後において、繰り返しや条件分岐を行うことができます。</p>
<p>commandモジュールの書式</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>パラメータ</p></th>
<th class="head"><p>必
須
/</p>
<p>任
意</p>
</th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>△△－△command:△xxx</p></td>
<td><p>必
須</p></td>
<td><p>投入するコマンドを指定します。</p></td>
</tr>
<tr class="row-odd"><td><p>△△△△prompt:△xxx</p></td>
<td><p>必
須</p></td>
<td><p>待受けプロン
プトを指定します。正規表記で記述できます。</p></td>
</tr>
<tr class="row-even"><td><p>△△△△timeout:△xxx</p></td>
<td><p>任
意</p></td>
<td><p>コマンドを送っ
てからのプロンプト待ちタイマを指定します。</p>
<p>省略さ
れている場合は、conf-&gt;timeoutを使用します。</p>
</td>
</tr>
<tr class="row-odd"><td><p>△△△△register:△xxx</p></td>
<td><p>任
意</p></td>
<td><p>コマンドを送信後に標準出力の情報を設定す
る変数「任意の文字列」を指定します。with_it
emsでループしている場合は、最後のコマンド送
信後の標準出力の情報が設定されます。設定し
た変数はcommandモジュールの条件判定(when・
exec_when・failed_when)でのみ使用できます。</p>
<p>設定した変数は、1つのみ保持
できます。次にregisterで別の変数に値を設定
した場合、前に設定した変数は削除されます。</p>
</td>
</tr>
<tr class="row-even"><td><p>△△△△with_items:</p>
<p>△△
△△△△-△<strong>’</strong>{{
VAR_x }}<strong>’</strong></p>
<div class="line-block">
<div class="line">△△</div>
</div>
<dl class="simple">
<dt>△△△△-△<strong>’</strong>{{</dt><dd><p>VAR_y }}<strong>’</strong></p>
</dd>
</dl>
<div class="line-block">
<div class="line"><a href="#id230"><span class="problematic" id="id231">**</span></a>定</div>
</div>
<p>義する変数はシン
グルクォーテーシ
ョンテーションで
囲んで下さい。**</p>
</td>
<td><p>任
意</p></td>
<td><p>w
ith_itemsにコマンドをループして投入する場合
に複数具体値変数の変数名を設定します。各変
数のスコープはitem.X(Xは0から99)とします。</p>
<blockquote>
<div><p>prompt、timeoutでwith_itemsを利用す</p>
</div></blockquote>
<p>る場合の変数名は下記の通りにしてください。</p>
<blockquote>
<div><p>prompt： {{△VAR_prompt_XXX△}}</p>
<p>timeout： {{△VAR_timeout_XXX△}}</p>
<p>(△は半角スペー</p>
</div></blockquote>
<p>ス。XXXは任意の半角英数字とアンダースコア)</p>
<div class="line-block">
<div class="line">with_itemsに設定する各</div>
</div>
<p>変数の具体値数が同じでない場合、各変数の具
体値数の最大値数でループします。具体値が不
足している変数の具体値は空として扱います。
| また、promptやtimeoutでwith_item
sを利用する場合、具体値数に注意が必要です。
| prompt→command→prompt→command→prompt</p>
<p>・・・(以下ループ)となり、command数+1の具体
値を設定する必要があります。(timeoutも同様)
| prompt、timeout</p>
<blockquote>
<div><p>の変数の具体値数が不足</p>
</div></blockquote>
<p>していると、作業実行時にエラーになります。</p>
<blockquote>
<div><p>with_itemsで定義した変数はregister/whe</p>
</div></blockquote>
<p>n以外でitem.Xでスコープすることが出来ます。</p>
<blockquote>
<div><div class="line-block">
<div class="line">Exp）</div>
<div class="line">with_items:</div>
<div class="line">－ ‘{{ VAR_item1 }}’ #item.0**
** － ‘{{ VAR_item2 }}’ #item.1</div>
<div class="line">exec_when:</div>
</div>
<p>－ ‘{{ item.0 }} == active’</p>
<p>－ ‘{{ item.0 }} == {{ VAR_status }}’</p>
<p>－ ‘register変数 match({{ item.0 }})</p>
</div></blockquote>
<p>failed_when:</p>
<p>－ ‘stdout match({{ item.1 }})’</p>
</td>
</tr>
<tr class="row-odd"><td><p>△△△△when:</p>
<p>△△△△△△-△xxx</p>
<p>△△△△△△-△xxx</p>
</td>
<td><p>任
意</p></td>
<td><p>command実行前の条件判定です。</p>
<p>条件にマッチしてcommand実行します。</p>
<p>条件にマ
ッチしていなければ次のcommand行に移ります。</p>
<p>条件式</p>
<p>変数定義判定</p>
<p>VAR_xx is define 変数が定義されている true</p>
<p>VAR_xx is undefine 変数が未定義 true</p>
<p>Exp）</p>
<p>－ ‘VAR_status is define’</p>
<p>－ ‘VAR_status is undefine’</p>
<p>※def
ine/undefineはITAの変数(VAR_xx)のみ指定可能</p>
<p>変数具体値判定</p>
<p>VAR_xx/register変数 比較演算子 文字列</p>
<p>VAR_xx/register変数 比較演算子 VAR_xx</p>
<p>VAR_xx/register変数
match(正規表記文字列/VAR_xx)</p>
<p>VAR_xx/register変数 no
match(正規表記文字列/VAR_xx)</p>
<p>※比較演算子は「
==」、「!=」、「&gt;」、「&gt;=」、「&lt;」、「&lt;=」</p>
<p>※比較演算子の「&gt;」、「
&gt;=」、「&lt;」、「&lt;=」は数値を想定しています。</p>
<p>Exp）</p>
<blockquote>
<div><p>－ ‘{{ VAR_status }} match(active)’</p>
<p>－ ‘{{ VAR_status }} == active’</p>
<p>－ ‘register変数match(active)’</p>
<p>※activeなどの条件判定する文字列をクォ</p>
</div></blockquote>
<p>ーテーションで囲む必要はありません<strong>。</strong></p>
<p>and/orによる複合条件</p>
<p>or条件を行
いたい場合、判定条件の間にORを記述します。</p>
<p>Exp）</p>
<blockquote>
<div><p>－ ‘{{ VAR_status }} == 1　OR {{
VAR_status }} == 2’</p>
</div></blockquote>
<p>and条件を行いたい場合、
複数行に分けて記述するとand条件になります。</p>
<p>Exp）</p>
<blockquote>
<div><p>－ ‘{{ VAR_status }} == 1　OR {{
VAR_status }} == 2’</p>
<p>－ ‘{{ VAR_sub_status }} == 1’</p>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><p>△△△△exec_when:</p>
<p>△△△△△△-△xxx</p>
<p>△△△△△△-△xxx</p>
</td>
<td><p>任
意</p></td>
<td><p>ループ毎の条件判定です。(continue条件)</p>
<p>with_item
sが記述されている場合に条件判定を行います。</p>
<p>条件にマッチ
していれば該当ループのcommandを実行します。</p>
<p>マッチしていなければ次のループへ移ります。</p>
<p>条件式</p>
<p>　when:と同様の記述が行えます。</p>
</td>
</tr>
<tr class="row-odd"><td><p>△△△△failed_when:</p>
<p>△△△△△△-△xxx</p>
<p>△△△△△△-△xxx</p>
<p>※△:半角スペース</p>
</td>
<td><p>任
意</p></td>
<td><p>command実行後(ル
ープ毎)のstdoutの内容に対する条件判定です。</p>
<p>with_item
sが記述されている場合に条件判定を行います。</p>
<p>条件にマッチしていれば正常とします。</p>
<p>マッチしていなければ
異常とし、対話ファイルを異常終了させます。</p>
<p>条件式</p>
<p>変数具体値判定</p>
<p>stdout 比較演算子 文字列</p>
<p>stdout 比較演算子 VAR_xx</p>
<p>stdout match(正規表記文字列/VAR_xx)</p>
<p>stdout no match(正規表記文字列/VAR_xx)</p>
<p>※比較演算子は「
==」、「!=」、「&gt;」、「&gt;=」、「&lt;」、「&lt;=」</p>
<p>※比較演算子の「&gt;」、「
&gt;=」、「&lt;」、「&lt;=」は数値を想定しています。</p>
<p>Exp）</p>
<blockquote>
<div><p>－ ‘stdout == {{ VAR_status}}’</p>
<p>－ ‘stdout match(active)’</p>
<p>－ ‘stdout match({{ VAR_when }})’</p>
<p>※activeなどの条件判定する文字列をクォ</p>
</div></blockquote>
<p>ーテーションで囲む必要はありません<strong>。</strong></p>
<p>and/orによる複合条件</p>
<p>　when:と同様の記述を行います。</p>
</td>
</tr>
</tbody>
</table>
<ol class="arabic simple" start="5">
<li><p>localactionモジュール</p></li>
</ol>
<p>Ansible/Ansible Automation Controllerサーバ上でコマンドを実行します。</p>
<p>localactionモジュールの書式</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>パラメータ</p></th>
<th class="head"><p>必
須/</p>
<p>任意</p>
</th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>△△－
△localaction:△xxx</p></td>
<td><p>必須</p></td>
<td><p>実行するコマンドを指定します。
confセクションのtimeoutパラメ
ータでのタイマ監視は適用外です。コマンド
が完了するまで次のステップに進みません。</p></td>
</tr>
<tr class="row-odd"><td><p>△△
△△ignore_errors:△
xxx</p>
<p>※△:半角スペース</p>
</td>
<td><p>任意</p></td>
<td><p>コマンドの実行結果が異
常でも次に進む場合に「yes」を指定します。</p>
<p>「no」の場合は、異
常の場合に対話ファイルを異常終了します。</p>
<p>デフォルトは「no」。</p>
</td>
</tr>
</tbody>
</table>
<p><strong>(3)</strong> 正規表記</p>
<p>下記のコマンド及びパラメータに記述された文字列は正規表記で評価されます。</p>
<blockquote>
<div><p>・expectモジュール</p>
<p>・stateモジュールのpromptパラメータ</p>
<p>・commandモジュールのpromptパラメータ</p>
</div></blockquote>
<p>正規表記で記述した文字列にメタ文字「(){}.など」を含む場合、メタ文字の前にエスケープ文字「\」を挿入する必要があります。</p>
<p>stateモジュールとcommandモジュールは、実行したコマンドの結果（標準出力）の取り出しを行っています。取り出す上での留意事項を以下に記述します。</p>
<ol class="arabic">
<li><p>実行したコマンドの結果（標準出力）とプロンプトの区切り</p>
<p>実行したコマンドの結果（標準出力）とプロンプトの区切りをpromptパラメータで指定された文字列で行います。実行したコマンドの結果（標準出力）の判定やファイルへの保存を行う場合は、正規表記で
.*
付の後方一致は記述しないで下さい。実行したコマンドの結果（標準出力）が取り出せません。</p>
<p>　.* 付の後方一致の正規表記の例</p>
<p>　　　‘<strong>.*</strong>[\#\$\%] $’</p>
</li>
<li><p>エスケープシーケンスの対応</p>
<p>構築対象機器に依存しますが、構築対象機器から送られてくるプロンプトの直前にOperating
System
Commandシーケンスが付加されている場合があります。promptパラメータで指定された文字列の直前にあるエスケープシーケンスを排除しています。</p>
</li>
</ol>
<blockquote>
<div><p><strong>(4)</strong> 複数具体値変数使用時の注意事項</p>
</div></blockquote>
<p>対話ファイルで複数具体値変数が使用出来るパラメータは、commandモジュールのwith_itemsパラメータのみです。これ以外で使用した場合、作業実行時にエラーとなります。</p>
<p><strong>(5)</strong> コマンドプロンプト以外のプロンプトを処理する場合の注意事項</p>
<p>コマンドプロンプト以外のプロンプトを処理する場合、execモジュールとexpectモジュールの組合せで対話ファイルを作成して下さい。commandとstateモジュールでは処理できません。</p>
<p><strong>(6)</strong> 対話ファイル終了時の注意事項</p>
<div class="line-block">
<div class="line">対話ファイルの最後に、セッションを終了するコマンドを投入するようにして下さい。</div>
<div class="line">最終行のモジュールが終了するとセッションをクローズします。最終行にファイルコピーなど処理に時間がかかるコマンドが記載されている場合、コマンド終了前にセッションがクローズされコマンドが異常終了してしまう場合があります。</div>
</div>
<p><strong>(7)</strong> 対話ファイルをyaml形式で記載する際の注意事項</p>
<p>対話ファイルはyaml形式のファイルとして扱います。以下のようなYAML形式に準じていない記載があると対話モジュールのアップロード時や作業実行時にエラーとなります。</p>
<p>・各モジュールのパラメータに変数を記載している場合でパラメータ全体をクォーテーションで囲んでいない場合。</p>
<p>・各パラメータを定数のみで記載している場合で、定数の終端が「<strong>:</strong>」の場合など、パラメータ全体をクォーテーションで囲んでいない場合。</p>
<p>各モジュールのパラメータは、パラメータ全体をクォーテーションで囲むことを推奨します。</p>
<p><strong>(8)</strong> 構築対象機器のログインユーザーのLANGについての注意事項</p>
<p>ログインユーザーの「LANG」は、「UTF-8/euc/shift_jis」の3種類についてサポートしています。</p>
<p>ログインユーザーの「LANG」の設定は機器一覧より行ってください。</p>
<p>「euc/shift_jis」を設定した場合、構築対象機器との通信制御で使用しているpexpectモジュールのUTF-8へのデコード処理の特性で対話ファイルを正しく処理出来ない場合があります。</p>
<p>・一部の全角文字( ①②
等)をUTF-8にデコード出来ません。デコード出来ない文字は??で表示されます。</p>
<p>・一部の全角文字( －
等)をexpect等のプロンプト待ちで使用した場合、「LANG」がUTF-8では待ち受けが正しく出来ますが、LANGが「euc/shift_jis」では待ち受けがタイムアウトしてしまいます。</p>
<p><strong>(9)</strong> 構築対象機器へ投入するコマンドの終端コードについての注意事項</p>
<blockquote>
<div><p>構築対象機器へ投入するコマンドの終端コードは「LF」を送信します。構築対象機器のコマンド終端コードが「CRLF」の場合、対話ファイルで構築対象機器に投入するコマンドの末尾に「\r」を追加して下さい。</p>
</div></blockquote>
</section>
<section id="id232">
<h2><span class="section-number">15.3. </span>ロールパッケージ（Ansible-Legacy Role）の記述<a class="headerlink" href="#id232" title="この見出しへのパーマリンク">¶</a></h2>
<p>基本書式についてはAnsibleベストプラクティスの公式マニュアルを参照してください。</p>
<blockquote>
<div><p>「<a class="reference external" href="l">5.3.4
ロールパッケージ管理</a>」でアップロードするロールパッケージファイルのZipに含めるべきディレクトリと、ITAでの扱いについて記述します。</p>
<p><strong>(上位ディレクトリ)</strong></p>
<p><strong>│</strong></p>
<p><strong>├─site.yml site.yml(マスターPlaybook)はITAで作成します。</strong></p>
<p><strong>│ 存在する場合は上書きします。</strong></p>
<p><strong>│</strong></p>
<p><strong>├─hosts hostsファイルは ITA で作成します。</strong></p>
<p><strong>│ 存在する場合は上書きします。</strong></p>
<p><strong>│</strong></p>
<p><strong>├─group_vars ホストグループ変数は扱えません。</strong></p>
<p><strong>│ group_varsディレクトリが存在する場合は削除します。</strong></p>
<p><strong>│</strong></p>
<p><strong>├─host_vars ホスト変数は ITA で作成します。</strong></p>
<p><strong>│ host_varsディレクトリが存在する場合が上書きします。</strong></p>
<p><strong>│</strong></p>
<p><strong>├─ITA readme ITA
readmeはロール毎に定義します。無くてもエラーにはなりません。</strong></p>
</div></blockquote>
<p><strong>│　　　　　　　　　　　　　ITA
readmeは、文字コードがUTF-8のBOMなしで作成して下さい。</strong></p>
<blockquote>
<div><p><strong>│ ITA readmeのファイル名の命名規則</strong></p>
<p><strong>│ ita_readme_[ロール名].yml</strong></p>
<p><strong>│ e.g.)</strong></p>
<p><strong>│ ロール名: mysql ファイル名: ita_readme_mysql.yml</strong></p>
<p><strong>│ ロール名: mysql/install ファイル名:
ita_readme_mysql%install.yml</strong></p>
<p><strong>│ ※roleのディレクトリ階層が深い場合、ロール名に</strong></p>
<p><strong>│ 含まれる / を % に置き換える必要があります。</strong></p>
<p><strong>│</strong></p>
<p><strong>├─読替表
読替表はロール毎に定義します。無くてもエラーにはなりません。</strong></p>
<p><strong>│ 読替表のファイル名の命名規則</strong></p>
<p><strong>│ ita_translation-table_[ロール名].txt</strong></p>
<p><strong>│ e.g.)</strong></p>
<p><strong>│ ロール名: mysql ファイル名: ita_translation-table_mysql.txt</strong></p>
<p><strong>│ ロール名: mysql/install ファイル名:
ita_translation-table_mysql%install.txt</strong></p>
<p><strong>│ ※roleのディレクトリ階層が深い場合、ロール名に</strong></p>
<p><strong>│ 含まれる / を % に置き換える必要があります。</strong></p>
<p><strong>│</strong></p>
<p><strong>│ 上記以外のディレクトリやファイルが存在する場合、 ITA
は関知しません。</strong></p>
<p><strong>│</strong></p>
<p><strong>└─roles
rolesディレクトリが存在しない場合はアップロードでエラーになります。</strong></p>
<p><strong>│</strong></p>
<p><strong>├─[role名①]
role名ディレクトリが存在しない場合はアップロードでエラーになります。</strong></p>
<p><strong>│ │ tasksディレクトリを含むディレクトリをroleとして扱います。</strong></p>
<p><strong>│ │ ディレクトリ階層が深くても問題ありません。</strong></p>
<p><strong>│ │</strong></p>
<p><strong>│ ├─readme.md ITA は関知しません。</strong></p>
<p><strong>│ ├─tasks tasksディレクトリは必須です。</strong></p>
</div></blockquote>
<p><strong>│　│　│
　　　　　　　playbookファイルは、文字コードがUTF-8のBOMなで作成して下さい。</strong></p>
<blockquote>
<div><p><strong>│ │ ├ main.yml
main.ymlがない場合はアップロードでエラーになります。</strong></p>
<p><strong>│ │ └ user_files main.yml以外のファイルも配置できます。</strong></p>
<p><strong>│ │ └ user.yml
サブディレクトリにmain.yml以外のファイルを配置できます。</strong></p>
<p><strong>│ │</strong></p>
<p><strong>│ ├─handlers handlersディレクトリの有無は関知しません。</strong></p>
</div></blockquote>
<p><strong>│　│　│
　　　　　　　playbookファイルは、文字コードがUTF-8のBOMなしで作成して下さい。</strong></p>
<blockquote>
<div><p><strong>│ │ ├ main.yml main.ymlの有無は関知しません。</strong></p>
<p><strong>│ │ └ user_files main.yml以外のファイルも配置できます。</strong></p>
<p><strong>│ │ └ user.yml サブディレクトリにファイルを配置できます。</strong></p>
<p><strong>│ │</strong></p>
<p><strong>│ ├─templates templatesディレクトリの有無は関知しません。</strong></p>
<p><strong>│ │ ├ hosts.j2 サブディレクトリにファイルを配置できます。</strong></p>
<p><strong>│ │ └ user_files</strong></p>
<p><strong>│ │ └ user.j2</strong></p>
<p><strong>│ │</strong></p>
<p><strong>│ ├─files filesディレクトリの有無は関知しません。</strong></p>
<p><strong>│ │ └sudoers ファイル及びサブディレクトリの有無は関知しません。</strong></p>
<p><strong>│ │ ファイル内容は関知しません。</strong></p>
<p><strong>│ │</strong></p>
<p><strong>│ ├─vars varsディレクトリの有無は関知しません。</strong></p>
</div></blockquote>
<p><strong>│　│　│
　　　　　　　playbookファイルは、文字コードがUTF-8のBOMなしで作成して下さい。</strong></p>
<blockquote>
<div><p><strong>│ │ └ main.yml ファイル及びサブディレクトリの有無は関知しません。</strong></p>
<p><strong>│ │ ファイル内容は関知しません。</strong></p>
<p><strong>│ │</strong></p>
<p><strong>│ ├─defaults defaultsディレクトリの有無は関知しません。</strong></p>
</div></blockquote>
<p><strong>│　│　│
　　　　　　　playbookファイルは、文字コードがUTF-8のBOMなしで作成して下さい。</strong></p>
<blockquote>
<div><p><strong>│ │ ├ main.yml main.ymlの有無は関知しません。</strong></p>
<p><strong>│ │ └ user_files main.yml以外のファイルも配置できます。</strong></p>
<p><strong>│ │ └ user.yml
サブディレクトリにmain.yml以外のファイルを配置できます。</strong></p>
<p><strong>│ │</strong></p>
<p><strong>│ ├─meta metaディレクトリの有無は関知しません。</strong></p>
</div></blockquote>
<p><strong>│　│　│
　　　　　　　playbookファイルは、文字コードがUTF-8のBOMなしで作成して下さい。</strong></p>
<blockquote>
<div><p><strong>│ │ └main.yml ファイル及びサブディレクトリの有無は関知しません。</strong></p>
<p><strong>│ │ ファイル内容は関知しません。</strong></p>
<p><strong>│ │</strong></p>
<p><strong>│ 上記以外のディレクトリやファイルが存在する場合、 ITA
は関知しません。</strong></p>
<p><a href="#id233"><span class="problematic" id="id234">**</span></a>│　**</p>
<p><strong>└─[role名②] ロールの数に特に制限はありません。</strong></p>
</div></blockquote>
<ol class="arabic">
<li><p>マスターPlaybook</p>
<p>ITAで作成するマスターPlaybookはへッダーセクションとrolesセクションで構成されます。</p>
<ol class="arabic simple">
<li><p>へッダーセクション</p></li>
</ol>
</li>
</ol>
<blockquote>
<div><p>ヘッダーセクションは、デフォルト値が決まっていますが、「5.3.2.<a class="reference external" href="#movement一覧">Movement一覧</a>」のヘッダーセクションで変更することが出来ます。</p>
</div></blockquote>
<ol class="arabic" start="2">
<li><p>rolesセクション</p>
<p>アップロードさたロールパッケージ内のロールを、「5.3.7.<a class="reference external" href="#movement-playbook紐付movement-対話種別紐付movement-ロール紐付">Movement-Playbook紐付（Movement-対話種別紐付、Movement-ロール紐付）</a>」のインクルード順序に従いroleで実行します。</p>
</li>
</ol>
<ol class="arabic" start="2">
<li><p>変数名の一意管理</p>
<p>ITAの代入値管理で登録された変数の情報はホスト変数として扱います。変数名はドライバー毎の</p>
<p>全ロールパッケージで一意管理します。ロールを跨って同じ変数名を使用しているが変数構造が違う場合は、アップロード時にエラーとなります。</p>
<p>例えば、通常変数と多段変数や多段変数同士で多段構造が違う場合など。</p>
</li>
<li><p>デフォルト変数定義ファイル(defaults-&gt;main.yml)のITA独自仕様</p>
<p>デフォルト変数定義ファイルの記述(変数定義)にはITA独自仕様があります。</p>
<p>詳しくは、別資料
「利用手順マニュアル_Ansible-driver_別紙_Ansible利用ガイドライン_追加ルール」を参照してください。</p>
</li>
<li><p>Ansible Role Directory
Structureにおける所定ディクレトリのサブディレクトリについて注意事項</p></li>
</ol>
<p>Ansible Role Directory
Structureにおける所定ディクレトリの下位に当該の所定ディクレトリ名と</p>
<p>同名のサブディレクトリ（例えば、filesディレクトリの下位にそれと同名のfilesディレクトリなど）を</p>
<p>作成されていると、作業実行時にエラーになります。*</p>
<ol class="arabic" start="4">
<li><p>ロールパッケージ内のロール名をディレクトリ階層にした場合の留意点</p>
<p>下記のようなディレクトリ階層のロールパッケージを例に説明します。</p>
</li>
</ol>
<blockquote>
<div><p><strong>└─roles</strong></p>
<p><strong>├─parent</strong></p>
<p><strong>│ ├─sample_role1</strong></p>
<p><strong>│ │ ├─defaults</strong></p>
<p><strong>│ │ └─tasks</strong></p>
<p><strong>│ └─sample_role2</strong></p>
<p><strong>│ ├─defaults</strong></p>
<p><strong>│ ├─sample_role3</strong></p>
<p><strong>│ │ ├─defaults</strong></p>
<p><strong>│ │ └─tasks</strong></p>
<p><strong>│ ├─sample_role4</strong></p>
<p><strong>│ │ ├─defaults</strong></p>
<p><strong>│ │ └─tasks</strong></p>
<p><strong>│ └─tasks</strong></p>
<p><strong>├─sample_role5</strong></p>
<p><strong>│ └─defaults</strong></p>
<p><strong>└─sample_role6</strong></p>
<p><strong>├─defaults</strong></p>
<p><strong>└─tasks</strong></p>
</div></blockquote>
<ol class="arabic simple">
<li><p>ロールとして認識するディレクトリは、tasksディレクトリがあるディレクトリになります。</p></li>
</ol>
<blockquote>
<div><p>この例だと。ロールして扱うディレクトリ階層(ロール名)は以下の3個になります。</p>
<p>・parent/sample_role1</p>
<p>・parent/sample_role2</p>
<p>・sample_role6</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>tasksディレクトリが複数あるディレクトリ階層の除外</p></li>
</ol>
<blockquote>
<div><p>parent/sample_role2/sample_role3とparent/sample_role2/sample_role4にもtasksディレクトリがありますが、parent/sample_role2にtasksディレクトリがありロールとして認識していますので、ロールとして扱いません。</p>
</div></blockquote>
</section>
<section id="itareadme-ansible-legacy-role">
<h2><span class="section-number">15.4. </span>ITAreadme（Ansible-Legacy Roleのみ）の記述<a class="headerlink" href="#itareadme-ansible-legacy-role" title="この見出しへのパーマリンク">¶</a></h2>
<blockquote>
<div><p>代入値管理機能は、defaults変数定義ファイルに定義した変数の型を解釈して、</p>
<p>各変数およびそのメンバー変数などに変数の値を設定します。</p>
<p>Playbook中に直接変数を定義したくない場合など、defaults変数定義ファイルに変数が定義されていない場合、ITA
readmeファイルに変数の定義を設定することで、代入値管理機能で変数の値を指定することができます。</p>
</div></blockquote>
<p><strong>(1)</strong> ITA readmeのファイル名の命名規則</p>
<blockquote>
<div><p>　　　ita_readme_[ロール名].yml</p>
<p>　　　　e.g.)</p>
<p>　　　　 ロール名: mysql ファイル名: ita_readme_mysql.yml</p>
<p>　　　　 ロール名: mysql/install ファイル名:
ita_readme_mysql%install.yml</p>
<p>※roleのディレクトリ階層が深い場合、ロール名に</p>
<p>　　　　　　　　　　　　　　　 含まれる / を %
に置き換える必要があります。</p>
</div></blockquote>
<p><strong>(2)</strong> 読替表のフォーマット</p>
<p>フォーマットはYAML形式となります。</p>
<p>文字コードはUTF-8のBOMなしで作成して下さい。</p>
<blockquote>
<div><p>ITA readmeファイルと、代入値管理機能の関係を以下の図に示します。</p>
<p>Playbook中に無い変数をITA
readmeファイルで定義した場合、定義した変数を代入値管理機能で</p>
<p>値を設定することができます。</p>
<p>また、Playbook中の変数と異なる型をITA readme
ファイルで定義した場合、代入値管理機能には、</p>
<p>上書きした変数の型で値を登録することができます。</p>
<p>代入値管理機能で設定した値は、各ホスト用に変数定義ファイル(host_vars)に出力され、</p>
<p>Ansibleで元のPlaybookと変数定義用ファイルを入力として各ホストに実行されます。</p>
<p>ITA readme
ファイルは代入値管理機能に変数情報を与えるためだけに使用され、ITA
readme
に定義した変数および、変数の値はAnsible実行には影響を与えません。</p>
<p>ITA readmeの作成は任意です。ITA
readmeとdefaults変数定義ファイルで変数定義が重なった場合など、以下のルールで処理されます。</p>
<p><strong>表 6.4-1変数採用ルール</strong></p>
</div></blockquote>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>de
faults変数</p>
<p>定
義ファイル</p>
</th>
<th class="head"><p>ITA readme</p></th>
<th class="head"><p>変数定義の採用先</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>定義あり</p></td>
<td><p>定義なし</p></td>
<td><p>デフォルト変数定義ファイル</p></td>
</tr>
<tr class="row-odd"><td><p>定義なし</p></td>
<td><p>定義あり</p></td>
<td><p>ITA readme</p></td>
</tr>
<tr class="row-even"><td><p>定義あり</p></td>
<td><p>定義あり</p></td>
<td><p>ITA readme</p></td>
</tr>
</tbody>
</table>
<p>また、「<em>5.3.11代入値管理</em>」に表示するデフォルト値は以下のルールで処理されます。</p>
<p><strong>表 6.4-2デフォルト値表示ルール</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>d
efaults変数</p>
<p>定
義ファイル</p>
</th>
<th class="head"><p>ITA readme</p></th>
<th class="head"><p>デフォルト値の扱い</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>あり</p></td>
<td><p>なし</p></td>
<td><p>デフォルト変数定義ファイルを採用。</p></td>
</tr>
<tr class="row-odd"><td><p>なし</p></td>
<td><p>あり</p></td>
<td><p>デフォルト値なしの扱いとなる。</p></td>
</tr>
<tr class="row-even"><td><p>あり</p></td>
<td><p>あり</p></td>
<td><p>デフォルト変数定義ファイルを採用。
ただし、変数定義が一致し
ている場合のみ。変数定義が一致していな
い場合はデフォルト値なしの扱いとなる。</p></td>
</tr>
</tbody>
</table>
<p>ITA readmeは、作業実行時はロールパッケージから切り離されます。</p>
<p>ITA readmeに記載した変数と具体値は適用されません。</p>
</section>
<section id="id235">
<h2><span class="section-number">15.5. </span>読替表（Ansible-Legacy Roleのみ）の記述<a class="headerlink" href="#id235" title="この見出しへのパーマリンク">¶</a></h2>
<p>defaults変数定義ファイルまたはITA
readmeに定義されている「VAR_xxx」以外の変数に対して、</p>
<p>「<em>5.3.11代入値管理</em>」機能で変数の具体値を設定出来るようにするための設定を行うファイルです。</p>
<p>defaults変数定義ファイルまたはITA
readmeに定義されている「VAR_xxx」以外の変数「任意変数」に対して代入値管理機能で扱う変数「読替変数」の紐付を定義します。</p>
<ol class="arabic simple">
<li><p>読替表のファイル名は以下の命名規則</p></li>
</ol>
<blockquote>
<div><p>ita_translation-table_[ロール名].txt</p>
<p>e.g.)</p>
<p>ロール名: mysql ファイル名: ita_translation-table_mysql.txt</p>
<p>ロール名: mysql/install ファイル名:
ita_translation-table_mysql%install.txt</p>
<p>　　　　　　　　　　　※roleのディレクトリ階層が深い場合、ロール名に</p>
<p>　　　　　　　　　　含まれる / を % に置き換える必要があります。</p>
</div></blockquote>
<p><strong>(2)</strong> 読替表のフォーマット</p>
<p>テキスト形式で下記フォーマットとなります。</p>
<p>文字コードはUTF-8のBOMなしで作成して下さい。</p>
<p>ロール内で読替変数と任意変数の組合せは一意である必要があります。</p>
<a class="reference internal image-reference" href="../../../_images/image65.png"><img alt="../../../_images/image65.png" src="../../../_images/image65.png" style="width: 6.22054in; height: 1.90683in;" /></a>
<p><strong>(3)</strong> 注意事項</p>
<p>読替表を作成する際の注意事項を列挙します。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>ケース</strong></p></th>
<th class="head"><p>ITA<strong>の動作</strong></p></th>
<th class="head"><p><strong>備考</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>読替表はあるが、defau
lts変数定義ファイルと
ITA
rea
dmeがない。(ロール毎)</p></td>
<td><p>読替表を読込まない。</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>任意
変数にVAR_で始まる変
数が定義されている。</p></td>
<td><p>ロールパッケージアップロ
ード時にエラーなります。</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>defau
lts変数定義ファイルと
ITA
readmeに
定義されていない任意
変数を使用している。</p></td>
<td><p>ロールパッケージアップロ
ード時にエラーなります。</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>ロール内で読替変数
が重複定義されている</p></td>
<td><p>ロールパッケージアップロ
ード時にエラーなります。</p></td>
<td><p>パッケー
ジA-&gt;ロールA</p>
<p>LCA_A:
user_A/LCA_A:
user_B</p>
</td>
</tr>
<tr class="row-even"><td><p>ロール内で任意変数
が重複定義されている</p></td>
<td><p>ロールパッケージアップロ
ード時にエラーなります。</p></td>
<td><p>パッケー
ジA-&gt;ロールB</p>
<p>LCA_A:
user_A/LCA_B:
user_A</p>
</td>
</tr>
<tr class="row-odd"><td><p>ロール間で任意変数
の構造に差異がある。</p></td>
<td><p>ロールパッケージアップロ
ード時にエラーなります。</p></td>
<td><p>パ
ッケージA-&gt;ロー
ルA/B　　LCA_C:
user_C</p></td>
</tr>
<tr class="row-even"><td><p>ロールパッケージ内で
置換変数と任意変数の
組合せが一意でない。</p></td>
<td><p>ロールパッケージアップロ
ード時にエラーなります。</p></td>
<td><p>パッケージA</p>
<div class="line-block">
<div class="line">ロ</div>
</div>
<dl class="simple">
<dt>ールA　　LCA_D:</dt><dd><p>user_D</p>
</dd>
</dl>
<div class="line-block">
<div class="line">ロ</div>
</div>
<dl class="simple">
<dt>ールB　　LCA_D:</dt><dd><p>user_E</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>ロールパ
ッケージ間で任意変数
の構造に差異がある。</p></td>
<td><p>ロールパッケージア
ップロード時にエラーなり
ませんが、読替変数が代入
値管理に表示されません。</p></td>
<td><p>パッケージ
A-&gt;ロールA</p>
<div class="line-block">
<div class="line">LCA_F: user_F</div>
<div class="line">パッケージ</div>
</div>
<p>B-&gt;ロールA</p>
<p>LCA_F: user_F</p>
</td>
</tr>
<tr class="row-even"><td><p>ロールパ
ッケージ間で多段の任
意変数を定義している</p></td>
<td><p>多段の構造が
一致しているのでエラーに
はなりませんが、多段繰返
回数の設定は各パッケージ
で共通の設定となります。</p></td>
<td><p>パッケージ
A-&gt;ロールB</p>
<div class="line-block">
<div class="line">LCA_H: user_H</div>
<div class="line">パッケージ</div>
</div>
<p>B-&gt;ロールA</p>
<p>LCA_H: user_H</p>
</td>
</tr>
</tbody>
</table>
<a class="reference internal image-reference" href="../../../_images/image66.png"><img alt="../../../_images/image66.png" src="../../../_images/image66.png" style="width: 4.85417in; height: 3.67187in;" /></a>
</section>
<section id="ita-readme-ansible-legacy-role">
<h2><span class="section-number">15.6. </span>「ita_readme」と「読替表」の活用例（Ansible-Legacy Roleのみ）<a class="headerlink" href="#ita-readme-ansible-legacy-role" title="この見出しへのパーマリンク">¶</a></h2>
<p>Ansible-Legacy
Roleにおける「ita_readme」と「読替表」の活用例について、観点1～9を列挙します。</p>
<p>前提として、Ansible-Legacy
Role（「roles」ディレクトリ）は外部から取得したものとします。</p>
<p>以下は、「ita_readme」と「読替表」を用いてアップロードから結果確認までを表した全体イメージ図です。</p>
<a class="reference internal image-reference" href="../../../_images/image67.png"><img alt="../../../_images/image67.png" src="../../../_images/image67.png" style="width: 6.49606in; height: 4.84121in;" /></a>
<p>図 6.6-1 全体イメージ図</p>
<p>以降、上記の図をベースに観点1～9について掘り下げていきます。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><ul class="simple">
<li></li>
<li></li>
</ul>
<p>N
o
.
*
*</p>
</th>
<th class="head"><p><strong>観点</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>外部から取得したAnsible-Legacy Roleを編集せず利用する</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>「ita_readme」と「読替表」の役割</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>「defaults/main.yml」に記載の変数定義およびデフォルト値について</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>「host_varsファイル」と「ITAのCMDB」について</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>「defaults/main.yml」に追記したい場合の救済処置</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>変数名の先頭“<a href="#id309"><span class="problematic" id="id310">VAR_</span></a>”の有無について</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>「ita_readme」と「読替表」の連携活用</p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>playbookにおけるlength評価への応用</p></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><p>playbookにおけるdefined評価への応用</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p><strong>観点１:外部から取得したAnsible-Legacy Roleを編集せず利用する</strong></p></li>
</ul>
<p>外部(Galaxy等)から取得したAnsible-Legacy
Role（「roles」ディレクトリ）は編集を加えずに利用いただくことが可能です。</p>
<p>そのため「ita_readme」や「読替表」を「roles」ディレクトリの外に置いて、Ansible-Legacy
Role（「roles」ディレクトリ）内で使われている変数にパラメータを与えることが可能となっております。</p>
<a class="reference internal image-reference" href="../../../_images/image68.png"><img alt="../../../_images/image68.png" src="../../../_images/image68.png" style="width: 6.49606in; height: 4.84593in;" /></a>
<p>図 6.6-2 観点１のイメージ図</p>
<ul class="simple">
<li><p><strong>観点２：「ita_readme」と「読替表」の役割について</strong></p></li>
</ul>
<p>「ita_readme」、「読替表」は変数名および変数の型をITAに伝えるための機能です。</p>
<p>言い換えれば、「ita_readme」および「読替表」は変数の具体値（パラメータ）を定義するための機能ではありません（具体値を記載してもITAで認識しません）。</p>
<p>具体値を与える方法を以降の観点で説明します。</p>
<a class="reference internal image-reference" href="../../../_images/image69.png"><img alt="../../../_images/image69.png" src="../../../_images/image69.png" style="width: 6.49606in; height: 4.84593in;" /></a>
<p>図 6.6-3 観点２のイメージ図</p>
<ul class="simple">
<li><p><strong>観点３：「defaults/main.yml」に記載の変数定義およびデフォルト値について</strong></p></li>
</ul>
<p>「roles」配下の「defaults/main.yml」はそのまま変更なくansibleに渡されます。</p>
<p>変数定義およびデフォルト値はhost_varsで定義されない限り有効となります。(例：『VAR_A：aaa』)</p>
<p><a class="reference internal" href="../../../_images/image70.png"><img alt="image7" src="../../../_images/image70.png" style="width: 6.49606in; height: 4.84593in;" /></a> 図 6.6-4 観点３のイメージ図</p>
<ul class="simple">
<li><p><strong>観点４：「host_varsファイル」と「ITAのCMDB」について</strong></p></li>
</ul>
<p>host_varsファイルはITAのCMDB（パラメータシート）から実行ごとに自動作成されます。</p>
<a class="reference internal image-reference" href="../../../_images/image71.png"><img alt="../../../_images/image71.png" src="../../../_images/image71.png" style="width: 6.49606in; height: 4.84121in;" /></a>
<p>図 6.6-5 観点４のイメージ図</p>
<ul class="simple">
<li><p><strong>観点５：「defaults/main.yml」に追記したい場合の救済処置</strong></p></li>
</ul>
<p>Ansible-Legacy
Role（「roles」ディレクトリ）に変更を加えたい場合、救済処置として「ita_readme」に変数名および型を記述することが可能です。</p>
<p>既に「defaults/main.yml」に記載がある変数を、改めて「ita_readme」に定義する必要はありません。</p>
<p>もし二つのファイルで同じ変数が定義されている場合は、「ita_readme」側が優位になります。</p>
<p>※下図のとおり、変数「VAR_H」を「ita_readme」に記述することで変数の追加が可能</p>
<a class="reference internal image-reference" href="../../../_images/image72.png"><img alt="../../../_images/image72.png" src="../../../_images/image72.png" style="width: 6.49606in; height: 4.84593in;" /></a>
<p>図 6.6-6 観点５のイメージ図</p>
<ul class="simple">
<li><p><strong>観点６：変数名の先頭“VAR_”の有無について</strong></p></li>
</ul>
<p>「defaults/main.yml」の変数のうち、
ITAは“<a href="#id311"><span class="problematic" id="id312">VAR_</span></a>”という接頭文字から始まるものを変数マスタに管理します。</p>
<p>「defaults/main.yml」の変数のうち、“<a href="#id313"><span class="problematic" id="id314">VAR_</span></a>”という接頭文字から始まっていないものを
ITAにて変数管理させる場合は「読替表」を活用します。</p>
<p>「読替表」では“<a href="#id315"><span class="problematic" id="id316">VAR_</span></a>”という接頭文字から始まっていない変数を“<a href="#id317"><span class="problematic" id="id318">LCA_</span></a>”
という接頭文字から始まる変数名と紐づけることで
ITAにて変数管理させることが可能となります。</p>
<p>なお、本機能の応用例として、「defaults/main.yml」の変数（“<a href="#id319"><span class="problematic" id="id320">VAR_</span></a>”という接頭文字から始まっていない）に
ITAからパラメータを与えずに実行したい場合は、あえて「読替表」での変数紐づけを避けることも可能です。</p>
<p>※以下、図の変数名「hoge3」のパターン</p>
<p>※「読替表」には“<a href="#id321"><span class="problematic" id="id322">LCA_</span></a>”から始まる変数定義のみ有効</p>
<a class="reference internal image-reference" href="../../../_images/image73.png"><img alt="../../../_images/image73.png" src="../../../_images/image73.png" style="width: 6.49606in; height: 4.84121in;" /></a>
<p>図 6.6-7 観点６のイメージ図</p>
<ul class="simple">
<li><p><strong>観点７：「ita_readme」と「読替表」の連携活用</strong></p></li>
</ul>
<p>「tasks/main.yml」
（playbook本体）において“<a href="#id323"><span class="problematic" id="id324">VAR_</span></a>”から始まっていない変数が使われており、また、その変数が「default/main.yml」に定義されていない場合、「ita_readme」と「読替表」を連携活用することで、ITAからパラメータを与えることが可能です。</p>
<p>例えば、下図の様に「roles」配下の「tasks/main.yml」に変数「hoge」が使われている場合、以下の手順によってITAに変数を伝えることが可能です。</p>
<ol class="arabic simple">
<li><p>「ita_readme」に、変数名「hoge」を追記する</p></li>
<li><p>「読替表」に、変数名「hoge」を
ITAのCMDB（パラメータシート）で「LCA_xxx」という変数名で扱うことを追記する</p></li>
</ol>
<a class="reference internal image-reference" href="../../../_images/image74.png"><img alt="../../../_images/image74.png" src="../../../_images/image74.png" style="width: 6.49606in; height: 4.23387in;" /></a>
<p>図 6.6-8 観点７のイメージ図</p>
<ul class="simple">
<li><p><strong>観点８：playbookにおけるlength評価への応用</strong></p></li>
</ul>
<p>変数に対し具体値があるか否かによって、length評価における条件分岐に活用することが可能です。</p>
<p>例えば、「defaults/main.yml」に『VAR_C：[]』がある状態で、
変数「VAR_C」に具体値を与えずに実行した場合length＝0となります。</p>
<p>反対に、何らかの具体値を与えて実行した場合length＞0となります。（例：『VAR_X：sss』）</p>
<a class="reference internal image-reference" href="../../../_images/image75.png"><img alt="../../../_images/image75.png" src="../../../_images/image75.png" style="width: 6.49606in; height: 4.84593in;" /></a>
<p>図 6.6-9 観点８のイメージ図</p>
<ul class="simple">
<li><p><strong>観点９：playbookにおけるdefined評価への応用</strong></p></li>
</ul>
<p>変数に対し具体値を定義しているか否かによって、defined評価による条件分岐に活用することが可能です。</p>
<p>例えば、「defaults/main.yml」で定義のない変数「VAR_G」と「VAR_H」を、「ita_readme」で定義を記述します。「ita_readme」に記述することで、
ITAのCMDB（パラメータシート）で取り扱うことが可能となります。</p>
<p>変数「VAR_G」に具体値を付与せず実行すると、「defaults/main.yml」および「host_vars」に定義されずに動作するためdefined→falseとなります。</p>
<p>反対に、変数「VAR_H」に具体値「kkk」を付与し実行すると、「host_vars」に定義されて動作するためdefined→trueとなります。</p>
<a class="reference internal image-reference" href="../../../_images/image76.png"><img alt="../../../_images/image76.png" src="../../../_images/image76.png" style="width: 6.49606in; height: 4.84593in;" /></a>
<p>図 6.6-10 観点９のイメージ図</p>
</section>
<section id="backyard">
<h2><span class="section-number">15.7. </span>BackYardコンテンツ<a class="headerlink" href="#backyard" title="この見出しへのパーマリンク">¶</a></h2>
<ol class="arabic simple">
<li><p><strong>変数自動登録</strong></p></li>
</ol>
<p>変数解析対象の資材をアップロードした場合、アップロードされた資材から変数を取出します。</p>
<p>表 6.6-1モード別アップロードした資材の変数の扱い</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>メニュー</p></th>
<th class="head"><p>Legacy</p></th>
<th class="head"><p>Legacy Role</p></th>
<th class="head"><p>Pioneer</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Playbook素材集</p></td>
<td><p>○</p></td>
<td><p>×</p></td>
<td><p>×</p></td>
</tr>
<tr class="row-odd"><td><p>ロールパッケージ管理</p></td>
<td><p>×</p></td>
<td><p>○</p></td>
<td><p>×</p></td>
</tr>
<tr class="row-even"><td><p>対話ファイル素材集</p></td>
<td><p>×</p></td>
<td><p>×</p></td>
<td><p>○</p></td>
</tr>
</tbody>
</table>
<p>なお、取出すタイミングは 自動プロセスの起動周期 に依存します。</p>
<blockquote>
<div><p>※変数名の一意管理</p>
<p>取出した変数名は、モード毎に全資材で一意管理されます。</p>
<p>デフォルト変数定義ファイルで変数構造を定義しますので、各資材で変数構造が違う場合の留意事項</p>
<p>を以下に明記します。</p>
<p>●単一ロールパッケージ</p>
<p>ロールを跨って同じ変数名を使用しているが変数構造が違う場合。</p>
<p>※通常変数と多段変数や多段変数同士で多段構造が違う場合など</p>
<p><strong>=&gt;</strong> アップロード時にエラーとなります。</p>
<p>●全ロールパッケージ</p>
<p>ロールパッケージを跨って同じ変数名を使用しているが変数構造が違う場合。</p>
<p><strong>=&gt;</strong> アップロード時にエラーとなります。</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p><strong>代入自動値登録設定</strong></p></li>
</ol>
<blockquote>
<div><p>連携対象としたパラメータシートのオペレーションとホスト毎の項目の設定値と紐付けたMovementと</p>
<p>変数の情報を代入値管理と作業対象ホストに反映されます。</p>
<p>なお、反映のタイミングは前述と同様に 自動プロセスの起動周期
に依存します。</p>
<p>作業対象ホストと代入値管理は複数の操作者が更新を行います。最終更新者が他操作者の場合は</p>
<p>反映処理をしません。</p>
<p>代入値自動登録設定のデータを反映したい場合は、代入値管理で該当レコードを廃止にする。他</p>
<p>BackYard処理で該当レコードの更新を無効にする。などの操作を行ってください。</p>
<p>作業対象ホストと代入値管理への反映ルールを以下に明記します。</p>
</div></blockquote>
<ol class="arabic simple">
<li><p>代入値自動登録に登録されている情報を代入値管理へ反映時</p></li>
</ol>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>代入
値管理</strong></p>
<ul class="simple">
<li></li>
</ul>
<p><em>の状態*</em></p>
</th>
<th class="head"><p><strong>該当
レコード</strong></p>
<p><strong>なし</strong></p>
</th>
<th class="head"><p><strong>該
当レ
コー
ドあ
り</strong></p></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"><p><strong>該
当レコード</strong></p>
<p><strong>廃止中</strong></p>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
<td></td>
<td><p>**
=具体
値**</p></td>
<td><p>**
≠具体値**</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p><strong>最終
更新者</strong></p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td><p><strong>BackY
ard処理</strong></p></td>
<td><p><strong>他操
作者</strong></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>代入
値管理</strong></p>
<p><strong>へ
の反映</strong></p>
</td>
<td><p>新
規レコード</p>
<p>追加</p>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>該当レ
コードの</p>
<p>具
体値更新</p>
</td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>廃止レコード</p>
<p>復活</p>
</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>※
該当レコード：オペレーション＋ホスト＋Movement+変数名+(メンバー変数)+(代入順序)が同一のレコードの意</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>代入値自動登録に登録されていない情報（代入値管理のみに登録）を代入値管理へ反映時</p></li>
</ol>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>代入値管理
の状態</strong></p></th>
<th class="head"><p><strong>該当レコ
ードあり</strong></p></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
<td><p><strong>最
終更新者</strong></p></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td><p><strong>Bac
kYard処理</strong></p></td>
<td><p><strong>他操作者</strong></p></td>
</tr>
<tr class="row-even"><td><p><strong>代
入値管理への反映</strong></p></td>
<td><p>該当レ
コード廃止</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
</tbody>
</table>
<ol class="arabic simple" start="3">
<li><p>代入値自動登録に登録されている情報を作業対象ホストへの反映時</p></li>
</ol>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>作業
対象ホストの状態</strong></p></th>
<th class="head"><p><strong>該当レコ
ードなし</strong></p></th>
<th class="head"><p><strong>該当レコ
ードあり</strong></p></th>
<th class="head"><p><strong>該
当レコード廃止中</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>作業対
象ホストへの反映</strong></p></td>
<td><p>新規レ
コード追加</p></td>
<td><p>－</p></td>
<td><p>廃止レコード復活</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>※ 該当レコード：オペレーション＋ホスト＋Movementが同一のレコードの意</p>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>代入値自動登録に登録されていない情報（作業対象ホストのみに登録）を作業対象ホストへ反映時</p></li>
</ol>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>**
代入値管理の状態**</p></th>
<th class="head"><p><strong>該当レコ
ードあり</strong></p></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
<td><p><strong>最
終更新者</strong></p></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td><p><strong>Bac
kYard処理</strong></p></td>
<td><p><strong>他操作者</strong></p></td>
</tr>
<tr class="row-even"><td><p><strong>代
入値管理への反映</strong></p></td>
<td><p>該当レ
コード廃止</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
</tr>
</tbody>
</table>
<ol class="arabic simple" start="5">
<li><p>同一Movementと変数と代入順序に、複数項目の紐付が登録されている場合。</p></li>
</ol>
<p>複数のパラメータシートで同一のオペレーションとホストが紐付されている場合は、ランダムに1項目を選択し代入値管理へ反映を行います。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><ul class="simple">
<li></li>
<li></li>
</ul>
<p>ﾊ
ﾟ
ﾗ
ﾒ
ｰ
ﾀ
ｼ
ｰ
ﾄ
:
s
h
e
e
t
A
*
*</p>
</th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"><ul class="simple">
<li></li>
</ul>
<p><em>代
入
値
自
動
登
録
設
定
*</em></p>
</th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><ul class="simple">
<li></li>
<li></li>
</ul>
<p>N
o
*
*</p>
</td>
<td><p><strong>ｵ
ﾍﾟﾚ
ｰｼｮ
ﾝ</strong></p></td>
<td><ul class="simple">
<li></li>
</ul>
<p><em>ﾎ
ｽﾄ
*</em></p>
</td>
<td><p>**
項
目
1
**</p></td>
<td></td>
<td></td>
<td><ul class="simple">
<li></li>
</ul>
<p><em>パ
ラ
メ
ー
タ
シ
ー
ト
*</em></p>
</td>
<td></td>
<td><p><strong>M
ove
men
t</strong></p></td>
<td><ul class="simple">
<li></li>
</ul>
<p><em>登
録
方
式
*</em></p>
</td>
<td><p><strong>I
aC変
数</strong></p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
<p><em>Op
1*</em></p>
</td>
<td><p>**
Ho
st
01
**</p></td>
<td><p>**
Va
lu
e1
**</p></td>
<td></td>
<td></td>
<td><ul class="simple">
<li></li>
</ul>
<p><em>メ
ニ
ュ
ー
*</em></p>
</td>
<td><p>**
項
目
**</p></td>
<td></td>
<td></td>
<td><ul class="simple">
<li></li>
</ul>
<p><em>Val
ue変
数*</em></p>
</td>
<td><ul class="simple">
<li></li>
</ul>
<p><em>代
入
順
序
*</em></p>
</td>
<td></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
<p><em>Op
1*</em></p>
</td>
<td><p>**
Ho
st
02
**</p></td>
<td><p>**
Va
lu
e2
**</p></td>
<td></td>
<td></td>
<td><ul class="simple">
<li></li>
</ul>
<p><em>sh
eet
A*</em></p>
</td>
<td><p>**
項
目
1
**</p></td>
<td><ul class="simple">
<li></li>
</ul>
<p><em>設
定
*</em></p>
</td>
<td><p><strong>V
alu
e</strong></p></td>
<td><p><strong>V
AR_v
al</strong></p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><ul class="simple">
<li></li>
</ul>
<p><em>sh
eet
B*</em></p>
</td>
<td><p>**
項
目
1
**</p></td>
<td><ul class="simple">
<li></li>
</ul>
<p><em>設
定
*</em></p>
</td>
<td><p><strong>V
alu
e</strong></p></td>
<td><p><strong>V
AR_v
al</strong></p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
<li></li>
</ul>
<p>ﾊ
ﾟ
ﾗ
ﾒ
ｰ
ﾀ
ｼ
ｰ
ﾄ
:
s
h
e
e
t
B
*
*</p>
</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><ul class="simple">
<li></li>
</ul>
<p><em>代
入
値
管
理
*</em></p>
</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
<li></li>
</ul>
<p>N
o
*
*</p>
</td>
<td><p><strong>ｵ
ﾍﾟﾚ
ｰｼｮ
ﾝ</strong></p></td>
<td><ul class="simple">
<li></li>
</ul>
<p><em>ﾎ
ｽﾄ
*</em></p>
</td>
<td><p>**
項
目
1
**</p></td>
<td></td>
<td></td>
<td><p><strong>ｵ
ﾍﾟﾚ
ｰｼｮ
ﾝ</strong></p></td>
<td><ul class="simple">
<li></li>
</ul>
<p><em>ﾎ
ｽﾄ
*</em></p>
</td>
<td><p><strong>M
ove
men
t</strong></p></td>
<td><ul class="simple">
<li></li>
</ul>
<p><em>変
数
名
*</em></p>
</td>
<td><p><strong>代
入順
序</strong></p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
<p><em>Op
1*</em></p>
</td>
<td><p>**
Ho
st
01
**</p></td>
<td><p>**
Va
lu
e4
**</p></td>
<td></td>
<td></td>
<td><ul class="simple">
<li></li>
</ul>
<p><em>Op
1*</em></p>
</td>
<td><p>**
Ho
st
01
**</p></td>
<td><ul class="simple">
<li></li>
</ul>
<p><em>設
定
*</em></p>
</td>
<td><p>**
VAR
_va
l**</p></td>
<td><p>**
Valu
e1**</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><ul class="simple">
<li></li>
</ul>
<p><em>Op
1*</em></p>
</td>
<td><p>**
Ho
st
03
**</p></td>
<td><p>**
Va
lu
e3
**</p></td>
<td></td>
<td></td>
<td><ul class="simple">
<li></li>
</ul>
<p><em>Op
1*</em></p>
</td>
<td><p>**
Ho
st
02
**</p></td>
<td><ul class="simple">
<li></li>
</ul>
<p><em>設
定
*</em></p>
</td>
<td><p>**
VAR
_va
l**</p></td>
<td><p>**
Valu
e2**</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><ul class="simple">
<li></li>
</ul>
<p><em>Op
1*</em></p>
</td>
<td><p>**
Ho
st
03
**</p></td>
<td><ul class="simple">
<li></li>
</ul>
<p><em>設
定
*</em></p>
</td>
<td><p>**
VAR
_va
l**</p></td>
<td><p>**
Valu
e3**</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="ansibleita">
<h2><span class="section-number">15.8. </span>Ansible利用ガイドラインITA追加ルール<a class="headerlink" href="#ansibleita" title="この見出しへのパーマリンク">¶</a></h2>
<blockquote>
<div><p>ITAを使用して、Ansibleで実行する為のPlaybook作成ガイドラインを記述します。</p>
<p>詳しくは、別資料
「利用手順マニュアル_Ansible-driver_別紙_Ansible利用ガイドライン_追加ルール」を参照してください。</p>
</div></blockquote>
</section>
</section>
<section id="id236">
<h1><span class="section-number">16. </span>運用操作<a class="headerlink" href="#id236" title="この見出しへのパーマリンク">¶</a></h1>
<p>本機能を活用する操作は、クライアントPCのブラウザ画面からのユーザー利用による入力だけでなく、システム運用・保守による操作もあります。用意している運用・保守の操作は次のとおりです。</p>
<section id="id237">
<h2><span class="section-number">16.1. </span>メンテナンス<a class="headerlink" href="#id237" title="この見出しへのパーマリンク">¶</a></h2>
<blockquote>
<div><p>Ansible-driverのプロセスの開始/停止/再起動に必要なファイルは以下となります。</p>
</div></blockquote>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>説明</strong></p></th>
<th class="head"><p><strong>対象ファイル名</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Legacy/pioneer/legacyRole実行監視</p>
<p>未実行作業の実行を行う。</p>
</td>
<td><p>ky_ans
ible_execute-workflow.service</p></td>
</tr>
<tr class="row-odd"><td><p>legacy変数自動登録</p>
<p>アップロ
ードした資材から変数の取出しを行う。</p>
</td>
<td><p>ky_legacy_va
rsautolistup-workflow.service</p></td>
</tr>
<tr class="row-even"><td><p>legacy自動登録設定</p>
<p>自動登録設定に設定された情報を代入値
管理と作業対象メニューに反映を行う。</p>
</td>
<td><p>ky_legacy
_valautostup-workflow.service</p></td>
</tr>
<tr class="row-odd"><td><p>pioneer自動登録設定</p>
<p>自動登録設定に設定された情報を代入値
管理と作業対象メニューに反映を行う。</p>
</td>
<td><p>ky_
pioneer
_valautostup-workflow.service</p></td>
</tr>
<tr class="row-even"><td><p>legacyRole変数自動登録</p>
<p>アップロ
ードした資材から変数の取出しを行う。</p>
</td>
<td><p>ky_legacy_role_va
rsautolistup-workflow.service</p></td>
</tr>
<tr class="row-odd"><td><p>legacyRole自動登録設定</p>
<p>自動登録設定に設定された情報を代入値
管理と作業対象メニューに反映を行う。</p>
</td>
<td><p>ky_legacy_role
_valautostup-workflow.service</p></td>
</tr>
<tr class="row-even"><td><p>Ansible Automation
Controllerデータ同期</p>
<p>Ansible Automation
Cont
rollerから各種設定情報の取得を行う。</p>
</td>
<td><p>ky_ansible_tow
ermasterSync-workflow.service</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>対象ファイルは「/usr/lib/systemd/system」に格納されています。</p>
<p>プロセス起動/停止/再起動の方法は次の通りです。</p>
<p>root権限でコマンドを実行してください。</p>
</div></blockquote>
<ol class="arabic simple">
<li><p>プロセス起動</p></li>
</ol>
<ol class="arabic simple" start="2">
<li><p>プロセス停止</p></li>
<li><p>プロセス再起動</p></li>
</ol>
<blockquote>
<div><p>各対象ファイル名に置き換えて起動/停止/再起動を行ってください。</p>
</div></blockquote>
</section>
<section id="id238">
<h2><span class="section-number">16.2. </span>メンテナンス方法について<a class="headerlink" href="#id238" title="この見出しへのパーマリンク">¶</a></h2>
<blockquote>
<div><p>①　NORMALレベルへの変更</p>
<p>　以下のファイルの8行目「DEBUG」を「NORMAL」に書き換えます。</p>
<p>　ログレベル設定ファイル：
&lt;インストールディレクトリ&gt;/ita-root/confs/backyardconfs/ita_env</p>
<p>②　DEBUGレベルへの変更</p>
<p>　以下のファイルの8行目「NORMAL」を「DEBUG」に書き換えます。</p>
<p>　ログレベル設定ファイル：
&lt;インストールディレクトリ&gt;/ita-root/confs/backyardconfs/ita_env</p>
<p>③ 起動周期の変更</p>
<p>　各対象ファイルのExecStartの5番目のパラメータを変更します。（単位:秒）</p>
<p>　例外を除き起動周期はデフォルト値の使用をしてください。</p>
</div></blockquote>
<p>書き換え後、<strong>プロセス再起動(restart)後に有効になります。</strong></p>
<p>ログファイルの出力先：
<em>&lt;インストールディレクトリ&gt;/ita-root/logs/backyardlogs</em></p>
</section>
</section>
<section id="id239">
<h1><span class="section-number">17. </span>付録<a class="headerlink" href="#id239" title="この見出しへのパーマリンク">¶</a></h1>
<section id="id240">
<h2><span class="section-number">17.1. </span>Ansible実行時に使用される投入データとITAメニューの紐づけ<a class="headerlink" href="#id240" title="この見出しへのパーマリンク">¶</a></h2>
<p>各ITAメニューより情報を抜出してAnsible実行に必要な投入データを作ります。この際、機器一覧のパスワードや代入値管理でSensitive設定をONした変数の具体値がansible-vaultで暗号化されています。</p>
<div class="line-block">
<div class="line">投入データはZIP形式で「<em>5.3.12作業状態確認</em>」よりダウンロードが可能です。</div>
<div class="line">ダウンロードした投入データを所定のディレクトリに解凍することで、Ansibleを直接実行することも可能です。</div>
</div>
<p>各種データとITAメニューの関係性は以下の通りです。</p>
<section id="id241">
<h3>Ansible-Legacy投入データ<a class="headerlink" href="#id241" title="この見出しへのパーマリンク">¶</a></h3>
<p>【上位ディレクトリ】</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><p>c
h
i
l
d
_
p
l
a
y
b
o
o
k
s</p></td>
<td></td>
<td></td>
<td><p>ユ
ーザ
ーが
作成
した
Play
book
が格
納さ
れる
ディ
レク
トリ</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>An
sibl
e-Le
gacy</p></td>
<td></td>
<td colspan="2"><p>P |
l |
a |
y |
b |
o |
o |
k |
素 |
材 |
集 |</p></td>
<td></td>
<td colspan="2"><p>プ |
レ |
イ |
ブ |
ッ |
ク |
素 |
材 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>―</p></td>
<td><p>t
e
m
p
l
a
t
e
_
f
i
l
e
s</p></td>
<td></td>
<td></td>
<td><p>実
行す
るPl
aybo
ok内
で使
用す
るテ
ンプ
レー
ト管
理の
ファ
イル
が格
納さ
れる
ディ
レク
トリ</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>Ans
ible
共通</p></td>
<td></td>
<td colspan="2"><p>テ |
ン |
プ |
レ |
ー |
ト |
管 |
理 |</p></td>
<td></td>
<td colspan="2"><p>テ |
ン |
プ |
レ |
ー |
ト |
素 |
材 |</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>―</p></td>
<td><p>c
o
p
y
_
f
i
l
e
s</p></td>
<td></td>
<td></td>
<td><p>実行
する
Play
book
内で
使用
して
いる
ファ
イル
管理
のフ
ァイ
ルを
格納
する
ディ
レク
トリ</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>Ans
ible
共通</p></td>
<td></td>
<td colspan="2"><p>フ |
ァ |
イ |
ル |
管 |
理 |</p></td>
<td></td>
<td colspan="2"><p>フ |
ァ |
イ |
ル |
素 |
材 |</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>―</p></td>
<td><p>u
p
l
o
a
d
_
f
i
l
e
s</p></td>
<td></td>
<td></td>
<td><p>実
行す
るPl
aybo
ok内
で使
用し
てい
る変
数の
具体
値に
対し
て代
入値
管理
でフ
ァイ
ルを
アッ
プロ
ード
して
いる
場合
、該
当フ
ァイ
ルを
格納
する
ディ
レク
トリ</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>An
sibl
e-Le
gacy</p></td>
<td></td>
<td colspan="2"><p>代 |
入 |
値 |
管 |
理 |
　 |</p></td>
<td></td>
<td colspan="2"><p>フ |
ァ |
イ |
ル |
素 |
材 |</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>―</p></td>
<td><p>h
o
s
t
_
v
a
r
s</p></td>
<td></td>
<td></td>
<td><p>ホ
スト
変数
ファ
イル
が格
納さ
れる
ディ
レク
トリ</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>Ans
ible
共通</p></td>
<td></td>
<td colspan="2"><p>グ |
ロ |
ー |
バ |
ル |
変 |
数 |
管 |
理 |</p></td>
<td></td>
<td colspan="2"><p>変 |
数 |
名 |
/ |
具 |
体 |
値 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>An
sibl
e-Le
gacy</p></td>
<td></td>
<td colspan="2"><p>代 |
入 |
値 |
管 |
理 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td colspan="2"><p>変 |
数 |
名 |
/ |
具 |
体 |
値 |
( |
文 |
字 |
列 |
) |</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>An
sibl
e-Le
gacy</p></td>
<td></td>
<td colspan="2"><p>代 |
入 |
値 |
管 |
理 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td colspan="2"><p>変 |
数 |
名 |
/ |
具 |
体 |
値 |
( |
フ |
ァ |
イ |
ル |
) |</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>An
sibl
e-Le
gacy</p></td>
<td></td>
<td colspan="2"><p>t |
e |
m |
p |
l |
a |
t |
e |
管 |
理 |</p></td>
<td></td>
<td colspan="2"><p>テ |
ン |
プ |
レ |
ー |
ト |
素 |
材 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>An
sibl
e-Le
gacy</p></td>
<td></td>
<td colspan="2"><p>フ |
ァ |
イ |
ル |
管 |
理 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td colspan="2"><p>フ |
ァ |
イ |
ル |
変 |
数 |
名 |</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>An
sibl
e-Le
gacy</p></td>
<td></td>
<td colspan="2"><p>イ |
ン |
タ |
ー |
フ |
ェ |
ー |
ス |
情 |
報 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td colspan="2"><p>デ |
ー |
タ |
リ |
レ |
イ |
ス |
ト |
レ |
ー |
ジ |
パ |
ス |
( |
I |
T |
A |
) |</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>An
sibl
e-Le
gacy</p></td>
<td></td>
<td colspan="2"><p>イ |
ン |
タ |
ー |
フ |
ェ |
ー |
ス |
情 |
報 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td colspan="2"><p>S |
y |
m |
p |
h |
o |
n |
y |
イ |
ン |
ス |
タ |
ン |
ス |
デ |
ー |
タ |
リ |
レ |
イ |
ス |
ト |
レ |
ー |
ジ |
パ |
ス |
( |
A |
N |
S |
) |</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>An
sibl
e-Le
gacy</p></td>
<td></td>
<td colspan="2"><p>イ |
ン |
タ |
ー |
フ |
ェ |
ー |
ス |
情 |
報 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td colspan="2"><p>C |
o |
n |
d |
u |
c |
t |
o |
r |
イ |
ン |
ス |
タ |
ン |
ス |
デ |
ー |
タ |
リ |
レ |
イ |
ス |
ト |
レ |
ー |
ジ |
パ |
ス |
( |
A |
N |
S |
) |</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>基
本コ
ンソ
ール</p></td>
<td></td>
<td colspan="2"><p>機 |
器 |
一 |
覧 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td colspan="2"><p>プ |
ロ |
ト |
コ |
ル |</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>基
本コ
ンソ
ール</p></td>
<td></td>
<td colspan="2"><p>機 |
器 |
一 |
覧 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td colspan="2"><p>ロ |
グ |
イ |
ン |
ユ |
ー |
ザ |
I |
D |</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>基
本コ
ンソ
ール</p></td>
<td></td>
<td colspan="2"><p>機 |
器 |
一 |
覧 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td colspan="2"><p>ロ |
グ |
イ |
ン |
パ |
ス |
ワ |
ー |
ド |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
</div>
</div></blockquote>
<p>※ |
a |
n |
s |
i |
b |
l |
e |
- |
v |
a |
u |
l |
t |
で |
暗 |
号 |
化 |</p>
</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>基
本コ
ンソ
ール</p></td>
<td></td>
<td colspan="2"><p>機 |
器 |
一 |
覧 |</p></td>
<td></td>
<td colspan="2"><p>ホ |
ス |
ト |
名 |</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>―</p></td>
<td><p>s
s
h
_
k
e
y
_
f
i
l
e
s</p></td>
<td></td>
<td colspan="2"><p>認 |
証 |
方 |
式 |
が |
鍵 |
方 |
式 |
の |
場 |
合 |
、 |
s |
s |
h |
認 |
証 |
鍵 |
フ |
ァ |
イ |
ル |
が |
格 |
納 |
さ |
れ |
る |
デ |
ィ |
レ |
ク |
ト |
リ |</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td colspan="2"><p>基 |
本 |
コ |
ン |
ソ |
ー |
ル |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td colspan="2"><p>機 |
器 |
一 |
覧 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td colspan="2"><p>s |
s |
h |
認 |
証 |
鍵 |
フ |
ァ |
イ |
ル |</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>―</p></td>
<td><p>w
i
n
r
m
_
c
a
_
f
i
l
e
s</p></td>
<td></td>
<td colspan="2"><p>h |
t |
t |
p |
s |
で |
W |
i |
n |
R |
M |
接 |
続 |
す |
る |
場 |
合 |
の |
サ |
ー |
バ |
証 |
明 |
書 |
が |
格 |
納 |
さ |
れ |
る |
デ |
ィ |
レ |
ク |
ト |
リ |</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td colspan="2"><p>基 |
本 |
コ |
ン |
ソ |
ー |
ル |</p></td>
<td colspan="2"><p>機 |
器 |
一 |
覧 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td colspan="2"><p>サ |
ー |
バ |
証 |
明 |
書 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>―</p></td>
<td><p>A
n
s
i
b
l
e
E
x
e
c
O
p
t
i
o
n
.
t
x
t</p></td>
<td></td>
<td colspan="2"><p>A |
n |
s |
i |
b |
l |
e |
P |
l |
a |
y |
b |
o |
o |
k |
実 |
行 |
時 |
の |
オ |
プ |
シ |
ョ |
ン |
パ |
ラ |
メ |
ー |
タ |</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td colspan="2"><p>A |
n |
s |
i |
b |
l |
e |
共 |
通 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td colspan="2"><p>イ |
ン |
タ |
ー |
フ |
ェ |
ー |
ス |
情 |
報 |</p></td>
<td></td>
<td colspan="2"><p>オ |
プ |
シ |
ョ |
ン |
パ |
ラ |
メ |
ー |
タ |</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p>A
n
s
i
b
l
e
-
L
e
g
a
c
y</p></td>
<td></td>
<td colspan="2"><p>M |
o |
v |
e |
m |
e |
n |
t |
一 |
覧 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td colspan="2"><p>オ |
プ |
シ |
ョ |
ン |
パ |
ラ |
メ |
ー |
タ |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>―</p></td>
<td><p>h
o
s
t
s</p></td>
<td></td>
<td colspan="2"><p>イ |
ン |
ベ |
ン |
ト |
リ |
フ |
ァ |
イ |
ル |</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td colspan="2"><p>基 |
本 |
コ |
ン |
ソ |
ー |
ル |</p></td>
<td></td>
<td></td>
<td><p>機器
一覧</p></td>
<td></td>
<td></td>
<td><p>ログイン
ユーザID</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td colspan="2"><p>基 |
本 |
コ |
ン |
ソ |
ー |
ル |</p></td>
<td></td>
<td></td>
<td><p>機器
一覧</p></td>
<td></td>
<td></td>
<td><p>ロ
グインパ
スワード</p>
<p>※ansib
le-vault
で暗号化</p>
</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td colspan="2"><p>基 |
本 |
コ |
ン |
ソ |
ー |
ル |</p></td>
<td></td>
<td></td>
<td><p>機器
一覧</p></td>
<td></td>
<td></td>
<td><p>ホスト名</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td colspan="2"><p>基 |
本 |
コ |
ン |
ソ |
ー |
ル |</p></td>
<td></td>
<td></td>
<td><p>機器
一覧</p></td>
<td></td>
<td></td>
<td><p>IP
アドレス</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td colspan="2"><p>基 |
本 |
コ |
ン |
ソ |
ー |
ル |</p></td>
<td></td>
<td></td>
<td><p>機器
一覧</p></td>
<td></td>
<td></td>
<td><p>イ
ンベント
リファイ
ル追加オ
プション</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td colspan="2"><p>基 |
本 |
コ |
ン |
ソ |
ー |
ル |</p></td>
<td></td>
<td></td>
<td><p>機器
一覧</p></td>
<td></td>
<td></td>
<td><p>WinRM
接続情報</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td colspan="2"><p>基 |
本 |
コ |
ン |
ソ |
ー |
ル |</p></td>
<td></td>
<td></td>
<td><p>機器
一覧</p></td>
<td></td>
<td></td>
<td><p>接続オ
プション</p>
<p>※an
sible_ss
<a href="#id325"><span class="problematic" id="id326">h_extra_</span></a>
argsの値</p>
</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>―</p></td>
<td><p>p
l
a
y
b
o
o
k
.
y
m
l</p></td>
<td></td>
<td colspan="2"><p>M |
o |
v |
e |
m |
e |
n |
t |
- |
P |
l |
a |
y |
b |
o |
o |
k |
紐 |
付 |
（ |
M |
o |
v |
e |
m |
e |
n |
t |
- |
対 |
話 |
種 |
別 |
紐 |
付 |
、 |
M |
o |
v |
e |
m |
e |
n |
t |
- |
ロ |
ー |
ル |
紐 |
付 |
） |
で |
指 |
定 |
さ |
れ |
た |
P |
l |
a |
y |
b |
o |
o |
k |
を |
実 |
行 |
す |
る |
マ |
ス |
タ |
P |
l |
a |
y |
b |
o |
o |
k |</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td><p>A
n
s
i
b
l
e
-
L
e
g
a
c
y</p></td>
<td></td>
<td colspan="2"><p>P |
l |
a |
y |
b |
o |
o |
k |
素 |
材 |
集 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td colspan="2"><p>プ |
レ |
イ |
ブ |
ッ |
ク |
素 |
材 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p>A
n
s
i
b
l
e
-
L
e
g
a
c
y</p></td>
<td></td>
<td colspan="2"><p>M |
o |
v |
e |
m |
e |
n |
t |
- |
P |
l |
a |
y |
b |
o |
o |
k |
紐 |
付 |
（ |
M |
o |
v |
e |
m |
e |
n |
t |
- |
対 |
話 |
種 |
別 |
紐 |
付 |
、 |
M |
o |
v |
e |
m |
e |
n |
t |
- |
ロ |
ー |
ル |
紐 |
付 |
） |</p></td>
<td></td>
<td colspan="2"><p>イ |
ン |
ク |
ル |
ー |
ド |
順 |
序 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="id242">
<h3>Ansible-Pioneer投入データ<a class="headerlink" href="#id242" title="この見出しへのパーマリンク">¶</a></h3>
<p>【上位ディレクトリ】</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</td>
<td><p>ch
ild_playbooks</p></td>
<td><p>ユ
ーザーが
作成した
Playbook
tが格納さ
れるディ
レクトリ</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td><p>Ansib
le-Legacy</p></td>
<td><p>P
laybook素材集</p></td>
<td colspan="2"><p>プ |
レ |
イ |
ブ |
ッ |
ク |
素 |
材 |</p></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>―</p></td>
<td><p>t
emplate_files</p></td>
<td><p>実行
するPlayb
ook内で使
用するテ
ンプレー
ト管理の
ファイル
が格納さ
れるディ
レクトリ</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td><p>An
sible共通</p></td>
<td><p>テン
プレート管理</p></td>
<td colspan="2"><p>テ |
ン |
プ |
レ |
ー |
ト |
素 |
材 |</p></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>―</p></td>
<td><p>copy_files</p></td>
<td><p>実
行するPla
ybook内で
使用して
いるファ
イル管理
のファイ
ルを格納
するディ
レクトリ</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td><p>An
sible共通</p></td>
<td><p>ファイル管理</p></td>
<td colspan="2"><p>フ |
ァ |
イ |
ル |
素 |
材 |</p></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>―</p></td>
<td><p>upload_files</p></td>
<td><p>実行
するPlayb
ook内で使
用してい
る変数の
具体値に
対して代
入値管理
でファイ
ルをアッ
プロード
している
場合、該
当ファイ
ルを格納
するディ
レクトリ</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td><p>Ansible-
Pioneer</p></td>
<td><p>代入値管理</p></td>
<td></td>
<td><p>ファイル素材</p></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>―</p></td>
<td><p>host_vars</p></td>
<td><p>ホ
スト変数
ファイル
が格納さ
れるディ
レクトリ</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td><p>An
sible共通</p></td>
<td><p>グロー
バル変数管理</p></td>
<td colspan="2"><p>変 |
数 |
名 |
/ |
具 |
体 |
値 |</p></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td><p>Ansibl
e-Pioneer</p></td>
<td><p>代入値管理</p></td>
<td colspan="2"><p>変 |
数 |
名 |
/ |
具 |
体 |
値 |
( |
文 |
字 |
列 |
) |</p></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td><p>Ansibl
e-Pioneer</p></td>
<td><p>代入値管理</p></td>
<td colspan="2"><p>変 |
数 |
名 |
/ |
具 |
体 |
値 |
( |
フ |
ァ |
イ |
ル |
) |</p></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td><p>Ansibl
e-Pioneer</p></td>
<td><p>template管理</p></td>
<td colspan="2"><p>テ |
ン |
プ |
レ |
ー |
ト |
素 |
材 |</p></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td><p>Ansibl
e-Pioneer</p></td>
<td><p>ファイル管理</p></td>
<td colspan="2"><p>フ |
ァ |
イ |
ル |
変 |
数 |
名 |</p></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td><p>Ansibl
e-Pioneer</p></td>
<td><p>インター
フェース情報</p></td>
<td colspan="2"><p>デ |
ー |
タ |
リ |
レ |
イ |
ス |
ト |
レ |
ー |
ジ |
パ |
ス |
( |
I |
T |
A |
) |</p></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td><p>Ansibl
e-Pioneer</p></td>
<td><p>インター
フェース情報</p></td>
<td colspan="2"><p>S |
y |
m |
p |
h |
o |
n |
y |
イ |
ン |
ス |
タ |
ン |
ス |
デ |
ー |
タ |
リ |
レ |
イ |
ス |
ト |
レ |
ー |
ジ |
パ |
ス |
( |
A |
N |
S |
) |</p></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td><p>Ansibl
e-Pioneer</p></td>
<td><p>インター
フェース情報</p></td>
<td colspan="2"><p>C |
o |
n |
d |
u |
c |
t |
o |
r |
イ |
ン |
ス |
タ |
ン |
ス |
デ |
ー |
タ |
リ |
レ |
イ |
ス |
ト |
レ |
ー |
ジ |
パ |
ス |
( |
A |
N |
S |
) |</p></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td><p>基本コ
ンソール</p></td>
<td><p>機器一覧</p></td>
<td colspan="2"><p>プ |
ロ |
ト |
コ |
ル |</p></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td><p>基本コ
ンソール</p></td>
<td><p>機器一覧</p></td>
<td colspan="2"><p>ロ |
グ |
イ |
ン |
ユ |
ー |
ザ |
I |
D |</p></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td><p>基本コ
ンソール</p></td>
<td><p>機器一覧</p></td>
<td colspan="2"><p>ロ |
グ |
イ |
ン |
パ |
ス |
ワ |
ー |
ド |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
</div>
</div></blockquote>
<p>※ |
b |
a |
s |
e |
6 |
4 |
、 |
r |
o |
t |
1 |
3 |
の |
順 |
で |
エ |
ン |
コ |
ー |
ド |
し |
た |
値 |</p>
</td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td><p>基本コ
ンソール</p></td>
<td><p>機器一覧</p></td>
<td colspan="2"><p>ホ |
ス |
ト |
名 |</p></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td><p>基本コ
ンソール</p></td>
<td><p>機器一覧</p></td>
<td colspan="2"><p>P |
i |
o |
n |
e |
e |
r |
利 |
用 |
情 |
報 |</p></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td><p>Ansibl
e-Pioneer</p></td>
<td><p>Movement一覧</p></td>
<td colspan="2"><p>並 |
列 |
実 |
行 |
数 |</p></td>
<td></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>―</p></th>
<th class="head"><p>s
s
h
_
k
e
y
_
f
i
l
e
s</p></th>
<th class="head"></th>
<th class="head"><p>認証
方式
が鍵
方式
の場
合、
ssh認
証鍵
ファ
イル
が格
納さ
れる
ディ
レク
トリ</p></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p>基
本コ
ンソ
ール</p></td>
<td></td>
<td><p>機器
一覧</p></td>
<td colspan="2"><p>s |
s |
h |
認 |
証 |
鍵 |
フ |
ァ |
イ |
ル |</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>―</p></td>
<td><p>A
n
s
i
b
l
e
E
x
e
c
O
p
t
i
o
n
.
t
x
t</p></td>
<td></td>
<td><p>Ansi
blePl
ayboo
k実行
時の
オプ
ショ
ンパ
ラメ
ータ</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p>A
nsibl
e共通</p></td>
<td></td>
<td><p>イン
ター
フェ
ース
情報</p></td>
<td colspan="2"><p>オ |
プ |
シ |
ョ |
ン |
パ |
ラ |
メ |
ー |
タ |</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td><p>Ansib
le-Pi
oneer</p></td>
<td></td>
<td><p>Mo
vemen
t一覧</p></td>
<td colspan="2"><p>オ |
プ |
シ |
ョ |
ン |
パ |
ラ |
メ |
ー |
タ |</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>―</p></td>
<td><p>h
o
s
t
s</p></td>
<td></td>
<td><p>イン
ベン
トリ
ファ
イル</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p>基
本コ
ンソ
ール</p></td>
<td colspan="2"><p>機 |
器 |
一 |
覧 |</p></td>
<td></td>
<td><p>ログイン
ユーザID</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td><p>基
本コ
ンソ
ール</p></td>
<td colspan="2"><p>機 |
器 |
一 |
覧 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td><p>ロ
グインパ
スワード</p>
<p>※b
ase64、ro
t13の順で
エンコー
ドした値</p>
</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p>基
本コ
ンソ
ール</p></td>
<td colspan="2"><p>機 |
器 |
一 |
覧 |</p></td>
<td></td>
<td><p>ホスト名</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td><p>基
本コ
ンソ
ール</p></td>
<td colspan="2"><p>機 |
器 |
一 |
覧 |</p></td>
<td></td>
<td><p>I
Pアドレス</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p>基
本コ
ンソ
ール</p></td>
<td colspan="2"><p>機 |
器 |
一 |
覧 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td><p>イ
ンベント
リファイ
ル追加オ
プション</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td><p>基
本コ
ンソ
ール</p></td>
<td colspan="2"><p>機 |
器 |
一 |
覧 |</p></td>
<td></td>
<td><p>Pionee
r利用情報</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p>基
本コ
ンソ
ール</p></td>
<td colspan="2"><p>機 |
器 |
一 |
覧 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td><p>接続オ
プション</p>
<p>※<a href="#id327"><span class="problematic" id="id328">ansible_</span></a>
ssh_extra
_argsの値</p>
</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>―</p></td>
<td><p>p
l
a
y
b
o
o
k
.
y
m
l</p></td>
<td></td>
<td><p>Move
ment-
Playb
ook紐
付（M
oveme
nt-対
話種
別紐
付、M
oveme
nt-ロ
ール
紐付
）で
指定
され
た対
話フ
ァイ
ルを
実行
する
マス
タPla
ybook</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td><p>Ansib
le-Pi
oneer</p></td>
<td></td>
<td><p>話フ
ァイ
ル素
材集</p></td>
<td colspan="2"><p>話 |
フ |
ァ |
イ |
ル |
素 |
材 |</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p>Ansib
le-Pi
oneer</p></td>
<td></td>
<td><p>M
oveme
nt-Pl
ayboo
k紐付
（Mov
ement
-対話
種別
紐付
、Mov
ement
-ロー
ル紐
付）</p></td>
<td colspan="2"><p>イ |
ン |
ク |
ル |
ー |
ド |
順 |
序 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="ansible-legacyrole">
<h3>Ansible-LegacyRole投入データ<a class="headerlink" href="#ansible-legacyrole" title="この見出しへのパーマリンク">¶</a></h3>
<p>【上位ディレクトリ】</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><ul class="simple">
<li></li>
<li></li>
</ul>
<ul class="simple">
<li></li>
</ul>
</th>
<th class="head"><p>c
h
i
l
d
_
p
l
a
y
b
o
o
k
s</p></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"><p>ユー
ザー
が作
成し
たPla
ybook
tが格
納さ
れる
ディ
レク
トリ</p></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>Ans
ible-
Legac
yRole</p></td>
<td></td>
<td colspan="2"><p>P |
l |
a |
y |
b |
o |
o |
k |
素 |
材 |
集 |</p></td>
<td></td>
<td><p>プレイ
ブック素材</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>―</p></td>
<td><p>t
e
m
p
l
a
t
e
_
f
i
l
e
s</p></td>
<td></td>
<td></td>
<td><p>実行
する
Playb
ook内
で使
用す
るテ
ンプ
レー
ト管
理の
ファ
イル
が格
納さ
れる
ディ
レク
トリ</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>A
nsibl
e共通</p></td>
<td></td>
<td colspan="2"><p>テ |
ン |
プ |
レ |
ー |
ト |
管 |
理 |</p></td>
<td></td>
<td><p>テンプ
レート素材</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>―</p></td>
<td><p>c
o
p
y
_
f
i
l
e
s</p></td>
<td></td>
<td></td>
<td><p>実
行す
るPl
ayboo
k内で
使用
して
いる
ファ
イル
管理
のフ
ァイ
ルを
格納
する
ディ
レク
トリ</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>A
nsibl
e共通</p></td>
<td></td>
<td colspan="2"><p>フ |
ァ |
イ |
ル |
管 |
理 |</p></td>
<td></td>
<td><p>フ
ァイル素材</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>―</p></td>
<td><p>u
p
l
o
a
d
_
f
i
l
e
s</p></td>
<td></td>
<td></td>
<td><p>実行
する
Playb
ook内
で使
用し
てい
る変
数の
具体
値に
対し
て代
入値
管理
でフ
ァイ
ルを
アッ
プロ
ード
して
いる
場合
、該
当フ
ァイ
ルを
格納
する
ディ
レク
トリ</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>Ans
ible-
Legac
yRole</p></td>
<td></td>
<td colspan="2"><p>代 |
入 |
値 |
管 |
理 |
　 |</p></td>
<td></td>
<td><p>フ
ァイル素材</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>―</p></td>
<td><p>h
o
s
t
_
v
a
r
s</p></td>
<td></td>
<td></td>
<td><p>ホ
スト
変数
ファ
イル
が格
納さ
れる
ディ
レク
トリ</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>A
nsibl
e共通</p></td>
<td></td>
<td colspan="2"><p>グ |
ロ |
ー |
バ |
ル |
変 |
数 |
管 |
理 |</p></td>
<td></td>
<td><p>変数
名/具体値</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>Ans
ible-
Legac
yRole</p></td>
<td></td>
<td colspan="2"><p>代 |
入 |
値 |
管 |
理 |</p></td>
<td></td>
<td><p>変
数名/具体
値(文字列)</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>Ans
ible-
Legac
yRole</p></td>
<td></td>
<td colspan="2"><p>代 |
入 |
値 |
管 |
理 |</p></td>
<td></td>
<td><p>変数
名/具体値
(ファイル)</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>Ans
ible-
Legac
yRole</p></td>
<td></td>
<td colspan="2"><p>t |
e |
m |
p |
l |
a |
t |
e |
管 |
理 |</p></td>
<td></td>
<td><p>テンプ
レート素材</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>Ans
ible-
Legac
yRole</p></td>
<td></td>
<td colspan="2"><p>フ |
ァ |
イ |
ル |
管 |
理 |</p></td>
<td></td>
<td><p>ファ
イル変数名</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>Ans
ible-
Legac
yRole</p></td>
<td></td>
<td colspan="2"><p>イ |
ン |
タ |
ー |
フ |
ェ |
ー |
ス |
情 |
報 |</p></td>
<td></td>
<td><p>デ
ータリレイ
ストレージ
パス(ITA)</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>Ans
ible-
Legac
yRole</p></td>
<td></td>
<td colspan="2"><p>イ |
ン |
タ |
ー |
フ |
ェ |
ー |
ス |
情 |
報 |</p></td>
<td></td>
<td><p>Sy
mphonyイン
スタンスデ
ータリレイ
ストレージ
パス(ANS)</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>Ans
ible-
Legac
yRole</p></td>
<td></td>
<td colspan="2"><p>イ |
ン |
タ |
ー |
フ |
ェ |
ー |
ス |
情 |
報 |</p></td>
<td></td>
<td><p>Con
ductorイン
スタンスデ
ータリレイ
ストレージ
パス(ANS)</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>基
本コ
ンソ
ール</p></td>
<td></td>
<td colspan="2"><p>機 |
器 |
一 |
覧 |</p></td>
<td></td>
<td><p>プロトコル</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>基
本コ
ンソ
ール</p></td>
<td></td>
<td colspan="2"><p>機 |
器 |
一 |
覧 |</p></td>
<td></td>
<td><p>ログイ
ンユーザID</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>基
本コ
ンソ
ール</p></td>
<td></td>
<td colspan="2"><p>機 |
器 |
一 |
覧 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td><p>ログイン
パスワード</p>
<p>※a
nsible-vau
ltで暗号化</p>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>基
本コ
ンソ
ール</p></td>
<td></td>
<td colspan="2"><p>機 |
器 |
一 |
覧 |</p></td>
<td></td>
<td><p>ホスト名</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>―</p></td>
<td><p>s
s
h
_
k
e
y
_
f
i
l
e
s</p></td>
<td></td>
<td colspan="2"><p>認 |
証 |
方 |
式 |
が |
鍵 |
方 |
式 |
の |
場 |
合 |
、 |
s |
s |
h |
認 |
証 |
鍵 |
フ |
ァ |
イ |
ル |
が |
格 |
納 |
さ |
れ |
る |
デ |
ィ |
レ |
ク |
ト |
リ |</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td colspan="2"><p>基 |
本 |
コ |
ン |
ソ |
ー |
ル |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td colspan="2"><p>機 |
器 |
一 |
覧 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td colspan="2"><p>s |
s |
h |
認 |
証 |
鍵 |
フ |
ァ |
イ |
ル |</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>―</p></td>
<td><p>w
i
n
r
m
_
c
a
_
f
i
l
e
s</p></td>
<td></td>
<td colspan="2"><p>h |
t |
t |
p |
s |
で |
W |
i |
n |
R |
M |
接 |
続 |
す |
る |
場 |
合 |
の |
サ |
ー |
バ |
証 |
明 |
書 |
が |
格 |
納 |
さ |
れ |
る |
デ |
ィ |
レ |
ク |
ト |
リ |</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td colspan="2"><p>基 |
本 |
コ |
ン |
ソ |
ー |
ル |</p></td>
<td colspan="2"><p>機 |
器 |
一 |
覧 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td colspan="2"><p>サ |
ー |
バ |
証 |
明 |
書 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>―</p></td>
<td><p>A
n
s
i
b
l
e
E
x
e
c
O
p
t
i
o
n
.
t
x
t</p></td>
<td></td>
<td colspan="2"><p>A |
n |
s |
i |
b |
l |
e |
P |
l |
a |
y |
b |
o |
o |
k |
実 |
行 |
時 |
の |
オ |
プ |
シ |
ョ |
ン |
パ |
ラ |
メ |
ー |
タ |</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td colspan="2"><p>A |
n |
s |
i |
b |
l |
e |
共 |
通 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td colspan="2"><p>イ |
ン |
タ |
ー |
フ |
ェ |
ー |
ス |
情 |
報 |</p></td>
<td></td>
<td colspan="2"><p>オ |
プ |
シ |
ョ |
ン |
パ |
ラ |
メ |
ー |
タ |</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td><p>A
n
s
i
b
l
e
-
L
e
g
a
c
y</p></td>
<td></td>
<td colspan="2"><p>M |
o |
v |
e |
m |
e |
n |
t |
一 |
覧 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td colspan="2"><p>オ |
プ |
シ |
ョ |
ン |
パ |
ラ |
メ |
ー |
タ |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>―</p></td>
<td><p>h
o
s
t
s</p></td>
<td></td>
<td colspan="2"><p>イ |
ン |
ベ |
ン |
ト |
リ |
フ |
ァ |
イ |
ル |</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td colspan="2"><p>基 |
本 |
コ |
ン |
ソ |
ー |
ル |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td></td>
<td><p>機器
一覧</p></td>
<td colspan="2"><p>ロ |
グ |
イ |
ン |
ユ |
ー |
ザ |
I |
D |</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td colspan="2"><p>基 |
本 |
コ |
ン |
ソ |
ー |
ル |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td></td>
<td><p>機器
一覧</p></td>
<td colspan="2"><p>ロ |
グ |
イ |
ン |
パ |
ス |
ワ |
ー |
ド |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
</div>
</div></blockquote>
<p>※ |
a |
n |
s |
i |
b |
l |
e |
- |
v |
a |
u |
l |
t |
で |
暗 |
号 |
化 |</p>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td colspan="2"><p>基 |
本 |
コ |
ン |
ソ |
ー |
ル |</p></td>
<td></td>
<td></td>
<td><p>機器
一覧</p></td>
<td colspan="2"><p>ホ |
ス |
ト |
名 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td colspan="2"><p>基 |
本 |
コ |
ン |
ソ |
ー |
ル |</p></td>
<td></td>
<td></td>
<td><p>機器
一覧</p></td>
<td colspan="2"><p>I |
P |
ア |
ド |
レ |
ス |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td colspan="2"><p>基 |
本 |
コ |
ン |
ソ |
ー |
ル |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td></td>
<td><p>機器
一覧</p></td>
<td colspan="2"><p>イ |
ン |
ベ |
ン |
ト |
リ |
フ |
ァ |
イ |
ル |
追 |
加 |
オ |
プ |
シ |
ョ |
ン |</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td colspan="2"><p>基 |
本 |
コ |
ン |
ソ |
ー |
ル |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td></td>
<td><p>機器
一覧</p></td>
<td colspan="2"><p>W |
i |
n |
R |
M |
接 |
続 |
情 |
報 |</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td colspan="2"><p>基 |
本 |
コ |
ン |
ソ |
ー |
ル |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td></td>
<td><p>機器
一覧</p></td>
<td colspan="2"><p>接 |
続 |
オ |
プ |
シ |
ョ |
ン |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
</div>
</div></blockquote>
<p>※ |
a |
n |
s |
i |
b |
l |
e |
_ |
s |
s |
h |
_ |
e |
x |
t |
r |
a |
_ |
a |
r |
g |
s |
の |
値 |</p>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>―</p></td>
<td><p>p
l
a
y
b
o
o
k
.
y
m
l</p></td>
<td></td>
<td colspan="2"><p>M |
o |
v |
e |
m |
e |
n |
t |
- |
P |
l |
a |
y |
b |
o |
o |
k |
紐 |
付 |
（ |
M |
o |
v |
e |
m |
e |
n |
t |
- |
対 |
話 |
種 |
別 |
紐 |
付 |
、 |
M |
o |
v |
e |
m |
e |
n |
t |
- |
ロ |
ー |
ル |
紐 |
付 |
） |
で |
指 |
定 |
さ |
れ |
た |
R |
o |
l |
e |
を |
実 |
行 |
す |
る |
マ |
ス |
タ |
P |
l |
a |
y |
b |
o |
o |
k |</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td><p>A
n
s
i
b
l
e</p></td>
<td></td>
<td colspan="2"><p>P |
l |
a |
y |
b |
o |
o |
k |
素 |
材 |
集 |</p></td>
<td></td>
<td colspan="2"><p>プ |
レ |
イ |
ブ |
ッ |
ク |
素 |
材 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td><p>L
e
g
a
c
y
R
o
l
e</p></td>
<td></td>
<td colspan="2"><p>M |
o |
v |
e |
m |
e |
n |
t |
- |
P |
l |
a |
y |
b |
o |
o |
k |
紐 |
付 |
（ |
M |
o |
v |
e |
m |
e |
n |
t |
- |
対 |
話 |
種 |
別 |
紐 |
付 |
、 |
M |
o |
v |
e |
m |
e |
n |
t |
- |
ロ |
ー |
ル |
紐 |
付 |
） |</p></td>
<td></td>
<td colspan="2"><p>イ |
ン |
ク |
ル |
ー |
ド |
順 |
序 |</p>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<ol class="arabic">
<li><p class="rubric" id="id243">投入データを直接実行する方法</p>
<p>(1)投入データの解凍先ディレクトリの作成</p>
</li>
</ol>
<p>以下の2つのディレクトリを作成し、1.のディレクトリに投入データを解凍します。</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>/ベースディレクトリ/ドライバパス/作業番号/in</p></li>
<li><p>/ベースディレクトリ/ドライバパス/作業番号/out</p></li>
</ol>
<p>　　　　　　ベースディレクトリ:
インターフェース情報=&gt;データリレイストレージパス(Ansible)</p>
<p>ドライバパス: 　　　 legacy: legacy/ns　 Legacy-role: legacy/rl
pioneer: pioneer/ns</p>
<p>　　　　　　作業番号:　作業実行時の作業番号を右寄せで不足分は0を埋めた10桁の文字列。</p>
<p>作業番号: 12345 =&gt; 0000012345</p>
<p>尚、投入データには、機器一覧にアップロードした秘密鍵ファイルが含まれていません。秘密鍵ファイルを必要といる認証方式の場合、投入データに含まれているインベントリファイル「hosts」を開き、ansible_ssh_private_key_fileに設定されているパスに秘密鍵ファイルをコピーして下さい。</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>投入データを直接実行するコマンド</p></li>
</ol>
<blockquote>
<div><p>Ansible-Legacy</p>
<p>ansible-playbook (オプション) –i hosts --vault-password-file
パスワードファイル playbook.yml</p>
<p>Ansible-Pioneer</p>
<p>ansible-playbook (オプション) –i hosts --vault-password-file
パスワードファイル playbook.yml</p>
<p>Ansible-LegacyRole</p>
<p>ansible-playbook (オプション) –i hosts --vault-password-file
パスワードファイル site.yml</p>
<p>パスワードファイル名は任意です。パスワードファイルに設定するパスワードは、ＩＴＡインストール先/ita-root/confs/commonconfs/ansible_vault_accesskey.txtの内容を、rot13、base64の順でデコードした値を使用して下さい。</p>
</div></blockquote>
</section>
</section>
<section id="id244">
<h2><span class="section-number">17.2. </span>Ansible実行時に作成される結果データ<a class="headerlink" href="#id244" title="この見出しへのパーマリンク">¶</a></h2>
<blockquote>
<div><p>[投入データ］をansibleで実行した結果を[結果データ]としてZIP形式で保存します。</p>
</div></blockquote>
<p>[結果データ]はZIP形式で「<em>5.3.12作業状態確認</em>」よりダウンロードが可能です。</p>
<section id="legacy-legacyrole">
<h3>Legacy/LegacyRole結果データに保存されるファイル一覧<a class="headerlink" href="#legacy-legacyrole" title="この見出しへのパーマリンク">¶</a></h3>
<blockquote>
<div><p>表8.2.1-1 Legacy/LegacyRole結果データの保存されるファイル一覧</p>
</div></blockquote>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><ul class="simple">
<li></li>
</ul>
<p><em>ファイル名*</em></p>
</th>
<th class="head"><p><strong>記録内容</strong></p></th>
<th class="head"><p>A
ns
ib
le
Co
re
の
場
合</p></th>
<th class="head"><p>Ans
ible
Au
toma
tion
Co
ntro
ller
の
場合</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>result.txt</p></td>
<td><p>Ansibleの実行結果を記録</p></td>
<td><p>〇</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>xxx.pid</p></td>
<td><p>Ansible-playbbokコ
マンドのプロセスIDを記録するファイル。</p>
<p>x
xx:Ansible-playbbokコマンドのプロセスID</p>
</td>
<td><p>〇</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>error.log</p></td>
<td><p>作業実行時にITAがなにかしらのエラ
ーによりエラーメッセージを出力した場合
、または、Ansible-playbbokコマンドがな
にかとらのエラーによりエラーメッセージ
を出力した場合のエラー出力先ファイル。</p>
<p>作業実行確
認のエラーログに表示に表示される内容。</p>
</td>
<td><p>〇</p></td>
<td><p>〇</p></td>
</tr>
<tr class="row-odd"><td><p>exec.log</p></td>
<td><p>Ansible-playbbokが出力した
実行ログを一部加工したログファイル。作
業実行確認の実行ログに表示される内容。</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
</tr>
<tr class="row-even"><td><p>exec.log.org</p></td>
<td><p>Ansible-playbbokが出力した実行ログ</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
</tr>
<tr class="row-odd"><td><p>I
ta_&lt;mode名&gt;_</p>
<p>execut
ions_jobtpl_</p>
<p>&lt;作業番号&gt;_&lt;
グループ番号&gt;</p>
</td>
<td><p>分割された実行ログファイルです。</p>
<p>ファイル名の命名規則は5.3.12
作
業状態確認の⑥実行ログ表示を参照下さい。</p>
</td>
<td></td>
<td><p>〇</p></td>
</tr>
<tr class="row-even"><td><p>forced.txt</p></td>
<td><p>緊急停止をした場合の記録ファイル</p></td>
<td><p>〇</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>user_files</p></td>
<td><p>実行したplaybook
でITA独自変数「__workflowdi
<a href="#id247"><span class="problematic" id="id248">r__</span></a>」になにかしらのファイル出力をした場
合のファイルが記録されるディレクトリ。</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
</tr>
</tbody>
</table>
</section>
<section id="pioneer">
<h3>Pioneer結果データに保存されるファイル一覧<a class="headerlink" href="#pioneer" title="この見出しへのパーマリンク">¶</a></h3>
<p>表8.2.1-2 Pioneer結果データの保存されるファイル一覧</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><ul class="simple">
<li></li>
</ul>
<p><em>ファイル名*</em></p>
</th>
<th class="head"><p><strong>記録内容</strong></p></th>
<th class="head"><p>A
ns
ib
le
Co
re
の
場
合</p></th>
<th class="head"><p>Ans
ible
Au
toma
tion
Cont
roll
erの
場合</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>result.txt</p></td>
<td><p>Ansibleの実行結果を記録</p></td>
<td><p>〇</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>xxx.pid</p></td>
<td><p>Ansible-playbbokコ
マンドのプロセスIDを記録するファイル。</p>
<p>x
xx:Ansible-playbbokコマンドのプロセスID</p>
</td>
<td><p>〇</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>pioneer.xxx</p></td>
<td><p>Pioneerモジ
ュールのプロセスIDを記録するファイル。</p>
<p>xxx: PioneerモジュールのプロセスID</p>
</td>
<td><p>〇</p></td>
<td><p>〇</p></td>
</tr>
<tr class="row-odd"><td><p>error.log</p></td>
<td><p>作業実行時にITAがなにかしらのエラ
ーによりエラーメッセージを出力した場合
、または、Ansible-playbbokコマンドがな
にかとらのエラーによりエラーメッセージ
を出力した場合のエラー出力先ファイル。</p>
<p>作業実行確
認のエラーログに表示に表示される内容。</p>
</td>
<td><p>〇</p></td>
<td><p>〇</p></td>
</tr>
<tr class="row-even"><td><p>exec.log</p></td>
<td><p>Ansible-playbbokが出力した
実行ログを一部加工したログファイル。作
業実行確認の実行ログに表示される内容。</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
</tr>
<tr class="row-odd"><td><p>exec.log.org</p></td>
<td><p>Ansible-playbbokが出力した実行ログ</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
</tr>
<tr class="row-even"><td><p>I
ta_&lt;mode名&gt;_</p>
<p>execut
ions_jobtpl_</p>
<p>&lt;作業番号&gt;_&lt;
グループ番号&gt;</p>
</td>
<td><p>分割された実行ログファイルです。</p>
<p>ファイル名の命名規則は5.3.12
作
業状態確認の⑥実行ログ表示を参照下さい。</p>
</td>
<td></td>
<td><p>〇</p></td>
</tr>
<tr class="row-odd"><td><p>forced.txt</p></td>
<td><p>緊急停止をした場合の記録ファイル</p></td>
<td><p>〇</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>user_files</p></td>
<td><p>実行したplaybook
でITA独自変数「__workflowdi
<a href="#id247"><span class="problematic" id="id249">r__</span></a>」になにかしらのファイル出力をした場
合のファイルが記録されるディレクトリ。</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
</tr>
</tbody>
</table>
<ol class="arabic simple">
<li><p>Legacy-Role</p></li>
</ol>
<blockquote>
<div><p>表9.2.1-3 Legacy-Role結果データの保存されるファイル一覧</p>
</div></blockquote>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><ul class="simple">
<li></li>
</ul>
<p><em>ファイル名*</em></p>
</th>
<th class="head"><p><strong>記録内容</strong></p></th>
<th class="head"><p>A
ns
ib
le
Co
re
の
場
合</p></th>
<th class="head"><p>Ans
ible
Au
toma
tion
Cont
roll
erの
場合</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>result.txt</p></td>
<td><p>Ansibleの実行結果を記録</p></td>
<td><p>〇</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>xxx.pid</p></td>
<td><p>Ansible-playbbokコ
マンドのプロセスIDを記録するファイル。</p>
<p>x
xx:Ansible-playbbokコマンドのプロセスID</p>
</td>
<td><p>〇</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>error.log</p></td>
<td><p>作業実行時にITAがなにかしらのエラ
ーによりエラーメッセージを出力した場合
、または、Ansible-playbbokコマンドがな
にかとらのエラーによりエラーメッセージ
を出力した場合のエラー出力先ファイル。</p>
<p>作業実行確
認のエラーログに表示に表示される内容。</p>
</td>
<td><p>〇</p></td>
<td><p>〇</p></td>
</tr>
<tr class="row-odd"><td><p>exec.log</p></td>
<td><p>Ansible-playbbokが出力した
実行ログを一部加工したログファイル。作
業実行確認の実行ログに表示される内容。</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
</tr>
<tr class="row-even"><td><p>exec.log.org</p></td>
<td><p>Ansible-playbbokが出力した実行ログ</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
</tr>
<tr class="row-odd"><td><p>I
ta_&lt;mode名&gt;_</p>
<p>execut
ions_jobtpl_</p>
<p>&lt;作業番号&gt;_&lt;
グループ番号&gt;</p>
</td>
<td><p>分割された実行ログファイルです。</p>
<p>ファイル名の命名規則は5.3.12
作
業状態確認の⑥実行ログ表示を参照下さい。</p>
</td>
<td></td>
<td><p>〇</p></td>
</tr>
<tr class="row-even"><td><p>forced.txt</p></td>
<td><p>緊急停止をした場合の記録ファイル</p></td>
<td><p>〇</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>user_files</p></td>
<td><p>実行したplaybook
でITA独自変数「__workflowdi
<a href="#id247"><span class="problematic" id="id250">r__</span></a>」になにかしらのファイル出力をした場
合のファイルが記録されるディレクトリ。</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id245">
<h2><span class="section-number">17.3. </span>オプションパラメータ一覧<a class="headerlink" href="#id245" title="この見出しへのパーマリンク">¶</a></h2>
<p>インターフェース情報とMovement一覧のオプションパラメータについて説明します。</p>
<p>ITAでは、以下の順番でansible-playbookのオプションパラメータを設定するので、単一の値しか許容していないパラメータを複数定義した場合、Movement一覧=&gt;オプションパラメータのパラメータが有効になります。</p>
<blockquote>
<div><p>・Ansible共通=&gt;インターフェース情報=&gt;オプションパラメータ</p>
<p>・Movement一覧=&gt;オプションパラメータ</p>
</div></blockquote>
<p>実行エンジンがAnsible Coreの場合</p>
<blockquote>
<div><p>実行エンジンがAnsible
Coreの場合、ansible-playbookコマンドのオプションパラメータを入力します。</p>
<p>ansible-playbookコマンドのオプションパラメータの仕様については、以下のコマンドを実行して表示されたヘルプを参照してください。</p>
<p>「 ansible-playbook –h 」</p>
</div></blockquote>
<p>実行エンジンがAnsible Core以外の場合</p>
<p>以下の表 8.3.1は実行エンジンがAnsible
Core以外の場合に、指定可能なオプションパラメータです。</p>
<p>表8.3.1 実行エンジンがAnsible
Core以外の場合に指定可能なオプションパラメータ一覧</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>オ
プションパ
ラメータ</strong></p></th>
<th class="head"><p><strong>指定方法</strong></p></th>
<th class="head"><p><strong>Ansible
Automation
C
ontrollerの
設定箇所</strong></p></th>
<th class="head"><p><strong>備考</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>-v</p>
<p>--verbose</p>
</td>
<td><p>-v</p>
<p>-vv</p>
<p>-vvv</p>
<p>-vvvv</p>
<p>-vvvvv</p>
<p>--verbose</p>
</td>
<td><p>テ
ンプレート
画面の[詳細
]に指定した
vの数を設定</p></td>
<td><p>・vの合計値を適用</p>
<p>・--
verboseは、-vと同様</p>
<p>例：--verbose
–vvv
の場合、-vvvvと同様</p>
<p>・v
を6以上指定した場合
、vは5の指定となる</p>
</td>
</tr>
<tr class="row-odd"><td><p>-f</p>
<p>--forks</p>
</td>
<td><p>-f FORKS</p>
<p>--forks=FORKS</p>
</td>
<td><p>テンプレ
ートの[フォ
ーク]に指定
したFORKSが
設定される</p></td>
<td><p>・
FORKSには数値を指定</p>
<p>・複数定義した
場合、最後に定義し
たパラメータが有効</p>
<p>例：-f 1
–
forks=10の場合、--f
orks=10が有効となる</p>
<p>・数
値以外が指定された
場合、エラーとなる</p>
</td>
</tr>
<tr class="row-even"><td><p>-l</p>
<p>--limit</p>
</td>
<td><p>-l SUBSET</p>
<p>--limit=SUBSET</p>
</td>
<td><p>テンプ
レートの[制
限]に指定し
たSUBMITが
設定される</p></td>
<td><p>・SUBSET：機器
一覧にあるホスト名</p>
<p>・複数定義した
場合、最後に定義し
たパラメータが有効</p>
</td>
</tr>
<tr class="row-odd"><td><p>-e</p>
<ul class="simple">
<li></li>
</ul>
<p>-extra-vars</p>
</td>
<td><p>-e EXTRA_VARS</p>
<p>--extr
a-vars=EXTRA_VARS</p>
</td>
<td><p>テン
プレートの[
追加変数]に
変数名:具体
値の形式で
設定される</p></td>
<td><p>・EXTRA_VARS:
変数名、具体値をjso
n形式またはyaml形式</p>
<p>例：</p>
<p>json形式の場合
–extra-var
s={&quot;VAR_1&quot;:&quot;directo
ry&quot;,&quot;VAR_2&quot;:&quot;0755&quot;}</p>
<p>yaml形式の場合
–extra-vars=VAR_1:
directory\nVAR_2:
0755</p>
<p>・複数定義した
場合、最後に定義し
たパラメータが有効</p>
</td>
</tr>
<tr class="row-even"><td><p>-t</p>
<p>--tags</p>
</td>
<td><p>-t TAGS</p>
<p>--tags=TAGS</p>
</td>
<td><p>テンプレー
トの[ジョブ
タグ]に設定
したTAGSが
設定される</p></td>
<td><p>・TAGS：タグ名</p>
<p>・複数個
のパラメータを許容</p>
</td>
</tr>
<tr class="row-odd"><td><p>-b</p>
<p>--become</p>
</td>
<td><p>-b</p>
<p>--become</p>
</td>
<td><p>テンプ
レートのオ
プション[権
限昇格の有
効化]がチェ
ックされる</p></td>
<td><p>・少
なくとも1つ指定すれ
ばパラメータが有効</p></td>
</tr>
<tr class="row-even"><td><p>-D</p>
<p>--diff</p>
</td>
<td><p>-D</p>
<p>--diff</p>
</td>
<td><p>テンプレ
ートの[変更
]の表示が有
効化される</p></td>
<td><p>・少
なくとも1つ指定すれ
ばパラメータが有効</p></td>
</tr>
<tr class="row-odd"><td><p>--skip-tags</p></td>
<td><p>--sk
ip-tags=SKIP_TAGS</p></td>
<td><p>テンプ
レートの[ス
キップタグ
]に設定した
SKIP_TAGSが
設定される</p></td>
<td><p>・SKIP_T
AGS：スキップタグ名</p>
<p>・複数個
のパラメータを許容</p>
</td>
</tr>
<tr class="row-even"><td><p>--st
art-at-task</p></td>
<td><p>--start-at-t
ask=START_AT_TASK</p></td>
<td><p>※Ansible
Automation
Cont
rollerのWeb
UI には
--st
art-at-task
の表
示はない。</p></td>
<td><p>・複数定義した
場合、最後に定義し
たパラメータが有効</p></td>
</tr>
<tr class="row-odd"><td><p>-ufc</p>
<p>--use
_fact_cache</p>
</td>
<td><p>-ufc</p>
<p>--use_fact_cache</p>
</td>
<td><p>テンプ
レートのオ
プション[フ
ァクトキャ
ッシュの有
効化]がチェ
ックされる</p></td>
<td><p>・少
なくとも1つ指定すれ
ばパラメータが有効</p></td>
</tr>
<tr class="row-even"><td><p>-as</p>
<p>--allow_s
imultaneous</p>
</td>
<td><p>-as</p>
<p>--a
llow_simultaneous</p>
</td>
<td><p>テ
ンプレート
のオプショ
ン[同時実行
ジョブの有
効化]がチェ
ックされる</p></td>
<td><p>・少
なくとも1つ指定すれ
ばパラメータが有効</p></td>
</tr>
<tr class="row-odd"><td><p>-jsc</p>
<p>--<a href="#id329"><span class="problematic" id="id330">job_</span></a>
slice_count</p>
</td>
<td><p>-jsc
ジョブスライス数</p>
<p>--job_slice_count
=ジョブスライス数</p>
</td>
<td><p>テンプレ
ートの[ジョ
ブスライス
数]に指定し
たジョブス
ライス数が
設定される</p></td>
<td><p>・ジョブスライ
ス数には数値を指定</p>
<p>・複数定義した
場合、最後に定義し
たパラメータが有効</p>
</td>
</tr>
</tbody>
</table>
<p>※Ansible Automation
Controllerのオプションパラメータの仕様については、Ansible Automation
Controllerユーザーガイドのジョブテンプレートの説明を参照して下さい。</p>
</section>
<section id="ansible-automation-controllerita">
<h2><span class="section-number">17.4. </span>Ansible Automation ControllerでITA独自変数を利用する場合の留意事項<a class="headerlink" href="#ansible-automation-controllerita" title="この見出しへのパーマリンク">¶</a></h2>
<blockquote>
<div><p>下記ITA独自変数を利用してファイル出力をするPlyabookを含むMovementをクラスタ構成のAnsible
Automation Controllerで作業実行した場合の留意事項について記載します。</p>
<p>対象のITA独自変数</p>
<p>・__workflowdir__</p>
<p>・__symphony_workflowdir__</p>
<p>・__conductor_workflowdir__</p>
<p>・__movement_status_filepath__</p>
<p>・__parameters_dir_for_epc__</p>
<p>・__parameters_file_dir_for_epc__</p>
<p>・__parameter_dir__</p>
<p>・__parameters_file_dir__</p>
</div></blockquote>
<ol class="arabic simple">
<li><p>ITA独自変数を利用して作成したファイルの取り扱い</p></li>
</ol>
<blockquote>
<div><p>ITA独自変数を利用して作成したファイルの出力先ディレクトリパスはAnsible
Automation
ControllerのITA作業用ディレクトリ配下「/var/lib/exastro」に設定されます。Movement実行前に結果データをAnsible
Automation
ControllerのITA作業用ディレクトリ配下「/var/lib/exastro」にファイル転送します。Movement実行でここに作成されたファイルは、Movement実行後に各Ansible
Automation
Controllerより結果データに上書きモードでファイル転送します。同一ファイル名でファイルを作成している場合、更新したファイルが結果データに正しく反映されない場合があります。</p>
</div></blockquote>
<ol class="arabic">
<li><dl class="simple">
<dt>　Movementをsymphony/conductorから実行している場合、Movement実行前に該当symphony/conductorインスタンス配下のファイルをAnsible</dt><dd><p>Automation ControllerのITA作業用ディレクトリ配下にファイル転送</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Movement実行前に該当Movement配下のファイルをAnsible Automation</dt><dd><p>ControllerのITA作業用ディレクトリにファイル転送</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>　Movementをsymphony/conductorから実行している場合、Movement実行後にAnsible</dt><dd><p>Automation
ControllerのITA作業用ディレクトリの該当Movementで作成したファイルを結果データにファイル転送</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>　Movement実行後にAnsible Automation</dt><dd><p>ControllerのITA作業用ディレクトリの該当symphony/conductorインスタンス配下に作成したファイルを結果データにファイル転送</p>
</dd>
</dl>
<ol class="arabic simple">
<li><p>留意事項</p></li>
</ol>
</li>
<li><p>ファイル名はansible「__loginhostname__」を含めるなどして、Movementに紐づいているターゲットホスト毎に同一ファイル名に出力しないように工夫して下さい。</p></li>
<li><p>symphony/conductorから実行する場合、複数のMovementで同一ファイル名への出力しないよう工夫して下さい。</p></li>
</ol>
</section>
<section id="id246">
<h2><span class="section-number">17.5. </span>実行時データ削除で削除されるデータリソース<a class="headerlink" href="#id246" title="この見出しへのパーマリンク">¶</a></h2>
<blockquote>
<div><p>インターフェース情報の実行時データ削除で「削除する」を選択した場合に、削除されるデータリソースを以下に列挙します。</p>
<p>表8.5-1実行時データ削除で削除されるデータリソース一覧(Ansible
Automation Controller側)</p>
</div></blockquote>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>データリソース</p></th>
<th class="head"><p>ﾘｿｰｽ
ﾀｲﾌﾟ</p></th>
<th class="head"><p>実行
エン
ジン</p></th>
<th class="head"></th>
<th class="head"><p>備考</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
<td></td>
<td><p>Ans
ible
Towe
r3.x</p></td>
<td><p>A
nsible
Auto
mation
C
ontrol
ler4.x</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>ITA作業用ディレクトリ
/var/lib/exastro/ita_&lt;
区分&gt;_executions_10桁の作業番号</p></td>
<td><p>ディ
レク
トリ</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>SCM管理ディレクトリ</p>
<p>/var/lib/awx/projects/ita_&lt;
区分&gt;_executions_10桁の作業番号</p>
</td>
<td><p>ディ
レク
トリ</p></td>
<td><p>〇</p></td>
<td><p>※</p></td>
<td><p>※プ
ロジェク
トリソー
スを削除
により削
除される</p></td>
</tr>
<tr class="row-odd"><td><p>インベントリ
リソース名:
ita_&lt;区分&gt;_execution
s_inventory_10桁の作業番号_通番</p></td>
<td><p>リソ
ース</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
<td></td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">認証情報</div>
<div class="line">リソース名:
ita_&lt;区分&gt;_executions</div>
</div>
<p>_credential_10桁の作業番号_通番</p>
<p>ita_&lt;区分&gt;_executions_
vault_credential_10桁の作業番号</p>
<p>ita_&lt;区分&gt;_execution
s_git_credential_10桁の作業番号</p>
</td>
<td><p>リソ
ース</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>プロジェクト
リソース名:
ita_&lt;区分&gt;_ex
ecutions_project_10桁の作業番号</p></td>
<td><p>リソ
ース</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>ジョブテンプレート
リソース名:
ita_&lt;区分&gt;_execut
ions_jobtpl_10桁の作業番号_通番</p></td>
<td><p>リソ
ース</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>ワークフロージョブテンプレート</p>
<p>リソース名:
ita_&lt;区分&gt;_execut
ions_workflowtpl_10桁の作業番号</p>
</td>
<td><p>リソ
ース</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
<td></td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line">ジョブ</div>
<div class="line">リソース名:
Job番号—ita_&lt;区分&gt;_execut</div>
</div>
<p>ions_workflowtpl_10桁の作業番号</p>
<p>Job番号—ita_&lt;区分&gt;_e
xecutions_jobtpl_10桁の作業番号</p>
</td>
<td><p>リソ
ース</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
<td></td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>表8.5-2 実行時データ削除で削除されるデータリソース一覧(ITA側)</p>
</div></blockquote>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>データリソース</p></th>
<th class="head"><p>ﾘｿｰｽ
ﾀｲﾌﾟ</p></th>
<th class="head"><p>実
行
エ
ン
ジ
ン</p></th>
<th class="head"></th>
<th class="head"><p>備考</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
<td></td>
<td><p>A
nsi
ble
To
wer
3.x</p></td>
<td><p>An
sible
Autom
ation
Con
troll
er4.x</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Git リポジトリ
ITAｲ
ﾝｽﾄｰﾙﾃﾞｨﾚｸﾄﾘ/ita-root/repositorys/a
nsible_driver/&lt;区分&gt;_10桁の作業番号</p></td>
<td><p>G
itリ
ポジ
トリ</p></td>
<td><p>〇</p></td>
<td><p>〇</p></td>
<td><p>ディ
レクトリ
ごと削除</p></td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>区分: legacy/legacy_role/pioneer</p>
</div></blockquote>
</section>
</section>


</div>


<div id="articleNavigation">
  <ul>
  </ul>
</div>


<div id="pageTopLink">
  <a href="#container"><i>↑</i> Page Top</a>
</div>

</article>
</div>
</main>
</div><!-- End #contents -->
<div id="footer">
  <footer class="divInner">
    <small>Copyright © 2022 NEC Corporation</small>
  </footer>
</div><!-- End #footer -->

<div id="overlay"></div>

</div><!-- End #container -->
  </body>
</html>